/*! For license information please see home.js.LICENSE.txt */
!function(){var t={158:function(t,e,i){var s,n;"undefined"!=typeof window&&window,void 0===(n="function"==typeof(s=function(){"use strict";function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},s=i[t]=i[t]||[];return-1==s.indexOf(e)&&s.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var s=i.indexOf(e);return-1!=s&&i.splice(s,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var s=this._onceEvents&&this._onceEvents[t],n=0;n<i.length;n++){var r=i[n];s&&s[r]&&(this.off(t,r),delete s[r]),r.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})?s.call(e,i,e,t):s)||(t.exports=n)},187:function(t){"use strict";var e,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};e=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,e){return new Promise((function(i,s){function n(i){t.removeListener(e,r),s(i)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}f(t,e,r,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&f(t,"error",e,{once:!0})}(t,n)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var a=10;function o(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function h(t,e,i,s){var n,r,a,h;if(o(i),void 0===(r=t._events)?(r=t._events=Object.create(null),t._eventsCount=0):(void 0!==r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t._events),a=r[e]),void 0===a)a=r[e]=i,++t._eventsCount;else if("function"==typeof a?a=r[e]=s?[i,a]:[a,i]:s?a.unshift(i):a.push(i),(n=l(t))>0&&a.length>n&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,h=u,console&&console.warn&&console.warn(h)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=u.bind(s);return n.listener=i,s.wrapFn=n,n}function d(t,e,i){var s=t._events;if(void 0===s)return[];var n=s[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):m(n,n.length)}function p(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function m(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function f(t,e,i,s){if("function"==typeof t.on)s.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(r){s.once&&t.removeEventListener(e,n),i(r)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=r[t];if(void 0===l)return!1;if("function"==typeof l)s(l,this,e);else{var h=l.length,u=m(l,h);for(i=0;i<h;++i)s(u[i],this,e)}return!0},r.prototype.addListener=function(t,e){return h(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return h(this,t,e,!0)},r.prototype.once=function(t,e){return o(e),this.on(t,c(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){return o(e),this.prependListener(t,c(this,t,e)),this},r.prototype.removeListener=function(t,e){var i,s,n,r,a;if(o(e),void 0===(s=this._events))return this;if(void 0===(i=s[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){a=i[r].listener,n=r;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(s[t]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",t,a||e)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var e,i,s;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var n,r=Object.keys(i);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},r.prototype.listenerCount=p,r.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},564:function(t,e,i){var s,n;!function(r,a){"use strict";s=[i(158)],n=function(t){return function(t,e){var i=t.jQuery,s=t.console;function n(t,e){for(var i in e)t[i]=e[i];return t}var r=Array.prototype.slice;function a(t,e,o){if(!(this instanceof a))return new a(t,e,o);var l,h=t;"string"==typeof t&&(h=document.querySelectorAll(t)),h?(this.elements=(l=h,Array.isArray(l)?l:"object"==typeof l&&"number"==typeof l.length?r.call(l):[l]),this.options=n({},this.options),"function"==typeof e?o=e:n(this.options,e),o&&this.on("always",o),this.getImages(),i&&(this.jqDeferred=new i.Deferred),setTimeout(this.check.bind(this))):s.error("Bad element for imagesLoaded "+(h||t))}a.prototype=Object.create(e.prototype),a.prototype.options={},a.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},a.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&o[e]){for(var i=t.querySelectorAll("img"),s=0;s<i.length;s++){var n=i[s];this.addImage(n)}if("string"==typeof this.options.background){var r=t.querySelectorAll(this.options.background);for(s=0;s<r.length;s++){var a=r[s];this.addElementBackgroundImages(a)}}}};var o={1:!0,9:!0,11:!0};function l(t){this.img=t}function h(t,e){this.url=t,this.element=e,this.img=new Image}return a.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,s=i.exec(e.backgroundImage);null!==s;){var n=s&&s[2];n&&this.addBackground(n,t),s=i.exec(e.backgroundImage)}},a.prototype.addImage=function(t){var e=new l(t);this.images.push(e)},a.prototype.addBackground=function(t,e){var i=new h(t,e);this.images.push(i)},a.prototype.check=function(){var t=this;function e(e,i,s){setTimeout((function(){t.progress(e,i,s)}))}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach((function(t){t.once("progress",e),t.check()})):this.complete()},a.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&s&&s.log("progress: "+i,t,e)},a.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},l.prototype=Object.create(e.prototype),l.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},l.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},l.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},l.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},l.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},l.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},h.prototype=Object.create(l.prototype),h.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},h.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},h.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},a.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((i=e).fn.imagesLoaded=function(t,e){return new a(this,t,e).jqDeferred.promise(i(this))})},a.makeJQueryPlugin(),a}(r,t)}.apply(e,s),void 0===n||(t.exports=n)}("undefined"!=typeof window?window:this)},425:function(t){!function(e){var i=0,s=!1,n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,r)}catch(t){}var a=function(t){var e=t.target,s=window.innerWidth/window.document.documentElement.clientWidth;if(!(t.touches.length>1||1!==s)){for(;e!==document.body&&e!==document;){var n=window.getComputedStyle(e);if(!n)break;if("INPUT"===e.nodeName&&"range"===e.getAttribute("type"))return;var r=n.getPropertyValue("-webkit-overflow-scrolling"),a=n.getPropertyValue("overflow-y"),o=parseInt(n.getPropertyValue("height"),10),l="touch"===r&&("auto"===a||"scroll"===a),h=e.scrollHeight>e.offsetHeight;if(l&&h){var u=t.touches?t.touches[0].screenY:t.screenY,c=i<=u&&0===e.scrollTop,d=i>=u&&e.scrollHeight-e.scrollTop===o;return void((c||d)&&t.preventDefault())}e=e.parentNode}t.preventDefault()}},o=function(t){i=t.touches?t.touches[0].screenY:t.screenY},l=function(){window.addEventListener("touchstart",o,!!n&&{passive:!1}),window.addEventListener("touchmove",a,!!n&&{passive:!1}),s=!0},h=document.createElement("div");document.documentElement.appendChild(h),h.style.WebkitOverflowScrolling="touch";var u="getComputedStyle"in window&&"touch"===window.getComputedStyle(h)["-webkit-overflow-scrolling"];document.documentElement.removeChild(h),u&&l();var c={enable:l,disable:function(){window.removeEventListener("touchstart",o,!1),window.removeEventListener("touchmove",a,!1),s=!1},isEnabled:function(){return s}};t.exports&&(t.exports=c),"function"==typeof e.define?(0,e.define)("iNoBounce",[],(function(){return c})):e.iNoBounce=c}(this)},705:function(t,e,i){var s=i(639).Symbol;t.exports=s},412:function(t){t.exports=function(t,e){for(var i=-1,s=null==t?0:t.length;++i<s&&!1!==e(t[i],i,t););return t}},636:function(t,e,i){var s=i(545),n=i(694),r=i(469),a=i(144),o=i(776),l=i(719),h=Object.prototype.hasOwnProperty;t.exports=function(t,e){var i=r(t),u=!i&&n(t),c=!i&&!u&&a(t),d=!i&&!u&&!c&&l(t),p=i||u||c||d,m=p?s(t.length,String):[],f=m.length;for(var g in t)!e&&!h.call(t,g)||p&&("length"==g||c&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||o(g,f))||m.push(g);return m}},881:function(t,e,i){var s=i(816),n=i(291)(s);t.exports=n},483:function(t,e,i){var s=i(63)();t.exports=s},816:function(t,e,i){var s=i(483),n=i(674);t.exports=function(t,e){return t&&s(t,e,n)}},239:function(t,e,i){var s=i(705),n=i(607),r=i(333),a=s?s.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?n(t):r(t)}},454:function(t,e,i){var s=i(239),n=i(5);t.exports=function(t){return n(t)&&"[object Arguments]"==s(t)}},749:function(t,e,i){var s=i(239),n=i(780),r=i(5),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return r(t)&&n(t.length)&&!!a[s(t)]}},280:function(t,e,i){var s=i(726),n=i(916),r=Object.prototype.hasOwnProperty;t.exports=function(t){if(!s(t))return n(t);var e=[];for(var i in Object(t))r.call(t,i)&&"constructor"!=i&&e.push(i);return e}},545:function(t){t.exports=function(t,e){for(var i=-1,s=Array(t);++i<t;)s[i]=e(i);return s}},518:function(t){t.exports=function(t){return function(e){return t(e)}}},290:function(t,e,i){var s=i(557);t.exports=function(t){return"function"==typeof t?t:s}},291:function(t,e,i){var s=i(612);t.exports=function(t,e){return function(i,n){if(null==i)return i;if(!s(i))return t(i,n);for(var r=i.length,a=e?r:-1,o=Object(i);(e?a--:++a<r)&&!1!==n(o[a],a,o););return i}}},63:function(t){t.exports=function(t){return function(e,i,s){for(var n=-1,r=Object(e),a=s(e),o=a.length;o--;){var l=a[t?o:++n];if(!1===i(r[l],l,r))break}return e}}},957:function(t,e,i){var s="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;t.exports=s},607:function(t,e,i){var s=i(705),n=Object.prototype,r=n.hasOwnProperty,a=n.toString,o=s?s.toStringTag:void 0;t.exports=function(t){var e=r.call(t,o),i=t[o];try{t[o]=void 0;var s=!0}catch(t){}var n=a.call(t);return s&&(e?t[o]=i:delete t[o]),n}},776:function(t){var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,i){var s=typeof t;return!!(i=null==i?9007199254740991:i)&&("number"==s||"symbol"!=s&&e.test(t))&&t>-1&&t%1==0&&t<i}},726:function(t){var e=Object.prototype;t.exports=function(t){var i=t&&t.constructor;return t===("function"==typeof i&&i.prototype||e)}},916:function(t,e,i){var s=i(569)(Object.keys,Object);t.exports=s},167:function(t,e,i){t=i.nmd(t);var s=i(957),n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,a=r&&r.exports===n&&s.process,o=function(){try{return r&&r.require&&r.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=o},333:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},569:function(t){t.exports=function(t,e){return function(i){return t(e(i))}}},639:function(t,e,i){var s=i(957),n="object"==typeof self&&self&&self.Object===Object&&self,r=s||n||Function("return this")();t.exports=r},73:function(t,e,i){t.exports=i(486)},486:function(t,e,i){var s=i(412),n=i(881),r=i(290),a=i(469);t.exports=function(t,e){return(a(t)?s:n)(t,r(e))}},557:function(t){t.exports=function(t){return t}},694:function(t,e,i){var s=i(454),n=i(5),r=Object.prototype,a=r.hasOwnProperty,o=r.propertyIsEnumerable,l=s(function(){return arguments}())?s:function(t){return n(t)&&a.call(t,"callee")&&!o.call(t,"callee")};t.exports=l},469:function(t){var e=Array.isArray;t.exports=e},612:function(t,e,i){var s=i(560),n=i(780);t.exports=function(t){return null!=t&&n(t.length)&&!s(t)}},144:function(t,e,i){t=i.nmd(t);var s=i(639),n=i(62),r=e&&!e.nodeType&&e,a=r&&t&&!t.nodeType&&t,o=a&&a.exports===r?s.Buffer:void 0,l=(o?o.isBuffer:void 0)||n;t.exports=l},560:function(t,e,i){var s=i(239),n=i(218);t.exports=function(t){if(!n(t))return!1;var e=s(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},780:function(t){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},218:function(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},5:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},719:function(t,e,i){var s=i(749),n=i(518),r=i(167),a=r&&r.isTypedArray,o=a?n(a):s;t.exports=o},674:function(t,e,i){var s=i(636),n=i(280),r=i(612);t.exports=function(t){return r(t)?s(t):n(t)}},62:function(t){t.exports=function(){return!1}},443:function(t,e,i){"object"==typeof navigator&&(t.exports=function(){"use strict";function t(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function e(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var a={addCSS:!0,thumbWidth:15,watch:!0};function o(t,e){return function(){return Array.from(document.querySelectorAll(e)).includes(this)}.call(t,e)}var l=function(t){return null!=t?t.constructor:null},h=function(t,e){return!!(t&&e&&t instanceof e)},u=function(t){return l(t)===String},c=function(t){return Array.isArray(t)},d=function(t){return h(t,NodeList)},p=u,m=c,f=d,g=function(t){return h(t,Element)},y=function(t){return h(t,Event)},v=function(t){return function(t){return null==t}(t)||(u(t)||c(t)||d(t))&&!t.length||function(t){return l(t)===Object}(t)&&!Object.keys(t).length};var b=function(){function t(e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),g(e)?this.element=e:p(e)&&(this.element=document.querySelector(e)),g(this.element)&&v(this.element.rangeTouch)&&(this.config=r({},a,{},i),this.init())}return function(t,i,s){i&&e(t.prototype,i),s&&e(t,s)}(t,[{key:"init",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(t){var e=this,i=t?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(t){e.element[i](t,(function(t){return e.set(t)}),!1)}))}},{key:"get",value:function(e){if(!t.enabled||!y(e))return null;var i,s=e.target,n=e.changedTouches[0],r=parseFloat(s.getAttribute("min"))||0,a=parseFloat(s.getAttribute("max"))||100,o=parseFloat(s.getAttribute("step"))||1,l=s.getBoundingClientRect(),h=100/l.width*(this.config.thumbWidth/2)/100;return 0>(i=100/l.width*(n.clientX-l.left))?i=0:100<i&&(i=100),50>i?i-=(100-2*i)*h:50<i&&(i+=2*(i-50)*h),r+function(t,e){if(1>e){var i=function(t){var e="".concat(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}(e);return parseFloat(t.toFixed(i))}return Math.round(t/e)*e}(i/100*(a-r),o)}},{key:"set",value:function(e){t.enabled&&y(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),function(t,e){if(t&&e){var i=new Event(e,{bubbles:!0});t.dispatchEvent(i)}}(e.target,"touchend"===e.type?"change":"input"))}}],[{key:"setup",value:function(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=null;if(v(e)||p(e)?s=Array.from(document.querySelectorAll(p(e)?e:'input[type="range"]')):g(e)?s=[e]:f(e)?s=Array.from(e):m(e)&&(s=e.filter(g)),v(s))return null;var n=r({},a,{},i);if(p(e)&&n.watch){var l=new MutationObserver((function(i){Array.from(i).forEach((function(i){Array.from(i.addedNodes).forEach((function(i){g(i)&&o(i,e)&&new t(i,n)}))}))}));l.observe(document.body,{childList:!0,subtree:!0})}return s.map((function(e){return new t(e,i)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),t}();const _=t=>null!=t?t.constructor:null,D=(t,e)=>Boolean(t&&e&&t instanceof e),w=t=>null==t,x=t=>_(t)===Object,T=t=>_(t)===String,C=t=>_(t)===Function,E=t=>Array.isArray(t),S=t=>D(t,NodeList),k=t=>w(t)||(T(t)||E(t)||S(t))&&!t.length||x(t)&&!Object.keys(t).length;var A=w,P=x,F=t=>_(t)===Number&&!Number.isNaN(t),M=T,O=t=>_(t)===Boolean,R=C,L=E,I=S,B=t=>null!==t&&"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument,N=t=>D(t,Event),z=t=>D(t,KeyboardEvent),j=t=>D(t,TextTrack)||!w(t)&&T(t.kind),V=t=>{if(D(t,window.URL))return!0;if(!T(t))return!1;let e=t;t.startsWith("http://")&&t.startsWith("https://")||(e=`http://${t}`);try{return!k(new URL(e).hostname)}catch(t){return!1}},U=k;const W=(()=>{const t=document.createElement("span"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},i=Object.keys(e).find((e=>void 0!==t.style[e]));return!!M(i)&&e[i]})();function q(t,e){setTimeout((()=>{try{t.hidden=!0,t.offsetHeight,t.hidden=!1}catch(t){}}),e)}const H={isIE:Boolean(window.document.documentMode),isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||/(iPad|iPhone|iPod)/gi.test(navigator.platform)};function Y(t,e){return e.split(".").reduce(((t,e)=>t&&t[e]),t)}function X(t={},...e){if(!e.length)return t;const i=e.shift();return P(i)?(Object.keys(i).forEach((e=>{P(i[e])?(Object.keys(t).includes(e)||Object.assign(t,{[e]:{}}),X(t[e],i[e])):Object.assign(t,{[e]:i[e]})})),X(t,...e)):t}function $(t,e){const i=t.length?t:[t];Array.from(i).reverse().forEach(((t,i)=>{const s=i>0?e.cloneNode(!0):e,n=t.parentNode,r=t.nextSibling;s.appendChild(t),r?n.insertBefore(s,r):n.appendChild(s)}))}function G(t,e){B(t)&&!U(e)&&Object.entries(e).filter((([,t])=>!A(t))).forEach((([e,i])=>t.setAttribute(e,i)))}function Q(t,e,i){const s=document.createElement(t);return P(e)&&G(s,e),M(i)&&(s.innerText=i),s}function K(t,e,i,s){B(e)&&e.appendChild(Q(t,i,s))}function Z(t){I(t)||L(t)?Array.from(t).forEach(Z):B(t)&&B(t.parentNode)&&t.parentNode.removeChild(t)}function J(t){if(!B(t))return;let{length:e}=t.childNodes;for(;e>0;)t.removeChild(t.lastChild),e-=1}function tt(t,e){return B(e)&&B(e.parentNode)&&B(t)?(e.parentNode.replaceChild(t,e),t):null}function et(t,e){if(!M(t)||U(t))return{};const i={},s=X({},e);return t.split(",").forEach((t=>{const e=t.trim(),n=e.replace(".",""),r=e.replace(/[[\]]/g,"").split("="),[a]=r,o=r.length>1?r[1].replace(/["']/g,""):"";switch(e.charAt(0)){case".":M(s.class)?i.class=`${s.class} ${n}`:i.class=n;break;case"#":i.id=e.replace("#","");break;case"[":i[a]=o}})),X(s,i)}function it(t,e){if(!B(t))return;let i=e;O(i)||(i=!t.hidden),t.hidden=i}function st(t,e,i){if(I(t))return Array.from(t).map((t=>st(t,e,i)));if(B(t)){let s="toggle";return void 0!==i&&(s=i?"add":"remove"),t.classList[s](e),t.classList.contains(e)}return!1}function nt(t,e){return B(t)&&t.classList.contains(e)}function rt(t,e){const{prototype:i}=Element;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(t,e)}function at(t){return this.elements.container.querySelectorAll(t)}function ot(t){return this.elements.container.querySelector(t)}function lt(t=null,e=!1){B(t)&&(t.focus({preventScroll:!0}),e&&st(t,this.config.classNames.tabFocus))}const ht={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},ut={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(t,e,i){const s=H.isIPhone&&i&&ut.playsinline,n=ut[t]||"html5"!==e;return{api:n,ui:n&&ut.rangeInput&&("video"!==t||!H.isIPhone||s)}},pip:!(H.isIPhone||!R(Q("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||Q("video").disablePictureInPicture)),airplay:R(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(t){if(U(t))return!1;const[e]=t.split("/");let i=t;if(!this.isHTML5||e!==this.type)return!1;Object.keys(ht).includes(i)&&(i+=`; codecs="${ht[t]}"`);try{return Boolean(i&&this.media.canPlayType(i).replace(/no/,""))}catch(t){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const t=document.createElement("input");return t.type="range","range"===t.type})(),touch:"ontouchstart"in document.documentElement,transitions:!1!==W,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},ct=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get:()=>(t=!0,null)});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t})();function dt(t,e,i,s=!1,n=!0,r=!1){if(!t||!("addEventListener"in t)||U(e)||!R(i))return;const a=e.split(" ");let o=r;ct&&(o={passive:n,capture:r}),a.forEach((e=>{this&&this.eventListeners&&s&&this.eventListeners.push({element:t,type:e,callback:i,options:o}),t[s?"addEventListener":"removeEventListener"](e,i,o)}))}function pt(t,e="",i,s=!0,n=!1){dt.call(this,t,e,i,!0,s,n)}function mt(t,e="",i,s=!0,n=!1){dt.call(this,t,e,i,!1,s,n)}function ft(t,e="",i,s=!0,n=!1){const r=(...a)=>{mt(t,e,r,s,n),i.apply(this,a)};dt.call(this,t,e,r,!0,s,n)}function gt(t,e="",i=!1,s={}){if(!B(t)||U(e))return;const n=new CustomEvent(e,{bubbles:i,detail:{...s,plyr:this}});t.dispatchEvent(n)}function yt(){this&&this.eventListeners&&(this.eventListeners.forEach((t=>{const{element:e,type:i,callback:s,options:n}=t;e.removeEventListener(i,s,n)})),this.eventListeners=[])}function vt(){return new Promise((t=>this.ready?setTimeout(t,0):pt.call(this,this.elements.container,"ready",t))).then((()=>{}))}function bt(t){(t=>D(t,Promise)&&C(t.then))(t)&&t.then(null,(()=>{}))}function _t(t){return L(t)?t.filter(((e,i)=>t.indexOf(e)===i)):t}function Dt(t,e){return L(t)&&t.length?t.reduce(((t,i)=>Math.abs(i-e)<Math.abs(t-e)?i:t)):null}function wt(t){return!(!window||!window.CSS)&&window.CSS.supports(t)}const xt=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce(((t,[e,i])=>({...t,[e/i]:[e,i]})),{});function Tt(t){return!!(L(t)||M(t)&&t.includes(":"))&&(L(t)?t:t.split(":")).map(Number).every(F)}function Ct(t){if(!L(t)||!t.every(F))return null;const[e,i]=t,s=(t,e)=>0===e?t:s(e,t%e),n=s(e,i);return[e/n,i/n]}function Et(t){const e=t=>Tt(t)?t.split(":").map(Number):null;let i=e(t);if(null===i&&(i=e(this.config.ratio)),null===i&&!U(this.embed)&&L(this.embed.ratio)&&({ratio:i}=this.embed),null===i&&this.isHTML5){const{videoWidth:t,videoHeight:e}=this.media;i=[t,e]}return Ct(i)}function St(t){if(!this.isVideo)return{};const{wrapper:e}=this.elements,i=Et.call(this,t);if(!L(i))return{};const[s,n]=Ct(i),r=100/s*n;if(wt(`aspect-ratio: ${s}/${n}`)?e.style.aspectRatio=`${s}/${n}`:e.style.paddingBottom=`${r}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const t=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),i=(t-r)/(t/50);this.fullscreen.active?e.style.paddingBottom=null:this.media.style.transform=`translateY(-${i}%)`}else this.isHTML5&&e.classList.add(this.config.classNames.videoFixedRatio);return{padding:r,ratio:i}}function kt(t,e,i=.05){const s=t/e,n=Dt(Object.keys(xt),s);return Math.abs(n-s)<=i?xt[n]:[t,e]}const At={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((t=>{const e=t.getAttribute("type");return!!U(e)||ut.mime.call(this,e)})):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:At.getSources.call(this).map((t=>Number(t.getAttribute("size")))).filter(Boolean)},setup(){if(!this.isHTML5)return;const t=this;t.options.speed=t.config.speed.options,U(this.config.ratio)||St.call(t),Object.defineProperty(t.media,"quality",{get(){const e=At.getSources.call(t).find((e=>e.getAttribute("src")===t.source));return e&&Number(e.getAttribute("size"))},set(e){if(t.quality!==e){if(t.config.quality.forced&&R(t.config.quality.onChange))t.config.quality.onChange(e);else{const i=At.getSources.call(t).find((t=>Number(t.getAttribute("size"))===e));if(!i)return;const{currentTime:s,paused:n,preload:r,readyState:a,playbackRate:o}=t.media;t.media.src=i.getAttribute("src"),("none"!==r||a)&&(t.once("loadedmetadata",(()=>{t.speed=o,t.currentTime=s,n||bt(t.play())})),t.media.load())}gt.call(t,t.media,"qualitychange",!1,{quality:e})}}})},cancelRequests(){this.isHTML5&&(Z(At.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Pt(t,...e){return U(t)?t:t.toString().replace(/{(\d+)}/g,((t,i)=>e[i].toString()))}const Ft=(t="",e="",i="")=>t.replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),i.toString()),Mt=(t="")=>t.toString().replace(/\w\S*/g,(t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()));function Ot(t){const e=document.createElement("div");return e.appendChild(t),e.innerHTML}const Rt={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Lt={get(t="",e={}){if(U(t)||U(e))return"";let i=Y(e.i18n,t);if(U(i))return Object.keys(Rt).includes(t)?Rt[t]:"";const s={"{seektime}":e.seekTime,"{title}":e.title};return Object.entries(s).forEach((([t,e])=>{i=Ft(i,t,e)})),i}};class It{constructor(e){t(this,"get",(t=>{if(!It.supported||!this.enabled)return null;const e=window.localStorage.getItem(this.key);if(U(e))return null;const i=JSON.parse(e);return M(t)&&t.length?i[t]:i})),t(this,"set",(t=>{if(!It.supported||!this.enabled)return;if(!P(t))return;let e=this.get();U(e)&&(e={}),X(e,t);try{window.localStorage.setItem(this.key,JSON.stringify(e))}catch(t){}})),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const t="___test";return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}}}function Bt(t,e="text"){return new Promise(((i,s)=>{try{const s=new XMLHttpRequest;if(!("withCredentials"in s))return;s.addEventListener("load",(()=>{if("text"===e)try{i(JSON.parse(s.responseText))}catch(t){i(s.responseText)}else i(s.response)})),s.addEventListener("error",(()=>{throw new Error(s.status)})),s.open("GET",t,!0),s.responseType=e,s.send()}catch(t){s(t)}}))}function Nt(t,e){if(!M(t))return;const i=M(e);let s=!1;const n=()=>null!==document.getElementById(e),r=(t,e)=>{t.innerHTML=e,i&&n()||document.body.insertAdjacentElement("afterbegin",t)};if(!i||!n()){const n=It.supported,a=document.createElement("div");if(a.setAttribute("hidden",""),i&&a.setAttribute("id",e),n){const t=window.localStorage.getItem(`cache-${e}`);if(s=null!==t,s){const e=JSON.parse(t);r(a,e.content)}}Bt(t).then((t=>{if(!U(t)){if(n)try{window.localStorage.setItem(`cache-${e}`,JSON.stringify({content:t}))}catch(t){}r(a,t)}})).catch((()=>{}))}}const zt=t=>Math.trunc(t/60/60%60,10);function jt(t=0,e=!1,i=!1){if(!F(t))return jt(void 0,e,i);const s=t=>`0${t}`.slice(-2);let n=zt(t);const r=(a=t,Math.trunc(a/60%60,10));var a;const o=(t=>Math.trunc(t%60,10))(t);return n=e||n>0?`${n}:`:"",`${i&&t>0?"-":""}${n}${s(r)}:${s(o)}`}const Vt={getIconUrl(){const t=new URL(this.config.iconUrl,window.location),e=window.location.host?window.location.host:window.top.location.host,i=t.host!==e||H.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:i}},findElements(){try{return this.elements.controls=ot.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:at.call(this,this.config.selectors.buttons.play),pause:ot.call(this,this.config.selectors.buttons.pause),restart:ot.call(this,this.config.selectors.buttons.restart),rewind:ot.call(this,this.config.selectors.buttons.rewind),fastForward:ot.call(this,this.config.selectors.buttons.fastForward),mute:ot.call(this,this.config.selectors.buttons.mute),pip:ot.call(this,this.config.selectors.buttons.pip),airplay:ot.call(this,this.config.selectors.buttons.airplay),settings:ot.call(this,this.config.selectors.buttons.settings),captions:ot.call(this,this.config.selectors.buttons.captions),fullscreen:ot.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=ot.call(this,this.config.selectors.progress),this.elements.inputs={seek:ot.call(this,this.config.selectors.inputs.seek),volume:ot.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:ot.call(this,this.config.selectors.display.buffer),currentTime:ot.call(this,this.config.selectors.display.currentTime),duration:ot.call(this,this.config.selectors.display.duration)},B(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(t){return this.debug.warn("It looks like there is a problem with your custom controls HTML",t),this.toggleNativeControls(!0),!1}},createIcon(t,e){const i="http://www.w3.org/2000/svg",s=Vt.getIconUrl.call(this),n=`${s.cors?"":s.url}#${this.config.iconPrefix}`,r=document.createElementNS(i,"svg");G(r,X(e,{"aria-hidden":"true",focusable:"false"}));const a=document.createElementNS(i,"use"),o=`${n}-${t}`;return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",o),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),r.appendChild(a),r},createLabel(t,e={}){const i=Lt.get(t,this.config);return Q("span",{...e,class:[e.class,this.config.classNames.hidden].filter(Boolean).join(" ")},i)},createBadge(t){if(U(t))return null;const e=Q("span",{class:this.config.classNames.menu.value});return e.appendChild(Q("span",{class:this.config.classNames.menu.badge},t)),e},createButton(t,e){const i=X({},e);let s=function(t=""){let e=t.toString();return e=function(t=""){let e=t.toString();return e=Ft(e,"-"," "),e=Ft(e,"_"," "),e=Mt(e),Ft(e," ","")}(e),e.charAt(0).toLowerCase()+e.slice(1)}(t);const n={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((t=>{Object.keys(i).includes(t)&&(n[t]=i[t],delete i[t])})),"button"!==n.element||Object.keys(i).includes("type")||(i.type="button"),Object.keys(i).includes("class")?i.class.split(" ").some((t=>t===this.config.classNames.control))||X(i,{class:`${i.class} ${this.config.classNames.control}`}):i.class=this.config.classNames.control,t){case"play":n.toggle=!0,n.label="play",n.labelPressed="pause",n.icon="play",n.iconPressed="pause";break;case"mute":n.toggle=!0,n.label="mute",n.labelPressed="unmute",n.icon="volume",n.iconPressed="muted";break;case"captions":n.toggle=!0,n.label="enableCaptions",n.labelPressed="disableCaptions",n.icon="captions-off",n.iconPressed="captions-on";break;case"fullscreen":n.toggle=!0,n.label="enterFullscreen",n.labelPressed="exitFullscreen",n.icon="enter-fullscreen",n.iconPressed="exit-fullscreen";break;case"play-large":i.class+=` ${this.config.classNames.control}--overlaid`,s="play",n.label="play",n.icon="play";break;default:U(n.label)&&(n.label=s),U(n.icon)&&(n.icon=t)}const r=Q(n.element);return n.toggle?(r.appendChild(Vt.createIcon.call(this,n.iconPressed,{class:"icon--pressed"})),r.appendChild(Vt.createIcon.call(this,n.icon,{class:"icon--not-pressed"})),r.appendChild(Vt.createLabel.call(this,n.labelPressed,{class:"label--pressed"})),r.appendChild(Vt.createLabel.call(this,n.label,{class:"label--not-pressed"}))):(r.appendChild(Vt.createIcon.call(this,n.icon)),r.appendChild(Vt.createLabel.call(this,n.label))),X(i,et(this.config.selectors.buttons[s],i)),G(r,i),"play"===s?(L(this.elements.buttons[s])||(this.elements.buttons[s]=[]),this.elements.buttons[s].push(r)):this.elements.buttons[s]=r,r},createRange(t,e){const i=Q("input",X(et(this.config.selectors.inputs[t]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Lt.get(t,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},e));return this.elements.inputs[t]=i,Vt.updateRangeFill.call(this,i),b.setup(i),i},createProgress(t,e){const i=Q("progress",X(et(this.config.selectors.display[t]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},e));if("volume"!==t){i.appendChild(Q("span",null,"0"));const e={played:"played",buffer:"buffered"}[t],s=e?Lt.get(e,this.config):"";i.innerText=`% ${s.toLowerCase()}`}return this.elements.display[t]=i,i},createTime(t,e){const i=et(this.config.selectors.display[t],e),s=Q("div",X(i,{class:`${i.class?i.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":Lt.get(t,this.config)}),"00:00");return this.elements.display[t]=s,s},bindMenuItemShortcuts(t,e){pt.call(this,t,"keydown keyup",(i=>{if(![32,38,39,40].includes(i.which))return;if(i.preventDefault(),i.stopPropagation(),"keydown"===i.type)return;const s=rt(t,'[role="menuitemradio"]');if(!s&&[32,39].includes(i.which))Vt.showMenuPanel.call(this,e,!0);else{let e;32!==i.which&&(40===i.which||s&&39===i.which?(e=t.nextElementSibling,B(e)||(e=t.parentNode.firstElementChild)):(e=t.previousElementSibling,B(e)||(e=t.parentNode.lastElementChild)),lt.call(this,e,!0))}}),!1),pt.call(this,t,"keyup",(t=>{13===t.which&&Vt.focusFirstMenuItem.call(this,null,!0)}))},createMenuItem({value:t,list:e,type:i,title:s,badge:n=null,checked:r=!1}){const a=et(this.config.selectors.inputs[i]),o=Q("button",X(a,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${a.class?a.class:""}`.trim(),"aria-checked":r,value:t})),l=Q("span");l.innerHTML=s,B(n)&&l.appendChild(n),o.appendChild(l),Object.defineProperty(o,"checked",{enumerable:!0,get:()=>"true"===o.getAttribute("aria-checked"),set(t){t&&Array.from(o.parentNode.children).filter((t=>rt(t,'[role="menuitemradio"]'))).forEach((t=>t.setAttribute("aria-checked","false"))),o.setAttribute("aria-checked",t?"true":"false")}}),this.listeners.bind(o,"click keyup",(e=>{if(!z(e)||32===e.which){switch(e.preventDefault(),e.stopPropagation(),o.checked=!0,i){case"language":this.currentTrack=Number(t);break;case"quality":this.quality=t;break;case"speed":this.speed=parseFloat(t)}Vt.showMenuPanel.call(this,"home",z(e))}}),i,!1),Vt.bindMenuItemShortcuts.call(this,o,i),e.appendChild(o)},formatTime(t=0,e=!1){return F(t)?jt(t,zt(this.duration)>0,e):t},updateTimeDisplay(t=null,e=0,i=!1){B(t)&&F(e)&&(t.innerText=Vt.formatTime(e,i))},updateVolume(){this.supported.ui&&(B(this.elements.inputs.volume)&&Vt.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),B(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange(t,e=0){B(t)&&(t.value=e,Vt.updateRangeFill.call(this,t))},updateProgress(t){if(!this.supported.ui||!N(t))return;let e=0;const i=(t,e)=>{const i=F(e)?e:0,s=B(t)?t:this.elements.display.buffer;if(B(s)){s.value=i;const t=s.getElementsByTagName("span")[0];B(t)&&(t.childNodes[0].nodeValue=i)}};if(t)switch(t.type){case"timeupdate":case"seeking":case"seeked":s=this.currentTime,n=this.duration,e=0===s||0===n||Number.isNaN(s)||Number.isNaN(n)?0:(s/n*100).toFixed(2),"timeupdate"===t.type&&Vt.setRange.call(this,this.elements.inputs.seek,e);break;case"playing":case"progress":i(this.elements.display.buffer,100*this.buffered)}var s,n},updateRangeFill(t){const e=N(t)?t.target:t;if(B(e)&&"range"===e.getAttribute("type")){if(rt(e,this.config.selectors.inputs.seek)){e.setAttribute("aria-valuenow",this.currentTime);const t=Vt.formatTime(this.currentTime),i=Vt.formatTime(this.duration),s=Lt.get("seekLabel",this.config);e.setAttribute("aria-valuetext",s.replace("{currentTime}",t).replace("{duration}",i))}else if(rt(e,this.config.selectors.inputs.volume)){const t=100*e.value;e.setAttribute("aria-valuenow",t),e.setAttribute("aria-valuetext",`${t.toFixed(1)}%`)}else e.setAttribute("aria-valuenow",e.value);H.isWebkit&&e.style.setProperty("--value",e.value/e.max*100+"%")}},updateSeekTooltip(t){if(!this.config.tooltips.seek||!B(this.elements.inputs.seek)||!B(this.elements.display.seekTooltip)||0===this.duration)return;const e=`${this.config.classNames.tooltip}--visible`,i=t=>st(this.elements.display.seekTooltip,e,t);if(this.touch)return void i(!1);let s=0;const n=this.elements.progress.getBoundingClientRect();if(N(t))s=100/n.width*(t.pageX-n.left);else{if(!nt(this.elements.display.seekTooltip,e))return;s=parseFloat(this.elements.display.seekTooltip.style.left,10)}s<0?s=0:s>100&&(s=100),Vt.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*s),this.elements.display.seekTooltip.style.left=`${s}%`,N(t)&&["mouseenter","mouseleave"].includes(t.type)&&i("mouseenter"===t.type)},timeUpdate(t){const e=!B(this.elements.display.duration)&&this.config.invertTime;Vt.updateTimeDisplay.call(this,this.elements.display.currentTime,e?this.duration-this.currentTime:this.currentTime,e),t&&"timeupdate"===t.type&&this.media.seeking||Vt.updateProgress.call(this,t)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return it(this.elements.display.currentTime,!0),void it(this.elements.progress,!0);B(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const t=B(this.elements.display.duration);!t&&this.config.displayDuration&&this.paused&&Vt.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),t&&Vt.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),Vt.updateSeekTooltip.call(this)},toggleMenuButton(t,e){it(this.elements.settings.buttons[t],!e)},updateSetting(t,e,i){const s=this.elements.settings.panels[t];let n=null,r=e;if("captions"===t)n=this.currentTrack;else{if(n=U(i)?this[t]:i,U(n)&&(n=this.config[t].default),!U(this.options[t])&&!this.options[t].includes(n))return void this.debug.warn(`Unsupported value of '${n}' for ${t}`);if(!this.config[t].options.includes(n))return void this.debug.warn(`Disabled value of '${n}' for ${t}`)}if(B(r)||(r=s&&s.querySelector('[role="menu"]')),!B(r))return;this.elements.settings.buttons[t].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=Vt.getLabel.call(this,t,n);const a=r&&r.querySelector(`[value="${n}"]`);B(a)&&(a.checked=!0)},getLabel(t,e){switch(t){case"speed":return 1===e?Lt.get("normal",this.config):`${e}&times;`;case"quality":if(F(e)){const t=Lt.get(`qualityLabel.${e}`,this.config);return t.length?t:`${e}p`}return Mt(e);case"captions":return qt.getLabel.call(this);default:return null}},setQualityMenu(t){if(!B(this.elements.settings.panels.quality))return;const e="quality",i=this.elements.settings.panels.quality.querySelector('[role="menu"]');L(t)&&(this.options.quality=_t(t).filter((t=>this.config.quality.options.includes(t))));const s=!U(this.options.quality)&&this.options.quality.length>1;if(Vt.toggleMenuButton.call(this,e,s),J(i),Vt.checkMenu.call(this),!s)return;const n=t=>{const e=Lt.get(`qualityBadge.${t}`,this.config);return e.length?Vt.createBadge.call(this,e):null};this.options.quality.sort(((t,e)=>{const i=this.config.quality.options;return i.indexOf(t)>i.indexOf(e)?1:-1})).forEach((t=>{Vt.createMenuItem.call(this,{value:t,list:i,type:e,title:Vt.getLabel.call(this,"quality",t),badge:n(t)})})),Vt.updateSetting.call(this,e,i)},setCaptionsMenu(){if(!B(this.elements.settings.panels.captions))return;const t="captions",e=this.elements.settings.panels.captions.querySelector('[role="menu"]'),i=qt.getTracks.call(this),s=Boolean(i.length);if(Vt.toggleMenuButton.call(this,t,s),J(e),Vt.checkMenu.call(this),!s)return;const n=i.map(((t,i)=>({value:i,checked:this.captions.toggled&&this.currentTrack===i,title:qt.getLabel.call(this,t),badge:t.language&&Vt.createBadge.call(this,t.language.toUpperCase()),list:e,type:"language"})));n.unshift({value:-1,checked:!this.captions.toggled,title:Lt.get("disabled",this.config),list:e,type:"language"}),n.forEach(Vt.createMenuItem.bind(this)),Vt.updateSetting.call(this,t,e)},setSpeedMenu(){if(!B(this.elements.settings.panels.speed))return;const t="speed",e=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((t=>t>=this.minimumSpeed&&t<=this.maximumSpeed));const i=!U(this.options.speed)&&this.options.speed.length>1;Vt.toggleMenuButton.call(this,t,i),J(e),Vt.checkMenu.call(this),i&&(this.options.speed.forEach((i=>{Vt.createMenuItem.call(this,{value:i,list:e,type:t,title:Vt.getLabel.call(this,"speed",i)})})),Vt.updateSetting.call(this,t,e))},checkMenu(){const{buttons:t}=this.elements.settings,e=!U(t)&&Object.values(t).some((t=>!t.hidden));it(this.elements.settings.menu,!e)},focusFirstMenuItem(t,e=!1){if(this.elements.settings.popup.hidden)return;let i=t;B(i)||(i=Object.values(this.elements.settings.panels).find((t=>!t.hidden)));const s=i.querySelector('[role^="menuitem"]');lt.call(this,s,e)},toggleMenu(t){const{popup:e}=this.elements.settings,i=this.elements.buttons.settings;if(!B(e)||!B(i))return;const{hidden:s}=e;let n=s;if(O(t))n=t;else if(z(t)&&27===t.which)n=!1;else if(N(t)){const s=R(t.composedPath)?t.composedPath()[0]:t.target,r=e.contains(s);if(r||!r&&t.target!==i&&n)return}i.setAttribute("aria-expanded",n),it(e,!n),st(this.elements.container,this.config.classNames.menu.open,n),n&&z(t)?Vt.focusFirstMenuItem.call(this,null,!0):n||s||lt.call(this,i,z(t))},getMenuSize(t){const e=t.cloneNode(!0);e.style.position="absolute",e.style.opacity=0,e.removeAttribute("hidden"),t.parentNode.appendChild(e);const i=e.scrollWidth,s=e.scrollHeight;return Z(e),{width:i,height:s}},showMenuPanel(t="",e=!1){const i=this.elements.container.querySelector(`#plyr-settings-${this.id}-${t}`);if(!B(i))return;const s=i.parentNode,n=Array.from(s.children).find((t=>!t.hidden));if(ut.transitions&&!ut.reducedMotion){s.style.width=`${n.scrollWidth}px`,s.style.height=`${n.scrollHeight}px`;const t=Vt.getMenuSize.call(this,i),e=t=>{t.target===s&&["width","height"].includes(t.propertyName)&&(s.style.width="",s.style.height="",mt.call(this,s,W,e))};pt.call(this,s,W,e),s.style.width=`${t.width}px`,s.style.height=`${t.height}px`}it(n,!0),it(i,!1),Vt.focusFirstMenuItem.call(this,i,e)},setDownloadUrl(){const t=this.elements.buttons.download;B(t)&&t.setAttribute("href",this.download)},create(t){const{bindMenuItemShortcuts:e,createButton:i,createProgress:s,createRange:n,createTime:r,setQualityMenu:a,setSpeedMenu:o,showMenuPanel:l}=Vt;this.elements.controls=null,L(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(i.call(this,"play-large"));const h=Q("div",et(this.config.selectors.controls.wrapper));this.elements.controls=h;const u={class:"plyr__controls__item"};return _t(L(this.config.controls)?this.config.controls:[]).forEach((a=>{if("restart"===a&&h.appendChild(i.call(this,"restart",u)),"rewind"===a&&h.appendChild(i.call(this,"rewind",u)),"play"===a&&h.appendChild(i.call(this,"play",u)),"fast-forward"===a&&h.appendChild(i.call(this,"fast-forward",u)),"progress"===a){const e=Q("div",{class:`${u.class} plyr__progress__container`}),i=Q("div",et(this.config.selectors.progress));if(i.appendChild(n.call(this,"seek",{id:`plyr-seek-${t.id}`})),i.appendChild(s.call(this,"buffer")),this.config.tooltips.seek){const t=Q("span",{class:this.config.classNames.tooltip},"00:00");i.appendChild(t),this.elements.display.seekTooltip=t}this.elements.progress=i,e.appendChild(this.elements.progress),h.appendChild(e)}if("current-time"===a&&h.appendChild(r.call(this,"currentTime",u)),"duration"===a&&h.appendChild(r.call(this,"duration",u)),"mute"===a||"volume"===a){let{volume:e}=this.elements;if(B(e)&&h.contains(e)||(e=Q("div",X({},u,{class:`${u.class} plyr__volume`.trim()})),this.elements.volume=e,h.appendChild(e)),"mute"===a&&e.appendChild(i.call(this,"mute")),"volume"===a&&!H.isIos){const i={max:1,step:.05,value:this.config.volume};e.appendChild(n.call(this,"volume",X(i,{id:`plyr-volume-${t.id}`})))}}if("captions"===a&&h.appendChild(i.call(this,"captions",u)),"settings"===a&&!U(this.config.settings)){const s=Q("div",X({},u,{class:`${u.class} plyr__menu`.trim(),hidden:""}));s.appendChild(i.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${t.id}`,"aria-expanded":!1}));const n=Q("div",{class:"plyr__menu__container",id:`plyr-settings-${t.id}`,hidden:""}),r=Q("div"),a=Q("div",{id:`plyr-settings-${t.id}-home`}),o=Q("div",{role:"menu"});a.appendChild(o),r.appendChild(a),this.elements.settings.panels.home=a,this.config.settings.forEach((i=>{const s=Q("button",X(et(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));e.call(this,s,i),pt.call(this,s,"click",(()=>{l.call(this,i,!1)}));const n=Q("span",null,Lt.get(i,this.config)),a=Q("span",{class:this.config.classNames.menu.value});a.innerHTML=t[i],n.appendChild(a),s.appendChild(n),o.appendChild(s);const h=Q("div",{id:`plyr-settings-${t.id}-${i}`,hidden:""}),u=Q("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});u.appendChild(Q("span",{"aria-hidden":!0},Lt.get(i,this.config))),u.appendChild(Q("span",{class:this.config.classNames.hidden},Lt.get("menuBack",this.config))),pt.call(this,h,"keydown",(t=>{37===t.which&&(t.preventDefault(),t.stopPropagation(),l.call(this,"home",!0))}),!1),pt.call(this,u,"click",(()=>{l.call(this,"home",!1)})),h.appendChild(u),h.appendChild(Q("div",{role:"menu"})),r.appendChild(h),this.elements.settings.buttons[i]=s,this.elements.settings.panels[i]=h})),n.appendChild(r),s.appendChild(n),h.appendChild(s),this.elements.settings.popup=n,this.elements.settings.menu=s}if("pip"===a&&ut.pip&&h.appendChild(i.call(this,"pip",u)),"airplay"===a&&ut.airplay&&h.appendChild(i.call(this,"airplay",u)),"download"===a){const t=X({},u,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(t.download="");const{download:e}=this.config.urls;!V(e)&&this.isEmbed&&X(t,{icon:`logo-${this.provider}`,label:this.provider}),h.appendChild(i.call(this,"download",t))}"fullscreen"===a&&h.appendChild(i.call(this,"fullscreen",u))})),this.isHTML5&&a.call(this,At.getQualityOptions.call(this)),o.call(this),h},inject(){if(this.config.loadSprite){const t=Vt.getIconUrl.call(this);t.cors&&Nt(t.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let t=null;this.elements.controls=null;const e={id:this.id,seektime:this.config.seekTime,title:this.config.title};let i,s=!0;if(R(this.config.controls)&&(this.config.controls=this.config.controls.call(this,e)),this.config.controls||(this.config.controls=[]),B(this.config.controls)||M(this.config.controls)?t=this.config.controls:(t=Vt.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:qt.getLabel.call(this)}),s=!1),s&&M(this.config.controls)&&(t=(t=>{let i=t;return Object.entries(e).forEach((([t,e])=>{i=Ft(i,`{${t}}`,e)})),i})(t)),M(this.config.selectors.controls.container)&&(i=document.querySelector(this.config.selectors.controls.container)),B(i)||(i=this.elements.container),i[B(t)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",t),B(this.elements.controls)||Vt.findElements.call(this),!U(this.elements.buttons)){const t=t=>{const e=this.config.classNames.controlPressed;Object.defineProperty(t,"pressed",{enumerable:!0,get:()=>nt(t,e),set(i=!1){st(t,e,i)}})};Object.values(this.elements.buttons).filter(Boolean).forEach((e=>{L(e)||I(e)?Array.from(e).filter(Boolean).forEach(t):t(e)}))}if(H.isEdge&&q(i),this.config.tooltips.controls){const{classNames:t,selectors:e}=this.config,i=`${e.controls.wrapper} ${e.labels} .${t.hidden}`,s=at.call(this,i);Array.from(s).forEach((t=>{st(t,this.config.classNames.hidden,!1),st(t,this.config.classNames.tooltip,!0)}))}}};function Ut(t,e=!0){let i=t;if(e){const t=document.createElement("a");t.href=i,i=t.href}try{return new URL(i)}catch(t){return null}}function Wt(t){const e=new URLSearchParams;return P(t)&&Object.entries(t).forEach((([t,i])=>{e.set(t,i)})),e}const qt={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!ut.textTracks)return void(L(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Vt.setCaptionsMenu.call(this));var t,e;if(B(this.elements.captions)||(this.elements.captions=Q("div",et(this.config.selectors.captions)),t=this.elements.captions,e=this.elements.wrapper,B(t)&&B(e)&&e.parentNode.insertBefore(t,e.nextSibling)),H.isIE&&window.URL){const t=this.media.querySelectorAll("track");Array.from(t).forEach((t=>{const e=t.getAttribute("src"),i=Ut(e);null!==i&&i.hostname!==window.location.href.hostname&&["http:","https:"].includes(i.protocol)&&Bt(e,"blob").then((e=>{t.setAttribute("src",window.URL.createObjectURL(e))})).catch((()=>{Z(t)}))}))}const i=_t((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((t=>t.split("-")[0])));let s=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===s&&([s]=i);let n=this.storage.get("captions");if(O(n)||({active:n}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:n,language:s,languages:i}),this.isHTML5){const t=this.config.captions.update?"addtrack removetrack":"removetrack";pt.call(this,this.media.textTracks,t,qt.update.bind(this))}setTimeout(qt.update.bind(this),0)},update(){const t=qt.getTracks.call(this,!0),{active:e,language:i,meta:s,currentTrackNode:n}=this.captions,r=Boolean(t.find((t=>t.language===i)));this.isHTML5&&this.isVideo&&t.filter((t=>!s.get(t))).forEach((t=>{this.debug.log("Track added",t),s.set(t,{default:"showing"===t.mode}),"showing"===t.mode&&(t.mode="hidden"),pt.call(this,t,"cuechange",(()=>qt.updateCues.call(this)))})),(r&&this.language!==i||!t.includes(n))&&(qt.setLanguage.call(this,i),qt.toggle.call(this,e&&r)),this.elements&&st(this.elements.container,this.config.classNames.captions.enabled,!U(t)),L(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Vt.setCaptionsMenu.call(this)},toggle(t,e=!0){if(!this.supported.ui)return;const{toggled:i}=this.captions,s=this.config.classNames.captions.active,n=A(t)?!i:t;if(n!==i){if(e||(this.captions.active=n,this.storage.set({captions:n})),!this.language&&n&&!e){const t=qt.getTracks.call(this),e=qt.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=e.language,void qt.set.call(this,t.indexOf(e))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=n),st(this.elements.container,s,n),this.captions.toggled=n,Vt.updateSetting.call(this,"captions"),gt.call(this,this.media,n?"captionsenabled":"captionsdisabled")}setTimeout((()=>{n&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")}))},set(t,e=!0){const i=qt.getTracks.call(this);if(-1!==t)if(F(t))if(t in i){if(this.captions.currentTrack!==t){this.captions.currentTrack=t;const s=i[t],{language:n}=s||{};this.captions.currentTrackNode=s,Vt.updateSetting.call(this,"captions"),e||(this.captions.language=n,this.storage.set({language:n})),this.isVimeo&&this.embed.enableTextTrack(n),gt.call(this,this.media,"languagechange")}qt.toggle.call(this,!0,e),this.isHTML5&&this.isVideo&&qt.updateCues.call(this)}else this.debug.warn("Track not found",t);else this.debug.warn("Invalid caption argument",t);else qt.toggle.call(this,!1,e)},setLanguage(t,e=!0){if(!M(t))return void this.debug.warn("Invalid language argument",t);const i=t.toLowerCase();this.captions.language=i;const s=qt.getTracks.call(this),n=qt.findTrack.call(this,[i]);qt.set.call(this,s.indexOf(n),e)},getTracks(t=!1){return Array.from((this.media||{}).textTracks||[]).filter((e=>!this.isHTML5||t||this.captions.meta.has(e))).filter((t=>["captions","subtitles"].includes(t.kind)))},findTrack(t,e=!1){const i=qt.getTracks.call(this),s=t=>Number((this.captions.meta.get(t)||{}).default),n=Array.from(i).sort(((t,e)=>s(e)-s(t)));let r;return t.every((t=>(r=n.find((e=>e.language===t)),!r))),r||(e?n[0]:void 0)},getCurrentTrack(){return qt.getTracks.call(this)[this.currentTrack]},getLabel(t){let e=t;return!j(e)&&ut.textTracks&&this.captions.toggled&&(e=qt.getCurrentTrack.call(this)),j(e)?U(e.label)?U(e.language)?Lt.get("enabled",this.config):t.language.toUpperCase():e.label:Lt.get("disabled",this.config)},updateCues(t){if(!this.supported.ui)return;if(!B(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!A(t)&&!Array.isArray(t))return void this.debug.warn("updateCues: Invalid input",t);let e=t;if(!e){const t=qt.getCurrentTrack.call(this);e=Array.from((t||{}).activeCues||[]).map((t=>t.getCueAsHTML())).map(Ot)}const i=e.map((t=>t.trim())).join("\n");if(i!==this.elements.captions.innerHTML){J(this.elements.captions);const t=Q("span",et(this.config.selectors.caption));t.innerHTML=i,this.elements.captions.appendChild(t),gt.call(this,this.media,"cuechange")}}},Ht={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.6.12/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1}},Yt="picture-in-picture",Xt={html5:"html5",youtube:"youtube",vimeo:"vimeo"},$t="video",Gt=()=>{};class Qt{constructor(t=!1){this.enabled=window.console&&t,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):Gt}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):Gt}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):Gt}}class Kt{constructor(e){t(this,"onChange",(()=>{if(!this.enabled)return;const t=this.player.elements.buttons.fullscreen;B(t)&&(t.pressed=this.active);const e=this.target===this.player.media?this.target:this.player.elements.container;gt.call(this.player,e,this.active?"enterfullscreen":"exitfullscreen",!0)})),t(this,"toggleFallback",((t=!1)=>{if(t?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=t?"hidden":"",st(this.target,this.player.config.classNames.fullscreen.fallback,t),H.isIos){let e=document.head.querySelector('meta[name="viewport"]');const i="viewport-fit=cover";e||(e=document.createElement("meta"),e.setAttribute("name","viewport"));const s=M(e.content)&&e.content.includes(i);t?(this.cleanupViewport=!s,s||(e.content+=`,${i}`)):this.cleanupViewport&&(e.content=e.content.split(",").filter((t=>t.trim()!==i)).join(","))}this.onChange()})),t(this,"trapFocus",(t=>{if(H.isIos||!this.active||"Tab"!==t.key||9!==t.keyCode)return;const e=document.activeElement,i=at.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[s]=i,n=i[i.length-1];e!==n||t.shiftKey?e===s&&t.shiftKey&&(n.focus(),t.preventDefault()):(s.focus(),t.preventDefault())})),t(this,"update",(()=>{if(this.enabled){let t;t=this.forceFallback?"Fallback (forced)":Kt.native?"Native":"Fallback",this.player.debug.log(`${t} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");st(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)})),t(this,"enter",(()=>{this.enabled&&(H.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Kt.native||this.forceFallback?this.toggleFallback(!0):this.prefix?U(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))})),t(this,"exit",(()=>{if(this.enabled)if(H.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),bt(this.player.play());else if(!Kt.native||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!U(this.prefix)){const t="moz"===this.prefix?"Cancel":"Exit";document[`${this.prefix}${t}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)})),t(this,"toggle",(()=>{this.active?this.exit():this.enter()})),this.player=e,this.prefix=Kt.prefix,this.property=Kt.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===e.config.fullscreen.fallback,this.player.elements.fullscreen=e.config.fullscreen.container&&function(t,e){const{prototype:i}=Element;return(i.closest||function(){let t=this;do{if(rt.matches(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}).call(t,e)}(this.player.elements.container,e.config.fullscreen.container),pt.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":`${this.prefix}fullscreenchange`,(()=>{this.onChange()})),pt.call(this.player,this.player.elements.container,"dblclick",(t=>{B(this.player.elements.controls)&&this.player.elements.controls.contains(t.target)||this.player.listeners.proxy(t,this.toggle,"fullscreen")})),pt.call(this,this.player.elements.container,"keydown",(t=>this.trapFocus(t))),this.update()}static get native(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get usingNative(){return Kt.native&&!this.forceFallback}static get prefix(){if(R(document.exitFullscreen))return"";let t="";return["webkit","moz","ms"].some((e=>!(!R(document[`${e}ExitFullscreen`])&&!R(document[`${e}CancelFullScreen`])||(t=e,0)))),t}static get property(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}get enabled(){return(Kt.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}get active(){if(!this.enabled)return!1;if(!Kt.native||this.forceFallback)return nt(this.target,this.player.config.classNames.fullscreen.fallback);const t=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return t&&t.shadowRoot?t===this.target.getRootNode().host:t===this.target}get target(){return H.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}function Zt(t,e=1){return new Promise(((i,s)=>{const n=new Image,r=()=>{delete n.onload,delete n.onerror,(n.naturalWidth>=e?i:s)(n)};Object.assign(n,{onload:r,onerror:r,src:t})}))}const Jt={addStyleHook(){st(this.elements.container,this.config.selectors.container.replace(".",""),!0),st(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(t=!1){t&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void Jt.toggleNativeControls.call(this,!0);B(this.elements.controls)||(Vt.inject.call(this),this.listeners.controls()),Jt.toggleNativeControls.call(this),this.isHTML5&&qt.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Vt.updateVolume.call(this),Vt.timeUpdate.call(this),Vt.durationUpdate.call(this),Jt.checkPlaying.call(this),st(this.elements.container,this.config.classNames.pip.supported,ut.pip&&this.isHTML5&&this.isVideo),st(this.elements.container,this.config.classNames.airplay.supported,ut.airplay&&this.isHTML5),st(this.elements.container,this.config.classNames.isIos,H.isIos),st(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((()=>{gt.call(this,this.media,"ready")}),0),Jt.setTitle.call(this),this.poster&&Jt.setPoster.call(this,this.poster,!1).catch((()=>{})),this.config.duration&&Vt.durationUpdate.call(this)},setTitle(){let t=Lt.get("play",this.config);if(M(this.config.title)&&!U(this.config.title)&&(t+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach((e=>{e.setAttribute("aria-label",t)})),this.isEmbed){const t=ot.call(this,"iframe");if(!B(t))return;const e=U(this.config.title)?"video":this.config.title,i=Lt.get("frameTitle",this.config);t.setAttribute("title",i.replace("{title}",e))}},togglePoster(t){st(this.elements.container,this.config.classNames.posterEnabled,t)},setPoster(t,e=!0){return e&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",t),this.elements.poster.removeAttribute("hidden"),vt.call(this).then((()=>Zt(t))).catch((e=>{throw t===this.poster&&Jt.togglePoster.call(this,!1),e})).then((()=>{if(t!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${t}')`,backgroundSize:""}),Jt.togglePoster.call(this,!0),t))))},checkPlaying(t){st(this.elements.container,this.config.classNames.playing,this.playing),st(this.elements.container,this.config.classNames.paused,this.paused),st(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((t=>{Object.assign(t,{pressed:this.playing}),t.setAttribute("aria-label",Lt.get(this.playing?"pause":"play",this.config))})),N(t)&&"timeupdate"===t.type||Jt.toggleControls.call(this)},checkLoading(t){this.loading=["stalled","waiting"].includes(t.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((()=>{st(this.elements.container,this.config.classNames.loading,this.loading),Jt.toggleControls.call(this)}),this.loading?250:0)},toggleControls(t){const{controls:e}=this.elements;if(e&&this.config.hideControls){const i=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(t||this.loading||this.paused||e.pressed||e.hover||i))}},migrateStyles(){Object.values({...this.media.style}).filter((t=>!U(t)&&M(t)&&t.startsWith("--plyr"))).forEach((t=>{this.elements.container.style.setProperty(t,this.media.style.getPropertyValue(t)),this.media.style.removeProperty(t)})),U(this.media.style)&&this.media.removeAttribute("style")}};class te{constructor(e){t(this,"firstTouch",(()=>{const{player:t}=this,{elements:e}=t;t.touch=!0,st(e.container,t.config.classNames.isTouch,!0)})),t(this,"setTabFocus",(t=>{const{player:e}=this,{elements:i}=e;if(clearTimeout(this.focusTimer),"keydown"===t.type&&9!==t.which)return;"keydown"===t.type&&(this.lastKeyDown=t.timeStamp);const s=t.timeStamp-this.lastKeyDown<=20;("focus"!==t.type||s)&&((()=>{const t=e.config.classNames.tabFocus;st(at.call(e,`.${t}`),t,!1)})(),"focusout"!==t.type&&(this.focusTimer=setTimeout((()=>{const t=document.activeElement;i.container.contains(t)&&st(document.activeElement,e.config.classNames.tabFocus,!0)}),10)))})),t(this,"global",((t=!0)=>{const{player:e}=this;e.config.keyboard.global&&dt.call(e,window,"keydown keyup",this.handleKey,t,!1),dt.call(e,document.body,"click",this.toggleMenu,t),ft.call(e,document.body,"touchstart",this.firstTouch),dt.call(e,document.body,"keydown focus blur focusout",this.setTabFocus,t,!1,!0)})),t(this,"container",(()=>{const{player:t}=this,{config:e,elements:i,timers:s}=t;!e.keyboard.global&&e.keyboard.focused&&pt.call(t,i.container,"keydown keyup",this.handleKey,!1),pt.call(t,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(e=>{const{controls:n}=i;n&&"enterfullscreen"===e.type&&(n.pressed=!1,n.hover=!1);let r=0;["touchstart","touchmove","mousemove"].includes(e.type)&&(Jt.toggleControls.call(t,!0),r=t.touch?3e3:2e3),clearTimeout(s.controls),s.controls=setTimeout((()=>Jt.toggleControls.call(t,!1)),r)}));const n=()=>{if(!t.isVimeo||t.config.vimeo.premium)return;const e=i.wrapper,{active:s}=t.fullscreen,[n,r]=Et.call(t),a=wt(`aspect-ratio: ${n} / ${r}`);if(!s)return void(a?(e.style.width=null,e.style.height=null):(e.style.maxWidth=null,e.style.margin=null));const[o,l]=[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)],h=o/l>n/r;a?(e.style.width=h?"auto":"100%",e.style.height=h?"100%":"auto"):(e.style.maxWidth=h?l/r*n+"px":null,e.style.margin=h?"0 auto":null)},r=()=>{clearTimeout(s.resized),s.resized=setTimeout(n,50)};pt.call(t,i.container,"enterfullscreen exitfullscreen",(e=>{const{target:s}=t.fullscreen;s===i.container&&(!t.isEmbed&&U(t.config.ratio)||(n(),("enterfullscreen"===e.type?pt:mt).call(t,window,"resize",r)))}))})),t(this,"media",(()=>{const{player:t}=this,{elements:e}=t;if(pt.call(t,t.media,"timeupdate seeking seeked",(e=>Vt.timeUpdate.call(t,e))),pt.call(t,t.media,"durationchange loadeddata loadedmetadata",(e=>Vt.durationUpdate.call(t,e))),pt.call(t,t.media,"ended",(()=>{t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())})),pt.call(t,t.media,"progress playing seeking seeked",(e=>Vt.updateProgress.call(t,e))),pt.call(t,t.media,"volumechange",(e=>Vt.updateVolume.call(t,e))),pt.call(t,t.media,"playing play pause ended emptied timeupdate",(e=>Jt.checkPlaying.call(t,e))),pt.call(t,t.media,"waiting canplay seeked playing",(e=>Jt.checkLoading.call(t,e))),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){const i=ot.call(t,`.${t.config.classNames.video}`);if(!B(i))return;pt.call(t,e.container,"click",(s=>{([e.container,i].includes(s.target)||i.contains(s.target))&&(t.touch&&t.config.hideControls||(t.ended?(this.proxy(s,t.restart,"restart"),this.proxy(s,(()=>{bt(t.play())}),"play")):this.proxy(s,(()=>{bt(t.togglePlay())}),"play")))}))}t.supported.ui&&t.config.disableContextMenu&&pt.call(t,e.wrapper,"contextmenu",(t=>{t.preventDefault()}),!1),pt.call(t,t.media,"volumechange",(()=>{t.storage.set({volume:t.volume,muted:t.muted})})),pt.call(t,t.media,"ratechange",(()=>{Vt.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})})),pt.call(t,t.media,"qualitychange",(e=>{Vt.updateSetting.call(t,"quality",null,e.detail.quality)})),pt.call(t,t.media,"ready qualitychange",(()=>{Vt.setDownloadUrl.call(t)}));const i=t.config.events.concat(["keyup","keydown"]).join(" ");pt.call(t,t.media,i,(i=>{let{detail:s={}}=i;"error"===i.type&&(s=t.media.error),gt.call(t,e.container,i.type,!0,s)}))})),t(this,"proxy",((t,e,i)=>{const{player:s}=this,n=s.config.listeners[i];let r=!0;R(n)&&(r=n.call(s,t)),!1!==r&&R(e)&&e.call(s,t)})),t(this,"bind",((t,e,i,s,n=!0)=>{const{player:r}=this,a=r.config.listeners[s],o=R(a);pt.call(r,t,e,(t=>this.proxy(t,i,s)),n&&!o)})),t(this,"controls",(()=>{const{player:t}=this,{elements:e}=t,i=H.isIE?"change":"input";if(e.buttons.play&&Array.from(e.buttons.play).forEach((e=>{this.bind(e,"click",(()=>{bt(t.togglePlay())}),"play")})),this.bind(e.buttons.restart,"click",t.restart,"restart"),this.bind(e.buttons.rewind,"click",(()=>{t.lastSeekTime=Date.now(),t.rewind()}),"rewind"),this.bind(e.buttons.fastForward,"click",(()=>{t.lastSeekTime=Date.now(),t.forward()}),"fastForward"),this.bind(e.buttons.mute,"click",(()=>{t.muted=!t.muted}),"mute"),this.bind(e.buttons.captions,"click",(()=>t.toggleCaptions())),this.bind(e.buttons.download,"click",(()=>{gt.call(t,t.media,"download")}),"download"),this.bind(e.buttons.fullscreen,"click",(()=>{t.fullscreen.toggle()}),"fullscreen"),this.bind(e.buttons.pip,"click",(()=>{t.pip="toggle"}),"pip"),this.bind(e.buttons.airplay,"click",t.airplay,"airplay"),this.bind(e.buttons.settings,"click",(e=>{e.stopPropagation(),e.preventDefault(),Vt.toggleMenu.call(t,e)}),null,!1),this.bind(e.buttons.settings,"keyup",(e=>{const i=e.which;[13,32].includes(i)&&(13!==i?(e.preventDefault(),e.stopPropagation(),Vt.toggleMenu.call(t,e)):Vt.focusFirstMenuItem.call(t,null,!0))}),null,!1),this.bind(e.settings.menu,"keydown",(e=>{27===e.which&&Vt.toggleMenu.call(t,e)})),this.bind(e.inputs.seek,"mousedown mousemove",(t=>{const i=e.progress.getBoundingClientRect(),s=100/i.width*(t.pageX-i.left);t.currentTarget.setAttribute("seek-value",s)})),this.bind(e.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(e=>{const i=e.currentTarget,s=e.keyCode?e.keyCode:e.which,n="play-on-seeked";if(z(e)&&39!==s&&37!==s)return;t.lastSeekTime=Date.now();const r=i.hasAttribute(n),a=["mouseup","touchend","keyup"].includes(e.type);r&&a?(i.removeAttribute(n),bt(t.play())):!a&&t.playing&&(i.setAttribute(n,""),t.pause())})),H.isIos){const e=at.call(t,'input[type="range"]');Array.from(e).forEach((t=>this.bind(t,i,(t=>q(t.target)))))}this.bind(e.inputs.seek,i,(e=>{const i=e.currentTarget;let s=i.getAttribute("seek-value");U(s)&&(s=i.value),i.removeAttribute("seek-value"),t.currentTime=s/i.max*t.duration}),"seek"),this.bind(e.progress,"mouseenter mouseleave mousemove",(e=>Vt.updateSeekTooltip.call(t,e))),this.bind(e.progress,"mousemove touchmove",(e=>{const{previewThumbnails:i}=t;i&&i.loaded&&i.startMove(e)})),this.bind(e.progress,"mouseleave touchend click",(()=>{const{previewThumbnails:e}=t;e&&e.loaded&&e.endMove(!1,!0)})),this.bind(e.progress,"mousedown touchstart",(e=>{const{previewThumbnails:i}=t;i&&i.loaded&&i.startScrubbing(e)})),this.bind(e.progress,"mouseup touchend",(e=>{const{previewThumbnails:i}=t;i&&i.loaded&&i.endScrubbing(e)})),H.isWebkit&&Array.from(at.call(t,'input[type="range"]')).forEach((e=>{this.bind(e,"input",(e=>Vt.updateRangeFill.call(t,e.target)))})),t.config.toggleInvert&&!B(e.display.duration)&&this.bind(e.display.currentTime,"click",(()=>{0!==t.currentTime&&(t.config.invertTime=!t.config.invertTime,Vt.timeUpdate.call(t))})),this.bind(e.inputs.volume,i,(e=>{t.volume=e.target.value}),"volume"),this.bind(e.controls,"mouseenter mouseleave",(i=>{e.controls.hover=!t.touch&&"mouseenter"===i.type})),e.fullscreen&&Array.from(e.fullscreen.children).filter((t=>!t.contains(e.container))).forEach((i=>{this.bind(i,"mouseenter mouseleave",(i=>{e.controls&&(e.controls.hover=!t.touch&&"mouseenter"===i.type)}))})),this.bind(e.controls,"mousedown mouseup touchstart touchend touchcancel",(t=>{e.controls.pressed=["mousedown","touchstart"].includes(t.type)})),this.bind(e.controls,"focusin",(()=>{const{config:i,timers:s}=t;st(e.controls,i.classNames.noTransition,!0),Jt.toggleControls.call(t,!0),setTimeout((()=>{st(e.controls,i.classNames.noTransition,!1)}),0);const n=this.touch?3e3:4e3;clearTimeout(s.controls),s.controls=setTimeout((()=>Jt.toggleControls.call(t,!1)),n)})),this.bind(e.inputs.volume,"wheel",(e=>{const i=e.webkitDirectionInvertedFromDevice,[s,n]=[e.deltaX,-e.deltaY].map((t=>i?-t:t)),r=Math.sign(Math.abs(s)>Math.abs(n)?s:n);t.increaseVolume(r/50);const{volume:a}=t.media;(1===r&&a<1||-1===r&&a>0)&&e.preventDefault()}),"volume",!1)})),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(t){const{player:e}=this,{elements:i}=e,s=t.keyCode?t.keyCode:t.which,n="keydown"===t.type,r=n&&s===this.lastKey;if(!(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)&&F(s))if(n){const n=document.activeElement;if(B(n)){const{editable:s}=e.config.selectors,{seek:r}=i.inputs;if(n!==r&&rt(n,s))return;if(32===t.which&&rt(n,'button, [role^="menuitem"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(s)&&(t.preventDefault(),t.stopPropagation()),s){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:r||(e.currentTime=e.duration/10*(s-48));break;case 32:case 75:r||bt(e.togglePlay());break;case 38:e.increaseVolume(.1);break;case 40:e.decreaseVolume(.1);break;case 77:r||(e.muted=!e.muted);break;case 39:e.forward();break;case 37:e.rewind();break;case 70:e.fullscreen.toggle();break;case 67:r||e.toggleCaptions();break;case 76:e.loop=!e.loop}27===s&&!e.fullscreen.usingNative&&e.fullscreen.active&&e.fullscreen.toggle(),this.lastKey=s}else this.lastKey=null}toggleMenu(t){Vt.toggleMenu.call(this.player,t)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self&&self;var ee=function(t,e){return function(t,e){t.exports=function(){var t=function(){},e={},i={},s={};function n(t,e){t=t.push?t:[t];var n,r,a,o=[],l=t.length,h=l;for(n=function(t,i){i.length&&o.push(t),--h||e(o)};l--;)r=t[l],(a=i[r])?n(r,a):(s[r]=s[r]||[]).push(n)}function r(t,e){if(t){var n=s[t];if(i[t]=e,n)for(;n.length;)n[0](t,e),n.splice(0,1)}}function a(e,i){e.call&&(e={success:e}),i.length?(e.error||t)(i):(e.success||t)(e)}function o(e,i,s,n){var r,a,l=document,h=s.async,u=(s.numRetries||0)+1,c=s.before||t,d=e.replace(/[\?|#].*$/,""),p=e.replace(/^(css|img)!/,"");n=n||0,/(^css!|\.css$)/.test(d)?((a=l.createElement("link")).rel="stylesheet",a.href=p,(r="hideFocus"in a)&&a.relList&&(r=0,a.rel="preload",a.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(d)?(a=l.createElement("img")).src=p:((a=l.createElement("script")).src=e,a.async=void 0===h||h),a.onload=a.onerror=a.onbeforeload=function(t){var l=t.type[0];if(r)try{a.sheet.cssText.length||(l="e")}catch(t){18!=t.code&&(l="e")}if("e"==l){if((n+=1)<u)return o(e,i,s,n)}else if("preload"==a.rel&&"style"==a.as)return a.rel="stylesheet";i(e,l,t.defaultPrevented)},!1!==c(e,a)&&l.head.appendChild(a)}function l(t,e,i){var s,n,r=(t=t.push?t:[t]).length,a=r,l=[];for(s=function(t,i,s){if("e"==i&&l.push(t),"b"==i){if(!s)return;l.push(t)}--r||e(l)},n=0;n<a;n++)o(t[n],s,i)}function h(t,i,s){var n,o;if(i&&i.trim&&(n=i),o=(n?s:i)||{},n){if(n in e)throw"LoadJS";e[n]=!0}function h(e,i){l(t,(function(t){a(o,t),e&&a({success:e,error:i},t),r(n,t)}),o)}if(o.returnPromise)return new Promise(h);h()}return h.ready=function(t,e){return n(t,(function(t){a(e,t)})),h},h.done=function(t){r(t,[])},h.reset=function(){e={},i={},s={}},h.isDefined=function(t){return t in e},h}()}(e={exports:{}}),e.exports}();function ie(t){return new Promise(((e,i)=>{ee(t,{success:e,error:i})}))}function se(t){t&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===t&&(this.media.paused=!t,gt.call(this,this.media,t?"play":"pause"))}const ne={setup(){const t=this;st(t.elements.wrapper,t.config.classNames.embed,!0),t.options.speed=t.config.speed.options,St.call(t),P(window.Vimeo)?ne.ready.call(t):ie(t.config.urls.vimeo.sdk).then((()=>{ne.ready.call(t)})).catch((e=>{t.debug.warn("Vimeo SDK (player.js) failed to load",e)}))},ready(){const t=this,e=t.config.vimeo,{premium:i,referrerPolicy:s,...n}=e;let r=t.media.getAttribute("src"),a="";U(r)?(r=t.media.getAttribute(t.config.attributes.embed.id),a=t.media.getAttribute(t.config.attributes.embed.hash)):a=function(t){const e=t.match(/^.*(?:vimeo.com\/|video\/)(?:\d+)(?:\?.*&*h=|\/)+(?<hash>[\d,a-f]+)/);return e?e.groups.hash:null}(r);const o=a?{h:a}:{};i&&Object.assign(n,{controls:!1,sidedock:!1});const l=Wt({loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative,...o,...n}),h=U(u=r)?null:F(Number(u))?u:u.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:u;var u;const c=Q("iframe"),d=Pt(t.config.urls.vimeo.iframe,h,l);if(c.setAttribute("src",d),c.setAttribute("allowfullscreen",""),c.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),U(s)||c.setAttribute("referrerPolicy",s),i||!e.customControls)c.setAttribute("data-poster",t.poster),t.media=tt(c,t.media);else{const e=Q("div",{class:t.config.classNames.embedContainer,"data-poster":t.poster});e.appendChild(c),t.media=tt(e,t.media)}e.customControls||Bt(Pt(t.config.urls.vimeo.api,d)).then((e=>{!U(e)&&e.thumbnail_url&&Jt.setPoster.call(t,e.thumbnail_url).catch((()=>{}))})),t.embed=new window.Vimeo.Player(c,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=()=>(se.call(t,!0),t.embed.play()),t.media.pause=()=>(se.call(t,!1),t.embed.pause()),t.media.stop=()=>{t.pause(),t.currentTime=0};let{currentTime:p}=t.media;Object.defineProperty(t.media,"currentTime",{get:()=>p,set(e){const{embed:i,media:s,paused:n,volume:r}=t,a=n&&!i.hasPlayed;s.seeking=!0,gt.call(t,s,"seeking"),Promise.resolve(a&&i.setVolume(0)).then((()=>i.setCurrentTime(e))).then((()=>a&&i.pause())).then((()=>a&&i.setVolume(r))).catch((()=>{}))}});let m=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:()=>m,set(e){t.embed.setPlaybackRate(e).then((()=>{m=e,gt.call(t,t.media,"ratechange")})).catch((()=>{t.options.speed=[1]}))}});let{volume:f}=t.config;Object.defineProperty(t.media,"volume",{get:()=>f,set(e){t.embed.setVolume(e).then((()=>{f=e,gt.call(t,t.media,"volumechange")}))}});let{muted:g}=t.config;Object.defineProperty(t.media,"muted",{get:()=>g,set(e){const i=!!O(e)&&e;t.embed.setVolume(i?0:t.config.volume).then((()=>{g=i,gt.call(t,t.media,"volumechange")}))}});let y,{loop:v}=t.config;Object.defineProperty(t.media,"loop",{get:()=>v,set(e){const i=O(e)?e:t.config.loop.active;t.embed.setLoop(i).then((()=>{v=i}))}}),t.embed.getVideoUrl().then((e=>{y=e,Vt.setDownloadUrl.call(t)})).catch((t=>{this.debug.warn(t)})),Object.defineProperty(t.media,"currentSrc",{get:()=>y}),Object.defineProperty(t.media,"ended",{get:()=>t.currentTime===t.duration}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then((e=>{const[i,s]=e;t.embed.ratio=kt(i,s),St.call(this)})),t.embed.setAutopause(t.config.autopause).then((e=>{t.config.autopause=e})),t.embed.getVideoTitle().then((e=>{t.config.title=e,Jt.setTitle.call(this)})),t.embed.getCurrentTime().then((e=>{p=e,gt.call(t,t.media,"timeupdate")})),t.embed.getDuration().then((e=>{t.media.duration=e,gt.call(t,t.media,"durationchange")})),t.embed.getTextTracks().then((e=>{t.media.textTracks=e,qt.setup.call(t)})),t.embed.on("cuechange",(({cues:e=[]})=>{const i=e.map((t=>function(t){const e=document.createDocumentFragment(),i=document.createElement("div");return e.appendChild(i),i.innerHTML=t,e.firstChild.innerText}(t.text)));qt.updateCues.call(t,i)})),t.embed.on("loaded",(()=>{t.embed.getPaused().then((e=>{se.call(t,!e),e||gt.call(t,t.media,"playing")})),B(t.embed.element)&&t.supported.ui&&t.embed.element.setAttribute("tabindex",-1)})),t.embed.on("bufferstart",(()=>{gt.call(t,t.media,"waiting")})),t.embed.on("bufferend",(()=>{gt.call(t,t.media,"playing")})),t.embed.on("play",(()=>{se.call(t,!0),gt.call(t,t.media,"playing")})),t.embed.on("pause",(()=>{se.call(t,!1)})),t.embed.on("timeupdate",(e=>{t.media.seeking=!1,p=e.seconds,gt.call(t,t.media,"timeupdate")})),t.embed.on("progress",(e=>{t.media.buffered=e.percent,gt.call(t,t.media,"progress"),1===parseInt(e.percent,10)&&gt.call(t,t.media,"canplaythrough"),t.embed.getDuration().then((e=>{e!==t.media.duration&&(t.media.duration=e,gt.call(t,t.media,"durationchange"))}))})),t.embed.on("seeked",(()=>{t.media.seeking=!1,gt.call(t,t.media,"seeked")})),t.embed.on("ended",(()=>{t.media.paused=!0,gt.call(t,t.media,"ended")})),t.embed.on("error",(e=>{t.media.error=e,gt.call(t,t.media,"error")})),e.customControls&&setTimeout((()=>Jt.build.call(t)),0)}};function re(t){t&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===t&&(this.media.paused=!t,gt.call(this,this.media,t?"play":"pause"))}function ae(t){return t.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}const oe={setup(){if(st(this.elements.wrapper,this.config.classNames.embed,!0),P(window.YT)&&R(window.YT.Player))oe.ready.call(this);else{const t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{R(t)&&t(),oe.ready.call(this)},ie(this.config.urls.youtube.sdk).catch((t=>{this.debug.warn("YouTube API failed to load",t)}))}},getTitle(t){Bt(Pt(this.config.urls.youtube.api,t)).then((t=>{if(P(t)){const{title:e,height:i,width:s}=t;this.config.title=e,Jt.setTitle.call(this),this.embed.ratio=kt(s,i)}St.call(this)})).catch((()=>{St.call(this)}))},ready(){const t=this,e=t.config.youtube,i=t.media&&t.media.getAttribute("id");if(!U(i)&&i.startsWith("youtube-"))return;let s=t.media.getAttribute("src");U(s)&&(s=t.media.getAttribute(this.config.attributes.embed.id));const n=U(r=s)?null:r.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:r;var r;const a=Q("div",{id:`${t.provider}-${Math.floor(1e4*Math.random())}`,"data-poster":e.customControls?t.poster:void 0});if(t.media=tt(a,t.media),e.customControls){const e=t=>`https://i.ytimg.com/vi/${n}/${t}default.jpg`;Zt(e("maxres"),121).catch((()=>Zt(e("sd"),121))).catch((()=>Zt(e("hq")))).then((e=>Jt.setPoster.call(t,e.src))).then((e=>{e.includes("maxres")||(t.elements.poster.style.backgroundSize="cover")})).catch((()=>{}))}t.embed=new window.YT.Player(t.media,{videoId:n,host:ae(e),playerVars:X({},{autoplay:t.config.autoplay?1:0,hl:t.config.hl,controls:t.supported.ui&&e.customControls?0:1,disablekb:1,playsinline:t.config.fullscreen.iosNative?0:1,cc_load_policy:t.captions.active?1:0,cc_lang_pref:t.config.captions.language,widget_referrer:window?window.location.href:null},e),events:{onError(e){if(!t.media.error){const i=e.data,s={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[i]||"An unknown error occured";t.media.error={code:i,message:s},gt.call(t,t.media,"error")}},onPlaybackRateChange(e){const i=e.target;t.media.playbackRate=i.getPlaybackRate(),gt.call(t,t.media,"ratechange")},onReady(i){if(R(t.media.play))return;const s=i.target;oe.getTitle.call(t,n),t.media.play=()=>{re.call(t,!0),s.playVideo()},t.media.pause=()=>{re.call(t,!1),s.pauseVideo()},t.media.stop=()=>{s.stopVideo()},t.media.duration=s.getDuration(),t.media.paused=!0,t.media.currentTime=0,Object.defineProperty(t.media,"currentTime",{get:()=>Number(s.getCurrentTime()),set(e){t.paused&&!t.embed.hasPlayed&&t.embed.mute(),t.media.seeking=!0,gt.call(t,t.media,"seeking"),s.seekTo(e)}}),Object.defineProperty(t.media,"playbackRate",{get:()=>s.getPlaybackRate(),set(t){s.setPlaybackRate(t)}});let{volume:r}=t.config;Object.defineProperty(t.media,"volume",{get:()=>r,set(e){r=e,s.setVolume(100*r),gt.call(t,t.media,"volumechange")}});let{muted:a}=t.config;Object.defineProperty(t.media,"muted",{get:()=>a,set(e){const i=O(e)?e:a;a=i,s[i?"mute":"unMute"](),s.setVolume(100*r),gt.call(t,t.media,"volumechange")}}),Object.defineProperty(t.media,"currentSrc",{get:()=>s.getVideoUrl()}),Object.defineProperty(t.media,"ended",{get:()=>t.currentTime===t.duration});const o=s.getAvailablePlaybackRates();t.options.speed=o.filter((e=>t.config.speed.options.includes(e))),t.supported.ui&&e.customControls&&t.media.setAttribute("tabindex",-1),gt.call(t,t.media,"timeupdate"),gt.call(t,t.media,"durationchange"),clearInterval(t.timers.buffering),t.timers.buffering=setInterval((()=>{t.media.buffered=s.getVideoLoadedFraction(),(null===t.media.lastBuffered||t.media.lastBuffered<t.media.buffered)&&gt.call(t,t.media,"progress"),t.media.lastBuffered=t.media.buffered,1===t.media.buffered&&(clearInterval(t.timers.buffering),gt.call(t,t.media,"canplaythrough"))}),200),e.customControls&&setTimeout((()=>Jt.build.call(t)),50)},onStateChange(i){const s=i.target;switch(clearInterval(t.timers.playing),t.media.seeking&&[1,2].includes(i.data)&&(t.media.seeking=!1,gt.call(t,t.media,"seeked")),i.data){case-1:gt.call(t,t.media,"timeupdate"),t.media.buffered=s.getVideoLoadedFraction(),gt.call(t,t.media,"progress");break;case 0:re.call(t,!1),t.media.loop?(s.stopVideo(),s.playVideo()):gt.call(t,t.media,"ended");break;case 1:e.customControls&&!t.config.autoplay&&t.media.paused&&!t.embed.hasPlayed?t.media.pause():(re.call(t,!0),gt.call(t,t.media,"playing"),t.timers.playing=setInterval((()=>{gt.call(t,t.media,"timeupdate")}),50),t.media.duration!==s.getDuration()&&(t.media.duration=s.getDuration(),gt.call(t,t.media,"durationchange")));break;case 2:t.muted||t.embed.unMute(),re.call(t,!1);break;case 3:gt.call(t,t.media,"waiting")}gt.call(t,t.elements.container,"statechange",!1,{code:i.data})}}})}},le={setup(){this.media?(st(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),st(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&st(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=Q("div",{class:this.config.classNames.video}),$(this.media,this.elements.wrapper),this.elements.poster=Q("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?At.setup.call(this):this.isYouTube?oe.setup.call(this):this.isVimeo&&ne.setup.call(this)):this.debug.warn("No media element found!")}};class he{constructor(e){t(this,"load",(()=>{this.enabled&&(P(window.google)&&P(window.google.ima)?this.ready():ie(this.player.config.urls.googleIMA.sdk).then((()=>{this.ready()})).catch((()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))})))})),t(this,"ready",(()=>{var t;this.enabled||((t=this).manager&&t.manager.destroy(),t.elements.displayContainer&&t.elements.displayContainer.destroy(),t.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then((()=>{this.clearSafetyTimer("onAdsManagerLoaded()")})),this.listeners(),this.setupIMA()})),t(this,"setupIMA",(()=>{this.elements.container=Q("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(t=>this.onAdsManagerLoaded(t)),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(t=>this.onAdError(t)),!1),this.requestAds()})),t(this,"requestAds",(()=>{const{container:t}=this.player.elements;try{const e=new google.ima.AdsRequest;e.adTagUrl=this.tagUrl,e.linearAdSlotWidth=t.offsetWidth,e.linearAdSlotHeight=t.offsetHeight,e.nonLinearAdSlotWidth=t.offsetWidth,e.nonLinearAdSlotHeight=t.offsetHeight,e.forceNonLinearFullSlot=!1,e.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(e)}catch(t){this.onAdError(t)}})),t(this,"pollCountdown",((t=!1)=>{if(!t)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval((()=>{const t=jt(Math.max(this.manager.getRemainingTime(),0)),e=`${Lt.get("advertisement",this.player.config)} - ${t}`;this.elements.container.setAttribute("data-badge-text",e)}),100)})),t(this,"onAdsManagerLoaded",(t=>{if(!this.enabled)return;const e=new google.ima.AdsRenderingSettings;e.restoreCustomPlaybackStateOnAdBreakComplete=!0,e.enablePreloading=!0,this.manager=t.getAdsManager(this.player,e),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(t=>this.onAdError(t))),Object.keys(google.ima.AdEvent.Type).forEach((t=>{this.manager.addEventListener(google.ima.AdEvent.Type[t],(t=>this.onAdEvent(t)))})),this.trigger("loaded")})),t(this,"addCuePoints",(()=>{U(this.cuePoints)||this.cuePoints.forEach((t=>{if(0!==t&&-1!==t&&t<this.player.duration){const e=this.player.elements.progress;if(B(e)){const i=100/this.player.duration*t,s=Q("span",{class:this.player.config.classNames.cues});s.style.left=`${i.toString()}%`,e.appendChild(s)}}}))})),t(this,"onAdEvent",(t=>{const{container:e}=this.player.elements,i=t.getAd(),s=t.getAdData();switch((t=>{gt.call(this.player,this.player.media,`ads${t.replace(/_/g,"").toLowerCase()}`)})(t.type),t.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),i.isLinear()||(i.width=e.offsetWidth,i.height=e.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:s.adError&&this.player.debug.warn(`Non-fatal ad error: ${s.adError.getMessage()}`)}})),t(this,"onAdError",(t=>{this.cancel(),this.player.debug.warn("Ads error",t)})),t(this,"listeners",(()=>{const{container:t}=this.player.elements;let e;this.player.on("canplay",(()=>{this.addCuePoints()})),this.player.on("ended",(()=>{this.loader.contentComplete()})),this.player.on("timeupdate",(()=>{e=this.player.currentTime})),this.player.on("seeked",(()=>{const t=this.player.currentTime;U(this.cuePoints)||this.cuePoints.forEach(((i,s)=>{e<i&&i<t&&(this.manager.discardAdBreak(),this.cuePoints.splice(s,1))}))})),window.addEventListener("resize",(()=>{this.manager&&this.manager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)}))})),t(this,"play",(()=>{const{container:t}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then((()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(t){this.onAdError(t)}})).catch((()=>{}))})),t(this,"resumeContent",(()=>{this.elements.container.style.zIndex="",this.playing=!1,bt(this.player.media.play())})),t(this,"pauseContent",(()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()})),t(this,"cancel",(()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()})),t(this,"loadAds",(()=>{this.managerPromise.then((()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise((t=>{this.on("loaded",t),this.player.debug.log(this.manager)})),this.initialized=!1,this.requestAds()})).catch((()=>{}))})),t(this,"trigger",((t,...e)=>{const i=this.events[t];L(i)&&i.forEach((t=>{R(t)&&t.apply(this,e)}))})),t(this,"on",((t,e)=>(L(this.events[t])||(this.events[t]=[]),this.events[t].push(e),this))),t(this,"startSafetyTimer",((t,e)=>{this.player.debug.log(`Safety timer invoked from: ${e}`),this.safetyTimer=setTimeout((()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")}),t)})),t(this,"clearSafetyTimer",(t=>{A(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${t}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)})),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise(((t,e)=>{this.on("loaded",t),this.on("error",e)})),this.load()}get enabled(){const{config:t}=this;return this.player.isHTML5&&this.player.isVideo&&t.enabled&&(!U(t.publisherId)||V(t.tagUrl))}get tagUrl(){const{config:t}=this;return V(t.tagUrl)?t.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${Wt({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:t.publisherId})}`}}const ue=t=>{const e=[];return t.split(/\r\n\r\n|\n\n|\r\r/).forEach((t=>{const i={};t.split(/\r\n|\n|\r/).forEach((t=>{if(F(i.startTime)){if(!U(t.trim())&&U(i.text)){const e=t.trim().split("#xywh=");[i.text]=e,e[1]&&([i.x,i.y,i.w,i.h]=e[1].split(","))}}else{const e=t.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);e&&(i.startTime=60*Number(e[1]||0)*60+60*Number(e[2])+Number(e[3])+Number(`0.${e[4]}`),i.endTime=60*Number(e[6]||0)*60+60*Number(e[7])+Number(e[8])+Number(`0.${e[9]}`))}})),i.text&&e.push(i)})),e},ce=(t,e)=>{const i={};return t>e.width/e.height?(i.width=e.width,i.height=1/t*e.width):(i.height=e.height,i.width=t*e.height),i};class de{constructor(e){t(this,"load",(()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then((()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.loaded=!0)}))})),t(this,"getThumbnails",(()=>new Promise((t=>{const{src:e}=this.player.config.previewThumbnails;if(U(e))throw new Error("Missing previewThumbnails.src config attribute");const i=()=>{this.thumbnails.sort(((t,e)=>t.height-e.height)),this.player.debug.log("Preview thumbnails",this.thumbnails),t()};if(R(e))e((t=>{this.thumbnails=t,i()}));else{const t=(M(e)?[e]:e).map((t=>this.getThumbnail(t)));Promise.all(t).then(i)}})))),t(this,"getThumbnail",(t=>new Promise((e=>{Bt(t).then((i=>{const s={frames:ue(i),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=t.substring(0,t.lastIndexOf("/")+1));const n=new Image;n.onload=()=>{s.height=n.naturalHeight,s.width=n.naturalWidth,this.thumbnails.push(s),e()},n.src=s.urlPrefix+s.frames[0].text}))})))),t(this,"startMove",(t=>{if(this.loaded&&N(t)&&["touchmove","mousemove"].includes(t.type)&&this.player.media.duration){if("touchmove"===t.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{const e=this.player.elements.progress.getBoundingClientRect(),i=100/e.width*(t.pageX-e.left);this.seekTime=this.player.media.duration*(i/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=t.pageX,this.elements.thumb.time.innerText=jt(this.seekTime)}this.showImageAtCurrentTime()}})),t(this,"endMove",(()=>{this.toggleThumbContainer(!1,!0)})),t(this,"startScrubbing",(t=>{(A(t.button)||!1===t.button||0===t.button)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))})),t(this,"endScrubbing",(()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):ft.call(this.player,this.player.media,"timeupdate",(()=>{this.mouseDown||this.toggleScrubbingContainer(!1)}))})),t(this,"listeners",(()=>{this.player.on("play",(()=>{this.toggleThumbContainer(!1,!0)})),this.player.on("seeked",(()=>{this.toggleThumbContainer(!1)})),this.player.on("timeupdate",(()=>{this.lastTime=this.player.media.currentTime}))})),t(this,"render",(()=>{this.elements.thumb.container=Q("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=Q("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const t=Q("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=Q("span",{},"00:00"),t.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(t),B(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=Q("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)})),t(this,"destroy",(()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()})),t(this,"showImageAtCurrentTime",(()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const t=this.thumbnails[0].frames.findIndex((t=>this.seekTime>=t.startTime&&this.seekTime<=t.endTime)),e=t>=0;let i=0;this.mouseDown||this.toggleThumbContainer(e),e&&(this.thumbnails.forEach(((e,s)=>{this.loadedImages.includes(e.frames[t].text)&&(i=s)})),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(i)))})),t(this,"loadImage",((t=0)=>{const e=this.showingThumb,i=this.thumbnails[t],{urlPrefix:s}=i,n=i.frames[e],r=i.frames[e].text,a=s+r;if(this.currentImageElement&&this.currentImageElement.dataset.filename===r)this.showImage(this.currentImageElement,n,t,e,r,!1),this.currentImageElement.dataset.index=e,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const i=new Image;i.src=a,i.dataset.index=e,i.dataset.filename=r,this.showingThumbFilename=r,this.player.debug.log(`Loading image: ${a}`),i.onload=()=>this.showImage(i,n,t,e,r,!0),this.loadingImage=i,this.removeOldImages(i)}})),t(this,"showImage",((t,e,i,s,n,r=!0)=>{this.player.debug.log(`Showing thumb: ${n}. num: ${s}. qual: ${i}. newimg: ${r}`),this.setImageSizeAndOffset(t,e),r&&(this.currentImageContainer.appendChild(t),this.currentImageElement=t,this.loadedImages.includes(n)||this.loadedImages.push(n)),this.preloadNearby(s,!0).then(this.preloadNearby(s,!1)).then(this.getHigherQuality(i,t,e,n))})),t(this,"removeOldImages",(t=>{Array.from(this.currentImageContainer.children).forEach((e=>{if("img"!==e.tagName.toLowerCase())return;const i=this.usingSprites?500:1e3;if(e.dataset.index!==t.dataset.index&&!e.dataset.deleting){e.dataset.deleting=!0;const{currentImageContainer:t}=this;setTimeout((()=>{t.removeChild(e),this.player.debug.log(`Removing thumb: ${e.dataset.filename}`)}),i)}}))})),t(this,"preloadNearby",((t,e=!0)=>new Promise((i=>{setTimeout((()=>{const s=this.thumbnails[0].frames[t].text;if(this.showingThumbFilename===s){let n;n=e?this.thumbnails[0].frames.slice(t):this.thumbnails[0].frames.slice(0,t).reverse();let r=!1;n.forEach((t=>{const e=t.text;if(e!==s&&!this.loadedImages.includes(e)){r=!0,this.player.debug.log(`Preloading thumb filename: ${e}`);const{urlPrefix:t}=this.thumbnails[0],s=t+e,n=new Image;n.src=s,n.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${e}`),this.loadedImages.includes(e)||this.loadedImages.push(e),i()}}})),r||i()}}),300)})))),t(this,"getHigherQuality",((t,e,i,s)=>{if(t<this.thumbnails.length-1){let n=e.naturalHeight;this.usingSprites&&(n=i.h),n<this.thumbContainerHeight&&setTimeout((()=>{this.showingThumbFilename===s&&(this.player.debug.log(`Showing higher quality thumb for: ${s}`),this.loadImage(t+1))}),300)}})),t(this,"toggleThumbContainer",((t=!1,e=!1)=>{const i=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(i,t),!t&&e&&(this.showingThumb=null,this.showingThumbFilename=null)})),t(this,"toggleScrubbingContainer",((t=!1)=>{const e=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(e,t),t||(this.showingThumb=null,this.showingThumbFilename=null)})),t(this,"determineContainerAutoSizing",(()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)})),t(this,"setThumbContainerSizeAndPos",(()=>{if(this.sizeSpecifiedInCSS){if(this.elements.thumb.imageContainer.clientHeight>20&&this.elements.thumb.imageContainer.clientWidth<20){const t=Math.floor(this.elements.thumb.imageContainer.clientHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.width=`${t}px`}else if(this.elements.thumb.imageContainer.clientHeight<20&&this.elements.thumb.imageContainer.clientWidth>20){const t=Math.floor(this.elements.thumb.imageContainer.clientWidth/this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height=`${t}px`}}else{const t=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height=`${this.thumbContainerHeight}px`,this.elements.thumb.imageContainer.style.width=`${t}px`}this.setThumbContainerPos()})),t(this,"setThumbContainerPos",(()=>{const t=this.player.elements.progress.getBoundingClientRect(),e=this.player.elements.container.getBoundingClientRect(),{container:i}=this.elements.thumb,s=e.left-t.left+10,n=e.right-t.left-i.clientWidth-10;let r=this.mousePosX-t.left-i.clientWidth/2;r<s&&(r=s),r>n&&(r=n),i.style.left=`${r}px`})),t(this,"setScrubbingContainerSize",(()=>{const{width:t,height:e}=ce(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${t}px`,this.elements.scrubbing.container.style.height=`${e}px`})),t(this,"setImageSizeAndOffset",((t,e)=>{if(!this.usingSprites)return;const i=this.thumbContainerHeight/e.h;t.style.height=t.naturalHeight*i+"px",t.style.width=t.naturalWidth*i+"px",t.style.left=`-${e.x*i}px`,t.style.top=`-${e.y*i}px`})),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:t}=ce(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return t}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(t){this.mouseDown?this.currentScrubbingImageElement=t:this.currentThumbnailImageElement=t}}const pe={insertElements(t,e){M(e)?K(t,this.media,{src:e}):L(e)&&e.forEach((e=>{K(t,this.media,e)}))},change(t){Y(t,"sources.length")?(At.cancelRequests.call(this),this.destroy.call(this,(()=>{this.options.quality=[],Z(this.media),this.media=null,B(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:e,type:i}=t,[{provider:s=Xt.html5,src:n}]=e,r="html5"===s?i:"div",a="html5"===s?{}:{src:n};Object.assign(this,{provider:s,type:i,supported:ut.check(i,s,this.config.playsinline),media:Q(r,a)}),this.elements.container.appendChild(this.media),O(t.autoplay)&&(this.config.autoplay=t.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),U(t.poster)||(this.poster=t.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Jt.addStyleHook.call(this),this.isHTML5&&pe.insertElements.call(this,"source",e),this.config.title=t.title,le.setup.call(this),this.isHTML5&&Object.keys(t).includes("tracks")&&pe.insertElements.call(this,"track",t.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Jt.build.call(this),this.isHTML5&&this.media.load(),U(t.previewThumbnails)||(Object.assign(this.config.previewThumbnails,t.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new de(this))),this.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}};class me{constructor(e,i){if(t(this,"play",(()=>R(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then((()=>this.ads.play())).catch((()=>bt(this.media.play()))),this.media.play()):null)),t(this,"pause",(()=>this.playing&&R(this.media.pause)?this.media.pause():null)),t(this,"togglePlay",(t=>(O(t)?t:!this.playing)?this.play():this.pause())),t(this,"stop",(()=>{this.isHTML5?(this.pause(),this.restart()):R(this.media.stop)&&this.media.stop()})),t(this,"restart",(()=>{this.currentTime=0})),t(this,"rewind",(t=>{this.currentTime-=F(t)?t:this.config.seekTime})),t(this,"forward",(t=>{this.currentTime+=F(t)?t:this.config.seekTime})),t(this,"increaseVolume",(t=>{const e=this.media.muted?0:this.volume;this.volume=e+(F(t)?t:0)})),t(this,"decreaseVolume",(t=>{this.increaseVolume(-t)})),t(this,"airplay",(()=>{ut.airplay&&this.media.webkitShowPlaybackTargetPicker()})),t(this,"toggleControls",(t=>{if(this.supported.ui&&!this.isAudio){const e=nt(this.elements.container,this.config.classNames.hideControls),i=void 0===t?void 0:!t,s=st(this.elements.container,this.config.classNames.hideControls,i);if(s&&L(this.config.controls)&&this.config.controls.includes("settings")&&!U(this.config.settings)&&Vt.toggleMenu.call(this,!1),s!==e){const t=s?"controlshidden":"controlsshown";gt.call(this,this.media,t)}return!s}return!1})),t(this,"on",((t,e)=>{pt.call(this,this.elements.container,t,e)})),t(this,"once",((t,e)=>{ft.call(this,this.elements.container,t,e)})),t(this,"off",((t,e)=>{mt(this.elements.container,t,e)})),t(this,"destroy",((t,e=!1)=>{if(!this.ready)return;const i=()=>{document.body.style.overflow="",this.embed=null,e?(Object.keys(this.elements).length&&(Z(this.elements.buttons.play),Z(this.elements.captions),Z(this.elements.controls),Z(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),R(t)&&t()):(yt.call(this),At.cancelRequests.call(this),tt(this.elements.original,this.elements.container),gt.call(this,this.elements.original,"destroyed",!0),R(t)&&t.call(this.elements.original),this.ready=!1,setTimeout((()=>{this.elements=null,this.media=null}),200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Jt.toggleNativeControls.call(this,!0),i()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&R(this.embed.destroy)&&this.embed.destroy(),i()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(i),setTimeout(i,200))})),t(this,"supports",(t=>ut.mime.call(this,t))),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=ut.touch,this.media=e,M(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||I(this.media)||L(this.media))&&(this.media=this.media[0]),this.config=X({},Ht,me.defaults,i||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch(t){return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new Qt(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",ut),A(this.media)||!B(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!ut.check().api)return void this.debug.error("Setup failed: no support");const s=this.media.cloneNode(!0);s.autoplay=!1,this.elements.original=s;const n=this.media.tagName.toLowerCase();let r=null,a=null;switch(n){case"div":if(r=this.media.querySelector("iframe"),B(r)){if(a=Ut(r.getAttribute("src")),this.provider=function(t){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(t)?Xt.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(t)?Xt.vimeo:null}(a.toString()),this.elements.container=this.media,this.media=r,this.elements.container.className="",a.search.length){const t=["1","true"];t.includes(a.searchParams.get("autoplay"))&&(this.config.autoplay=!0),t.includes(a.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=t.includes(a.searchParams.get("playsinline")),this.config.youtube.hl=a.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(U(this.provider)||!Object.values(Xt).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=$t;break;case"video":case"audio":this.type=n,this.provider=Xt.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=ut.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new te(this),this.storage=new It(this),this.media.plyr=this,B(this.elements.container)||(this.elements.container=Q("div",{tabindex:0}),$(this.media,this.elements.container)),Jt.migrateStyles.call(this),Jt.addStyleHook.call(this),le.setup.call(this),this.config.debug&&pt.call(this,this.elements.container,this.config.events.join(" "),(t=>{this.debug.log(`event: ${t.type}`)})),this.fullscreen=new Kt(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Jt.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new he(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",(()=>bt(this.play()))),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new de(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===Xt.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===Xt.youtube}get isVimeo(){return this.provider===Xt.vimeo}get isVideo(){return this.type===$t}get isAudio(){return"audio"===this.type}get playing(){return Boolean(this.ready&&!this.paused&&!this.ended)}get paused(){return Boolean(this.media.paused)}get stopped(){return Boolean(this.paused&&0===this.currentTime)}get ended(){return Boolean(this.media.ended)}set currentTime(t){if(!this.duration)return;const e=F(t)&&t>0;this.media.currentTime=e?Math.min(t,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:t}=this.media;return F(t)?t:t&&t.length&&this.duration>0?t.end(0)/this.duration:0}get seeking(){return Boolean(this.media.seeking)}get duration(){const t=parseFloat(this.config.duration),e=(this.media||{}).duration,i=F(e)&&e!==1/0?e:0;return t||i}set volume(t){let e=t;M(e)&&(e=Number(e)),F(e)||(e=this.storage.get("volume")),F(e)||({volume:e}=this.config),e>1&&(e=1),e<0&&(e=0),this.config.volume=e,this.media.volume=e,!U(t)&&this.muted&&e>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(t){let e=t;O(e)||(e=this.storage.get("muted")),O(e)||(e=this.config.muted),this.config.muted=e,this.media.muted=e}get muted(){return Boolean(this.media.muted)}get hasAudio(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}set speed(t){let e=null;F(t)&&(e=t),F(e)||(e=this.storage.get("speed")),F(e)||(e=this.config.speed.selected);const{minimumSpeed:i,maximumSpeed:s}=this;e=function(t=0,e=0,i=255){return Math.min(Math.max(t,e),i)}(e,i,s),this.config.speed.selected=e,setTimeout((()=>{this.media&&(this.media.playbackRate=e)}),0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(t){const e=this.config.quality,i=this.options.quality;if(!i.length)return;let s=[!U(t)&&Number(t),this.storage.get("quality"),e.selected,e.default].find(F),n=!0;if(!i.includes(s)){const t=Dt(i,s);this.debug.warn(`Unsupported quality option: ${s}, using ${t} instead`),s=t,n=!1}e.selected=s,this.media.quality=s,n&&this.storage.set({quality:s})}get quality(){return this.media.quality}set loop(t){const e=O(t)?t:this.config.loop.active;this.config.loop.active=e,this.media.loop=e}get loop(){return Boolean(this.media.loop)}set source(t){pe.change.call(this,t)}get source(){return this.media.currentSrc}get download(){const{download:t}=this.config.urls;return V(t)?t:this.source}set download(t){V(t)&&(this.config.urls.download=t,Vt.setDownloadUrl.call(this))}set poster(t){this.isVideo?Jt.setPoster.call(this,t,!1).catch((()=>{})):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const t=Ct(Et.call(this));return L(t)?t.join(":"):t}set ratio(t){this.isVideo?M(t)&&Tt(t)?(this.config.ratio=Ct(t),St.call(this)):this.debug.error(`Invalid aspect ratio specified (${t})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(t){const e=O(t)?t:this.config.autoplay;this.config.autoplay=e}get autoplay(){return Boolean(this.config.autoplay)}toggleCaptions(t){qt.toggle.call(this,t,!1)}set currentTrack(t){qt.set.call(this,t,!1),qt.setup()}get currentTrack(){const{toggled:t,currentTrack:e}=this.captions;return t?e:-1}set language(t){qt.setLanguage.call(this,t,!1)}get language(){return(qt.getCurrentTrack.call(this)||{}).language}set pip(t){if(!ut.pip)return;const e=O(t)?t:!this.pip;R(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(e?Yt:"inline"),R(this.media.requestPictureInPicture)&&(!this.pip&&e?this.media.requestPictureInPicture():this.pip&&!e&&document.exitPictureInPicture())}get pip(){return ut.pip?U(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Yt:null}setPreviewThumbnails(t){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,t),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new de(this))}static supported(t,e,i){return ut.check(t,e,i)}static loadSprite(t,e){return Nt(t,e)}static setup(t,e={}){let i=null;return M(t)?i=Array.from(document.querySelectorAll(t)):I(t)?i=Array.from(t):L(t)&&(i=t.filter(B)),U(i)?null:i.map((t=>new me(t,e)))}}var fe;return me.defaults=(fe=Ht,JSON.parse(JSON.stringify(fe))),me}())}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function s(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}var n=i(564),r=i.n(n),a=function(){function e(i,s){t(this,e),this.counter=i,this.maxCount=s>0?s:1,this.count=s>0?0:1,this.displayCount=0,this.setCount()}return s(e,[{key:"onIncrease",value:function(){this.count++,this.setCount()}},{key:"onForceEnd",value:function(){this.count=this.maxCount,this.setCount()}},{key:"setCount",value:function(){this.displayCount=c(Math.round(this.count/this.maxCount*100),0,100),this.counter.innerHTML=this.displayCount+" %"}}]),e}();function o(t){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(t,1):document.addEventListener("DOMContentLoaded",t)}function l(t,e){if(null==e&&(e=t,t=0),t>e){var i=t;t=e,e=i}return t+(e-t)*Math.random()}var h,u,c=function(t,e,i){return Math.min(Math.max(t,e),i)};function d(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"))}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}d(),window.addEventListener("resize",(h=function(t){d()},function(t){u&&clearTimeout(u),u=setTimeout(h,400,t)}));var f,g,y,v,b,_,D,w,x,T,C,E,S,k={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},A={duration:.5,overwrite:!1,delay:0},P=1e8,F=1e-8,M=2*Math.PI,O=M/4,R=0,L=Math.sqrt,I=Math.cos,B=Math.sin,N=function(t){return"string"==typeof t},z=function(t){return"function"==typeof t},j=function(t){return"number"==typeof t},V=function(t){return void 0===t},U=function(t){return"object"==typeof t},W=function(t){return!1!==t},q=function(){return"undefined"!=typeof window},H=function(t){return z(t)||N(t)},Y="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},X=Array.isArray,$=/(?:-?\.?\d|\.)+/gi,G=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Q=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,K=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Z=/[+-]=-?[.\d]+/,J=/[^,'"\[\]\s]+/gi,tt=/[\d.+\-=]+(?:e[-+]\d*)*/i,et={},it={},st=function(t){return(it=kt(t,et))&&fi},nt=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},rt=function(t,e){return!e&&console.warn(t)},at=function(t,e){return t&&(et[t]=e)&&it&&(it[t]=e)||et},ot=function(){return 0},lt={},ht=[],ut={},ct={},dt={},pt=30,mt=[],ft="",gt=function(t){var e,i,s=t[0];if(U(s)||z(s)||(t=[t]),!(e=(s._gsap||{}).harness)){for(i=mt.length;i--&&!mt[i].targetTest(s););e=mt[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new ze(t[i],e)))||t.splice(i,1);return t},yt=function(t){return t._gsap||gt(ne(t))[0]._gsap},vt=function(t,e,i){return(i=t[e])&&z(i)?t[e]():V(i)&&t.getAttribute&&t.getAttribute(e)||i},bt=function(t,e){return(t=t.split(",")).forEach(e)||t},_t=function(t){return Math.round(1e5*t)/1e5||0},Dt=function(t){return Math.round(1e7*t)/1e7||0},wt=function(t,e){for(var i=e.length,s=0;t.indexOf(e[s])<0&&++s<i;);return s<i},xt=function(){var t,e,i=ht.length,s=ht.slice(0);for(ut={},ht.length=0,t=0;t<i;t++)(e=s[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Tt=function(t,e,i,s){ht.length&&xt(),t.render(e,i,s),ht.length&&xt()},Ct=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(J).length<2?e:N(t)?t.trim():t},Et=function(t){return t},St=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},kt=function(t,e){for(var i in e)t[i]=e[i];return t},At=function t(e,i){for(var s in i)"__proto__"!==s&&"constructor"!==s&&"prototype"!==s&&(e[s]=U(i[s])?t(e[s]||(e[s]={}),i[s]):i[s]);return e},Pt=function(t,e){var i,s={};for(i in t)i in e||(s[i]=t[i]);return s},Ft=function(t){var e,i=t.parent||g,s=t.keyframes?(e=X(t.keyframes),function(t,i){for(var s in i)s in t||"duration"===s&&e||"ease"===s||(t[s]=i[s])}):St;if(W(t.inherit))for(;i;)s(t,i.vars.defaults),i=i.parent||i._dp;return t},Mt=function(t,e,i,s){void 0===i&&(i="_first"),void 0===s&&(s="_last");var n=e._prev,r=e._next;n?n._next=r:t[i]===e&&(t[i]=r),r?r._prev=n:t[s]===e&&(t[s]=n),e._next=e._prev=e.parent=null},Ot=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Rt=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Lt=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},It=function t(e){return!e||e._ts&&t(e.parent)},Bt=function(t){return t._repeat?Nt(t._tTime,t=t.duration()+t._rDelay)*t:0},Nt=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},zt=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},jt=function(t){return t._end=Dt(t._start+(t._tDur/Math.abs(t._ts||t._rts||F)||0))},Vt=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=Dt(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),jt(t),i._dirty||Rt(i,t)),t},Ut=function(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=zt(t.rawTime(),e),(!e._dur||te(0,e.totalDuration(),i)-e._tTime>F)&&e.render(i,!0)),Rt(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},Wt=function(t,e,i,s){return e.parent&&Ot(e),e._start=Dt((j(i)?i:i||t!==g?Kt(t,i,e):t._time)+e._delay),e._end=Dt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,i,s,n){void 0===i&&(i="_first"),void 0===s&&(s="_last");var r,a=t[s];if(n)for(r=e[n];a&&a[n]>r;)a=a._prev;a?(e._next=a._next,a._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[s]=e,e._prev=a,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),Xt(e)||(t._recent=e),s||Ut(t,e),t},qt=function(t,e){return(et.ScrollTrigger||nt("scrollTrigger",e))&&et.ScrollTrigger.create(e,t)},Ht=function(t,e,i,s){return Ye(t,e),t._initted?!i&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&D!==Ee.frame?(ht.push(t),t._lazy=[e,s],1):void 0:1},Yt=function t(e){var i=e.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||t(i))},Xt=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},$t=function(t,e,i,s){var n=t._repeat,r=Dt(e)||0,a=t._tTime/t._tDur;return a&&!s&&(t._time*=r/t._dur),t._dur=r,t._tDur=n?n<0?1e10:Dt(r*(n+1)+t._rDelay*n):r,a>0&&!s?Vt(t,t._tTime=t._tDur*a):t.parent&&jt(t),i||Rt(t.parent,t),t},Gt=function(t){return t instanceof Ve?Rt(t):$t(t,t._dur)},Qt={_start:0,endTime:ot,totalDuration:ot},Kt=function t(e,i,s){var n,r,a,o=e.labels,l=e._recent||Qt,h=e.duration()>=P?l.endTime(!1):e._dur;return N(i)&&(isNaN(i)||i in o)?(r=i.charAt(0),a="%"===i.substr(-1),n=i.indexOf("="),"<"===r||">"===r?(n>=0&&(i=i.replace(/=/,"")),("<"===r?l._start:l.endTime(l._repeat>=0))+(parseFloat(i.substr(1))||0)*(a?(n<0?l:s).totalDuration()/100:1)):n<0?(i in o||(o[i]=h),o[i]):(r=parseFloat(i.charAt(n-1)+i.substr(n+1)),a&&s&&(r=r/100*(X(s)?s[0]:s).totalDuration()),n>1?t(e,i.substr(0,n-1),s)+r:h+r)):null==i?h:+i},Zt=function(t,e,i){var s,n,r=j(e[1]),a=(r?2:1)+(t<2?0:1),o=e[a];if(r&&(o.duration=e[1]),o.parent=i,t){for(s=o,n=i;n&&!("immediateRender"in s);)s=n.vars.defaults||{},n=W(n.vars.inherit)&&n.parent;o.immediateRender=W(s.immediateRender),t<2?o.runBackwards=1:o.startAt=e[a-1]}return new Ke(e[0],o,e[a+1])},Jt=function(t,e){return t||0===t?e(t):e},te=function(t,e,i){return i<t?t:i>e?e:i},ee=function(t,e){return N(t)&&(e=tt.exec(t))?t.substr(e.index+e[0].length):""},ie=[].slice,se=function(t,e){return t&&U(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&U(t[0]))&&!t.nodeType&&t!==y},ne=function(t,e,i){return!N(t)||i||!v&&Se()?X(t)?function(t,e,i){return void 0===i&&(i=[]),t.forEach((function(t){var s;return N(t)&&!e||se(t,1)?(s=i).push.apply(s,ne(t)):i.push(t)}))||i}(t,i):se(t)?ie.call(t,0):t?[t]:[]:ie.call((e||b).querySelectorAll(t),0)},re=function(t){return t.sort((function(){return.5-Math.random()}))},ae=function(t){if(z(t))return t;var e=U(t)?t:{each:t},i=Re(e.ease),s=e.from||0,n=parseFloat(e.base)||0,r={},a=s>0&&s<1,o=isNaN(s)||a,l=e.axis,h=s,u=s;return N(s)?h=u={center:.5,edges:.5,end:1}[s]||0:!a&&o&&(h=s[0],u=s[1]),function(t,a,c){var d,p,m,f,g,y,v,b,_,D=(c||e).length,w=r[D];if(!w){if(!(_="auto"===e.grid?0:(e.grid||[1,P])[1])){for(v=-P;v<(v=c[_++].getBoundingClientRect().left)&&_<D;);_--}for(w=r[D]=[],d=o?Math.min(_,D)*h-.5:s%_,p=_===P?0:o?D*u/_-.5:s/_|0,v=0,b=P,y=0;y<D;y++)m=y%_-d,f=p-(y/_|0),w[y]=g=l?Math.abs("y"===l?f:m):L(m*m+f*f),g>v&&(v=g),g<b&&(b=g);"random"===s&&re(w),w.max=v-b,w.min=b,w.v=D=(parseFloat(e.amount)||parseFloat(e.each)*(_>D?D-1:l?"y"===l?D/_:_:Math.max(_,D/_))||0)*("edges"===s?-1:1),w.b=D<0?n-D:n,w.u=ee(e.amount||e.each)||0,i=i&&D<0?Me(i):i}return D=(w[t]-w.min)/w.max||0,Dt(w.b+(i?i(D):D)*w.v)+w.u}},oe=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var s=Math.round(parseFloat(i)/t)*t*e;return(s-s%1)/e+(j(i)?0:ee(i))}},le=function(t,e){var i,s,n=X(t);return!n&&U(t)&&(i=n=t.radius||P,t.values?(t=ne(t.values),(s=!j(t[0]))&&(i*=i)):t=oe(t.increment)),Jt(e,n?z(t)?function(e){return s=t(e),Math.abs(s-e)<=i?s:e}:function(e){for(var n,r,a=parseFloat(s?e.x:e),o=parseFloat(s?e.y:0),l=P,h=0,u=t.length;u--;)(n=s?(n=t[u].x-a)*n+(r=t[u].y-o)*r:Math.abs(t[u]-a))<l&&(l=n,h=u);return h=!i||l<=i?t[h]:e,s||h===e||j(e)?h:h+ee(e)}:oe(t))},he=function(t,e,i,s){return Jt(X(t)?!e:!0===i?!!(i=0):!s,(function(){return X(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(s=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+.99*i))/i)*i*s)/s}))},ue=function(t,e,i){return Jt(i,(function(i){return t[~~e(i)]}))},ce=function(t){for(var e,i,s,n,r=0,a="";~(e=t.indexOf("random(",r));)s=t.indexOf(")",e),n="["===t.charAt(e+7),i=t.substr(e+7,s-e-7).match(n?J:$),a+=t.substr(r,e-r)+he(n?i:+i[0],n?0:+i[1],+i[2]||1e-5),r=s+1;return a+t.substr(r,t.length-r)},de=function(t,e,i,s,n){var r=e-t,a=s-i;return Jt(n,(function(e){return i+((e-t)/r*a||0)}))},pe=function(t,e,i){var s,n,r,a=t.labels,o=P;for(s in a)(n=a[s]-e)<0==!!i&&n&&o>(n=Math.abs(n))&&(r=s,o=n);return r},me=function(t,e,i){var s,n,r=t.vars,a=r[e];if(a)return s=r[e+"Params"],n=r.callbackScope||t,i&&ht.length&&xt(),s?a.apply(n,s):a.call(n)},fe=function(t){return Ot(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&me(t,"onInterrupt"),t},ge=function(t){var e=(t=!t.name&&t.default||t).name,i=z(t),s=e&&!i&&t.init?function(){this._props=[]}:t,n={init:ot,render:ai,add:qe,kill:li,modifier:oi,rawVars:0},r={targetTest:0,get:0,getSetter:ii,aliases:{},register:0};if(Se(),t!==s){if(ct[e])return;St(s,St(Pt(t,n),r)),kt(s.prototype,kt(n,Pt(t,r))),ct[s.prop=e]=s,t.targetTest&&(mt.push(s),lt[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}at(e,s),t.register&&t.register(fi,s,ci)},ye=255,ve={aqua:[0,ye,ye],lime:[0,ye,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ye],navy:[0,0,128],white:[ye,ye,ye],olive:[128,128,0],yellow:[ye,ye,0],orange:[ye,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ye,0,0],pink:[ye,192,203],cyan:[0,ye,ye],transparent:[ye,ye,ye,0]},be=function(t,e,i){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)*ye+.5|0},_e=function(t,e,i){var s,n,r,a,o,l,h,u,c,d,p=t?j(t)?[t>>16,t>>8&ye,t&ye]:0:ve.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),ve[t])p=ve[t];else if("#"===t.charAt(0)){if(t.length<6&&(s=t.charAt(1),n=t.charAt(2),r=t.charAt(3),t="#"+s+s+n+n+r+r+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(p=parseInt(t.substr(1,6),16))>>16,p>>8&ye,p&ye,parseInt(t.substr(7),16)/255];p=[(t=parseInt(t.substr(1),16))>>16,t>>8&ye,t&ye]}else if("hsl"===t.substr(0,3))if(p=d=t.match($),e){if(~t.indexOf("="))return p=t.match(G),i&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,o=+p[1]/100,s=2*(l=+p[2]/100)-(n=l<=.5?l*(o+1):l+o-l*o),p.length>3&&(p[3]*=1),p[0]=be(a+1/3,s,n),p[1]=be(a,s,n),p[2]=be(a-1/3,s,n);else p=t.match($)||ve.transparent;p=p.map(Number)}return e&&!d&&(s=p[0]/ye,n=p[1]/ye,r=p[2]/ye,l=((h=Math.max(s,n,r))+(u=Math.min(s,n,r)))/2,h===u?a=o=0:(c=h-u,o=l>.5?c/(2-h-u):c/(h+u),a=h===s?(n-r)/c+(n<r?6:0):h===n?(r-s)/c+2:(s-n)/c+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*o+.5),p[2]=~~(100*l+.5)),i&&p.length<4&&(p[3]=1),p},De=function(t){var e=[],i=[],s=-1;return t.split(xe).forEach((function(t){var n=t.match(Q)||[];e.push.apply(e,n),i.push(s+=n.length+1)})),e.c=i,e},we=function(t,e,i){var s,n,r,a,o="",l=(t+o).match(xe),h=e?"hsla(":"rgba(",u=0;if(!l)return t;if(l=l.map((function(t){return(t=_e(t,e,1))&&h+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),i&&(r=De(t),(s=i.c).join(o)!==r.c.join(o)))for(a=(n=t.replace(xe,"1").split(Q)).length-1;u<a;u++)o+=n[u]+(~s.indexOf(u)?l.shift()||h+"0,0,0,0)":(r.length?r:l.length?l:i).shift());if(!n)for(a=(n=t.split(xe)).length-1;u<a;u++)o+=n[u]+l[u];return o+n[a]},xe=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in ve)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Te=/hsl[a]?\(/,Ce=function(t){var e,i=t.join(" ");if(xe.lastIndex=0,xe.test(i))return e=Te.test(i),t[1]=we(t[1],e),t[0]=we(t[0],e,De(t[1])),!0},Ee=function(){var t,e,i,s,n,r,a=Date.now,o=500,l=33,h=a(),u=h,c=1e3/240,d=c,p=[],m=function i(m){var f,g,y,v,b=a()-u,_=!0===m;if(b>o&&(h+=b-l),((f=(y=(u+=b)-h)-d)>0||_)&&(v=++s.frame,n=y-1e3*s.time,s.time=y/=1e3,d+=f+(f>=c?4:c-f),g=1),_||(t=e(i)),g)for(r=0;r<p.length;r++)p[r](y,n,v,m)};return s={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(t){return n/(1e3/(t||60))},wake:function(){_&&(!v&&q()&&(y=v=window,b=y.document||{},et.gsap=fi,(y.gsapVersions||(y.gsapVersions=[])).push(fi.version),st(it||y.GreenSockGlobals||!y.gsap&&y||{}),i=y.requestAnimationFrame),t&&s.sleep(),e=i||function(t){return setTimeout(t,d-1e3*s.time+1|0)},x=1,m(2))},sleep:function(){(i?y.cancelAnimationFrame:clearTimeout)(t),x=0,e=ot},lagSmoothing:function(t,e){o=t||1e8,l=Math.min(e,o,0)},fps:function(t){c=1e3/(t||240),d=1e3*s.time+c},add:function(t){p.indexOf(t)<0&&p.push(t),Se()},remove:function(t,e){~(e=p.indexOf(t))&&p.splice(e,1)&&r>=e&&r--},_listeners:p}}(),Se=function(){return!x&&Ee.wake()},ke={},Ae=/^[\d.\-M][\d.\-,\s]/,Pe=/["']/g,Fe=function(t){for(var e,i,s,n={},r=t.substr(1,t.length-3).split(":"),a=r[0],o=1,l=r.length;o<l;o++)i=r[o],e=o!==l-1?i.lastIndexOf(","):i.length,s=i.substr(0,e),n[a]=isNaN(s)?s.replace(Pe,"").trim():+s,a=i.substr(e+1).trim();return n},Me=function(t){return function(e){return 1-t(1-e)}},Oe=function t(e,i){for(var s,n=e._first;n;)n instanceof Ve?t(n,i):!n.vars.yoyoEase||n._yoyo&&n._repeat||n._yoyo===i||(n.timeline?t(n.timeline,i):(s=n._ease,n._ease=n._yEase,n._yEase=s,n._yoyo=i)),n=n._next},Re=function(t,e){return t&&(z(t)?t:ke[t]||function(t){var e,i,s,n,r=(t+"").split("("),a=ke[r[0]];return a&&r.length>1&&a.config?a.config.apply(null,~t.indexOf("{")?[Fe(r[1])]:(e=t,i=e.indexOf("(")+1,s=e.indexOf(")"),n=e.indexOf("(",i),e.substring(i,~n&&n<s?e.indexOf(")",s+1):s)).split(",").map(Ct)):ke._CE&&Ae.test(t)?ke._CE("",t):a}(t))||e},Le=function(t,e,i,s){void 0===i&&(i=function(t){return 1-e(1-t)}),void 0===s&&(s=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var n,r={easeIn:e,easeOut:i,easeInOut:s};return bt(t,(function(t){for(var e in ke[t]=et[t]=r,ke[n=t.toLowerCase()]=i,r)ke[n+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=ke[t+"."+e]=r[e]})),r},Ie=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Be=function t(e,i,s){var n=i>=1?i:1,r=(s||(e?.3:.45))/(i<1?i:1),a=r/M*(Math.asin(1/n)||0),o=function(t){return 1===t?1:n*Math.pow(2,-10*t)*B((t-a)*r)+1},l="out"===e?o:"in"===e?function(t){return 1-o(1-t)}:Ie(o);return r=M/r,l.config=function(i,s){return t(e,i,s)},l},Ne=function t(e,i){void 0===i&&(i=1.70158);var s=function(t){return t?--t*t*((i+1)*t+i)+1:0},n="out"===e?s:"in"===e?function(t){return 1-s(1-t)}:Ie(s);return n.config=function(i){return t(e,i)},n};bt("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var i=e<5?e+1:e;Le(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},(function(t){return 1-Math.pow(1-t,i)}),(function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow(2*(1-t),i)/2}))})),ke.Linear.easeNone=ke.none=ke.Linear.easeIn,Le("Elastic",Be("in"),Be("out"),Be()),T=7.5625,E=1/(C=2.75),Le("Bounce",(function(t){return 1-S(1-t)}),S=function(t){return t<E?T*t*t:t<.7272727272727273?T*Math.pow(t-1.5/C,2)+.75:t<.9090909090909092?T*(t-=2.25/C)*t+.9375:T*Math.pow(t-2.625/C,2)+.984375}),Le("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),Le("Circ",(function(t){return-(L(1-t*t)-1)})),Le("Sine",(function(t){return 1===t?1:1-I(t*O)})),Le("Back",Ne("in"),Ne("out"),Ne()),ke.SteppedEase=ke.steps=et.SteppedEase={config:function(t,e){void 0===t&&(t=1);var i=1/t,s=t+(e?0:1),n=e?1:0;return function(t){return((s*te(0,.99999999,t)|0)+n)*i}}},A.ease=ke["quad.out"],bt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return ft+=t+","+t+"Params,"}));var ze=function(t,e){this.id=R++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:vt,this.set=e?e.getSetter:ii},je=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,$t(this,+t.duration,1,1),this.data=t.data,x||Ee.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,$t(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Se(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Vt(this,t),!i._dp||i.parent||Ut(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Wt(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===F||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Tt(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Bt(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Bt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?Nt(this._tTime,i)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?zt(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,Lt(this.totalTime(te(-this._delay,this._tDur,e),!0)),jt(this),this},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Se(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==F&&(this._tTime-=F)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Wt(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(W(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?zt(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(e._ts||1),e=e._dp;return i},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,Gt(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,Gt(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Kt(this,t),W(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,W(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,i=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<this.endTime(!0)-F))},e.eventCallback=function(t,e,i){var s=this.vars;return arguments.length>1?(e?(s[t]=e,i&&(s[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete s[t],this):s[t]},e.then=function(t){var e=this;return new Promise((function(i){var s=z(t)?t:Et,n=function(){var t=e.then;e.then=null,z(s)&&(s=s(e))&&(s.then||s===e)&&(e.then=t),i(s),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?n():e._prom=n}))},e.kill=function(){fe(this)},t}();St(je.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Ve=function(t){function e(e,i){var s;return void 0===e&&(e={}),(s=t.call(this,e)||this).labels={},s.smoothChildTiming=!!e.smoothChildTiming,s.autoRemoveChildren=!!e.autoRemoveChildren,s._sort=W(e.sortChildren),g&&Wt(e.parent||g,p(s),i),e.reversed&&s.reverse(),e.paused&&s.paused(!0),e.scrollTrigger&&qt(p(s),e.scrollTrigger),s}m(e,t);var i=e.prototype;return i.to=function(t,e,i){return Zt(0,arguments,this),this},i.from=function(t,e,i){return Zt(1,arguments,this),this},i.fromTo=function(t,e,i,s){return Zt(2,arguments,this),this},i.set=function(t,e,i){return e.duration=0,e.parent=this,Ft(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new Ke(t,e,Kt(this,i),1),this},i.call=function(t,e,i){return Wt(this,Ke.delayedCall(0,t,e),i)},i.staggerTo=function(t,e,i,s,n,r,a){return i.duration=e,i.stagger=i.stagger||s,i.onComplete=r,i.onCompleteParams=a,i.parent=this,new Ke(t,i,Kt(this,n)),this},i.staggerFrom=function(t,e,i,s,n,r,a){return i.runBackwards=1,Ft(i).immediateRender=W(i.immediateRender),this.staggerTo(t,e,i,s,n,r,a)},i.staggerFromTo=function(t,e,i,s,n,r,a,o){return s.startAt=i,Ft(s).immediateRender=W(s.immediateRender),this.staggerTo(t,e,s,n,r,a,o)},i.render=function(t,e,i){var s,n,r,a,o,l,h,u,c,d,p,m,f=this._time,y=this._dirty?this.totalDuration():this._tDur,v=this._dur,b=t<=0?0:Dt(t),_=this._zTime<0!=t<0&&(this._initted||!v);if(this!==g&&b>y&&t>=0&&(b=y),b!==this._tTime||i||_){if(f!==this._time&&v&&(b+=this._time-f,t+=this._time-f),s=b,c=this._start,l=!(u=this._ts),_&&(v||(f=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(p=this._yoyo,o=v+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*o+t,e,i);if(s=Dt(b%o),b===y?(a=this._repeat,s=v):((a=~~(b/o))&&a===b/o&&(s=v,a--),s>v&&(s=v)),d=Nt(this._tTime,o),!f&&this._tTime&&d!==a&&(d=a),p&&1&a&&(s=v-s,m=1),a!==d&&!this._lock){var D=p&&1&d,w=D===(p&&1&a);if(a<d&&(D=!D),f=D?0:v,this._lock=1,this.render(f||(m?0:Dt(a*o)),e,!v)._lock=0,this._tTime=b,!e&&this.parent&&me(this,"onRepeat"),this.vars.repeatRefresh&&!m&&(this.invalidate()._lock=1),f&&f!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,y=this._tDur,w&&(this._lock=2,f=D?v:-1e-4,this.render(f,!0),this.vars.repeatRefresh&&!m&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Oe(this,m)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(h=function(t,e,i){var s;if(i>e)for(s=t._first;s&&s._start<=i;){if("isPause"===s.data&&s._start>e)return s;s=s._next}else for(s=t._last;s&&s._start>=i;){if("isPause"===s.data&&s._start<e)return s;s=s._prev}}(this,Dt(f),Dt(s)),h&&(b-=s-(s=h._start))),this._tTime=b,this._time=s,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,f=0),!f&&s&&!e&&(me(this,"onStart"),this._tTime!==b))return this;if(s>=f&&t>=0)for(n=this._first;n;){if(r=n._next,(n._act||s>=n._start)&&n._ts&&h!==n){if(n.parent!==this)return this.render(t,e,i);if(n.render(n._ts>0?(s-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(s-n._start)*n._ts,e,i),s!==this._time||!this._ts&&!l){h=0,r&&(b+=this._zTime=-1e-8);break}}n=r}else{n=this._last;for(var x=t<0?t:s;n;){if(r=n._prev,(n._act||x<=n._end)&&n._ts&&h!==n){if(n.parent!==this)return this.render(t,e,i);if(n.render(n._ts>0?(x-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(x-n._start)*n._ts,e,i),s!==this._time||!this._ts&&!l){h=0,r&&(b+=this._zTime=x?-1e-8:F);break}}n=r}}if(h&&!e&&(this.pause(),h.render(s>=f?0:-1e-8)._zTime=s>=f?1:-1,this._ts))return this._start=c,jt(this),this.render(t,e,i);this._onUpdate&&!e&&me(this,"onUpdate",!0),(b===y&&y>=this.totalDuration()||!b&&f)&&(c!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||((t||!v)&&(b===y&&this._ts>0||!b&&this._ts<0)&&Ot(this,1),e||t<0&&!f||!b&&!f&&y||(me(this,b===y&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(b<y&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(t,e){var i=this;if(j(e)||(e=Kt(this,e,t)),!(t instanceof je)){if(X(t))return t.forEach((function(t){return i.add(t,e)})),this;if(N(t))return this.addLabel(t,e);if(!z(t))return this;t=Ke.delayedCall(0,t)}return this!==t?Wt(this,t,e):this},i.getChildren=function(t,e,i,s){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===s&&(s=-P);for(var n=[],r=this._first;r;)r._start>=s&&(r instanceof Ke?e&&n.push(r):(i&&n.push(r),t&&n.push.apply(n,r.getChildren(!0,e,i)))),r=r._next;return n},i.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},i.remove=function(t){return N(t)?this.removeLabel(t):z(t)?this.killTweensOf(t):(Mt(this,t),t===this._recent&&(this._recent=this._last),Rt(this))},i.totalTime=function(e,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Dt(Ee.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,i),this._forcing=0,this):this._tTime},i.addLabel=function(t,e){return this.labels[t]=Kt(this,e),this},i.removeLabel=function(t){return delete this.labels[t],this},i.addPause=function(t,e,i){var s=Ke.delayedCall(0,e||ot,i);return s.data="isPause",this._hasPause=1,Wt(this,s,Kt(this,t))},i.removePause=function(t){var e=this._first;for(t=Kt(this,t);e;)e._start===t&&"isPause"===e.data&&Ot(e),e=e._next},i.killTweensOf=function(t,e,i){for(var s=this.getTweensOf(t,i),n=s.length;n--;)Ue!==s[n]&&s[n].kill(t,e);return this},i.getTweensOf=function(t,e){for(var i,s=[],n=ne(t),r=this._first,a=j(e);r;)r instanceof Ke?wt(r._targets,n)&&(a?(!Ue||r._initted&&r._ts)&&r.globalTime(0)<=e&&r.globalTime(r.totalDuration())>e:!e||r.isActive())&&s.push(r):(i=r.getTweensOf(n,e)).length&&s.push.apply(s,i),r=r._next;return s},i.tweenTo=function(t,e){e=e||{};var i,s=this,n=Kt(s,t),r=e,a=r.startAt,o=r.onStart,l=r.onStartParams,h=r.immediateRender,u=Ke.to(s,St({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:n,overwrite:"auto",duration:e.duration||Math.abs((n-(a&&"time"in a?a.time:s._time))/s.timeScale())||F,onStart:function(){if(s.pause(),!i){var t=e.duration||Math.abs((n-(a&&"time"in a?a.time:s._time))/s.timeScale());u._dur!==t&&$t(u,t,0,1).render(u._time,!0,!0),i=1}o&&o.apply(u,l||[])}},e));return h?u.render(0):u},i.tweenFromTo=function(t,e,i){return this.tweenTo(e,St({startAt:{time:Kt(this,t)}},i))},i.recent=function(){return this._recent},i.nextLabel=function(t){return void 0===t&&(t=this._time),pe(this,Kt(this,t))},i.previousLabel=function(t){return void 0===t&&(t=this._time),pe(this,Kt(this,t),1)},i.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+F)},i.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var s,n=this._first,r=this.labels;n;)n._start>=i&&(n._start+=t,n._end+=t),n=n._next;if(e)for(s in r)r[s]>=i&&(r[s]+=t);return Rt(this)},i.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},i.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Rt(this)},i.totalDuration=function(t){var e,i,s,n=0,r=this,a=r._last,o=P;if(arguments.length)return r.timeScale((r._repeat<0?r.duration():r.totalDuration())/(r.reversed()?-t:t));if(r._dirty){for(s=r.parent;a;)e=a._prev,a._dirty&&a.totalDuration(),(i=a._start)>o&&r._sort&&a._ts&&!r._lock?(r._lock=1,Wt(r,a,i-a._delay,1)._lock=0):o=i,i<0&&a._ts&&(n-=i,(!s&&!r._dp||s&&s.smoothChildTiming)&&(r._start+=i/r._ts,r._time-=i,r._tTime-=i),r.shiftChildren(-i,!1,-Infinity),o=0),a._end>n&&a._ts&&(n=a._end),a=e;$t(r,r===g&&r._time>n?r._time:n,1,1),r._dirty=0}return r._tDur},e.updateRoot=function(t){if(g._ts&&(Tt(g,zt(t,g)),D=Ee.frame),Ee.frame>=pt){pt+=k.autoSleep||120;var e=g._first;if((!e||!e._ts)&&k.autoSleep&&Ee._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Ee.sleep()}}},e}(je);St(Ve.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ue,We=function(t,e,i,s,n,r,a){var o,l,h,u,c,d,p,m,f=new ci(this._pt,t,e,0,1,ri,null,n),g=0,y=0;for(f.b=i,f.e=s,i+="",(p=~(s+="").indexOf("random("))&&(s=ce(s)),r&&(r(m=[i,s],t,e),i=m[0],s=m[1]),l=i.match(K)||[];o=K.exec(s);)u=o[0],c=s.substring(g,o.index),h?h=(h+1)%5:"rgba("===c.substr(-5)&&(h=1),u!==l[y++]&&(d=parseFloat(l[y-1])||0,f._pt={_next:f._pt,p:c||1===y?c:",",s:d,c:"="===u.charAt(1)?parseFloat(u.substr(2))*("-"===u.charAt(0)?-1:1):parseFloat(u)-d,m:h&&h<4?Math.round:0},g=K.lastIndex);return f.c=g<s.length?s.substring(g,s.length):"",f.fp=a,(Z.test(s)||p)&&(f.e=0),this._pt=f,f},qe=function(t,e,i,s,n,r,a,o,l){z(s)&&(s=s(n||0,t,r));var h,u=t[e],c="get"!==i?i:z(u)?l?t[e.indexOf("set")||!z(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():u,d=z(u)?l?ti:Je:Ze;if(N(s)&&(~s.indexOf("random(")&&(s=ce(s)),"="===s.charAt(1)&&((h=parseFloat(c)+parseFloat(s.substr(2))*("-"===s.charAt(0)?-1:1)+(ee(c)||0))||0===h)&&(s=h)),c!==s)return isNaN(c*s)||""===s?(!u&&!(e in t)&&nt(e,s),We.call(this,t,e,c,s,d,o||k.stringFilter,l)):(h=new ci(this._pt,t,e,+c||0,s-(c||0),"boolean"==typeof u?ni:si,0,d),l&&(h.fp=l),a&&h.modifier(a,this,t),this._pt=h)},He=function(t,e,i,s,n,r){var a,o,l,h;if(ct[t]&&!1!==(a=new ct[t]).init(n,a.rawVars?e[t]:function(t,e,i,s,n){if(z(t)&&(t=$e(t,n,e,i,s)),!U(t)||t.style&&t.nodeType||X(t)||Y(t))return N(t)?$e(t,n,e,i,s):t;var r,a={};for(r in t)a[r]=$e(t[r],n,e,i,s);return a}(e[t],s,n,r,i),i,s,r)&&(i._pt=o=new ci(i._pt,n,t,0,1,a.render,a,0,a.priority),i!==w))for(l=i._ptLookup[i._targets.indexOf(n)],h=a._props.length;h--;)l[a._props[h]]=o;return a},Ye=function t(e,i){var s,n,r,a,o,l,h,u,c,d,p,m,y,v=e.vars,b=v.ease,_=v.startAt,D=v.immediateRender,w=v.lazy,x=v.onUpdate,T=v.onUpdateParams,C=v.callbackScope,E=v.runBackwards,S=v.yoyoEase,k=v.keyframes,M=v.autoRevert,O=e._dur,R=e._startAt,L=e._targets,I=e.parent,B=I&&"nested"===I.data?I.parent._targets:L,N="auto"===e._overwrite&&!f,z=e.timeline;if(z&&(!k||!b)&&(b="none"),e._ease=Re(b,A.ease),e._yEase=S?Me(Re(!0===S?b:S,A.ease)):0,S&&e._yoyo&&!e._repeat&&(S=e._yEase,e._yEase=e._ease,e._ease=S),e._from=!z&&!!v.runBackwards,!z||k&&!v.stagger){if(m=(u=L[0]?yt(L[0]).harness:0)&&v[u.prop],s=Pt(v,lt),R&&Ot(R.render(-1,!0)),_)if(Ot(e._startAt=Ke.set(L,St({data:"isStart",overwrite:!1,parent:I,immediateRender:!0,lazy:W(w),startAt:null,delay:0,onUpdate:x,onUpdateParams:T,callbackScope:C,stagger:0},_))),i<0&&!D&&!M&&e._startAt.render(-1,!0),D){if(i>0&&!M&&(e._startAt=0),O&&i<=0)return void(i&&(e._zTime=i))}else!1===M&&(e._startAt=0);else if(E&&O)if(R)!M&&(e._startAt=0);else if(i&&(D=!1),r=St({overwrite:!1,data:"isFromStart",lazy:D&&W(w),immediateRender:D,stagger:0,parent:I},s),m&&(r[u.prop]=m),Ot(e._startAt=Ke.set(L,r)),i<0&&e._startAt.render(-1,!0),e._zTime=i,D){if(!i)return}else t(e._startAt,F);for(e._pt=0,w=O&&W(w)||w&&!O,n=0;n<L.length;n++){if(h=(o=L[n])._gsap||gt(L)[n]._gsap,e._ptLookup[n]=d={},ut[h.id]&&ht.length&&xt(),p=B===L?n:B.indexOf(o),u&&!1!==(c=new u).init(o,m||s,e,p,B)&&(e._pt=a=new ci(e._pt,o,c.name,0,1,c.render,c,0,c.priority),c._props.forEach((function(t){d[t]=a})),c.priority&&(l=1)),!u||m)for(r in s)ct[r]&&(c=He(r,s,e,p,o,B))?c.priority&&(l=1):d[r]=a=qe.call(e,o,r,"get",s[r],p,B,0,v.stringFilter);e._op&&e._op[n]&&e.kill(o,e._op[n]),N&&e._pt&&(Ue=e,g.killTweensOf(o,d,e.globalTime(i)),y=!e.parent,Ue=0),e._pt&&w&&(ut[h.id]=1)}l&&ui(e),e._onInit&&e._onInit(e)}e._onUpdate=x,e._initted=(!e._op||e._pt)&&!y,k&&i<=0&&z.render(P,!0,!0)},Xe=function(t,e,i,s){var n,r,a=e.ease||s||"power1.inOut";if(X(e))r=i[t]||(i[t]=[]),e.forEach((function(t,i){return r.push({t:i/(e.length-1)*100,v:t,e:a})}));else for(n in e)r=i[n]||(i[n]=[]),"ease"===n||r.push({t:parseFloat(t),v:e[n],e:a})},$e=function(t,e,i,s,n){return z(t)?t.call(e,i,s,n):N(t)&&~t.indexOf("random(")?ce(t):t},Ge=ft+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Qe={};bt(Ge+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return Qe[t]=1}));var Ke=function(t){function e(e,i,s,n){var r;"number"==typeof i&&(s.duration=i,i=s,s=null);var a,o,l,h,u,c,d,m,y=(r=t.call(this,n?i:Ft(i))||this).vars,v=y.duration,b=y.delay,_=y.immediateRender,D=y.stagger,w=y.overwrite,x=y.keyframes,T=y.defaults,C=y.scrollTrigger,E=y.yoyoEase,S=i.parent||g,A=(X(e)||Y(e)?j(e[0]):"length"in i)?[e]:ne(e);if(r._targets=A.length?gt(A):rt("GSAP target "+e+" not found. https://greensock.com",!k.nullTargetWarn)||[],r._ptLookup=[],r._overwrite=w,x||D||H(v)||H(b)){if(i=r.vars,(a=r.timeline=new Ve({data:"nested",defaults:T||{}})).kill(),a.parent=a._dp=p(r),a._start=0,D||H(v)||H(b)){if(h=A.length,d=D&&ae(D),U(D))for(u in D)~Ge.indexOf(u)&&(m||(m={}),m[u]=D[u]);for(o=0;o<h;o++)(l=Pt(i,Qe)).stagger=0,E&&(l.yoyoEase=E),m&&kt(l,m),c=A[o],l.duration=+$e(v,p(r),o,c,A),l.delay=(+$e(b,p(r),o,c,A)||0)-r._delay,!D&&1===h&&l.delay&&(r._delay=b=l.delay,r._start+=b,l.delay=0),a.to(c,l,d?d(o,c,A):0),a._ease=ke.none;a.duration()?v=b=0:r.timeline=0}else if(x){Ft(St(a.vars.defaults,{ease:"none"})),a._ease=Re(x.ease||i.ease||"none");var P,F,M,O=0;if(X(x))x.forEach((function(t){return a.to(A,t,">")}));else{for(u in l={},x)"ease"===u||"easeEach"===u||Xe(u,x[u],l,x.easeEach);for(u in l)for(P=l[u].sort((function(t,e){return t.t-e.t})),O=0,o=0;o<P.length;o++)(M={ease:(F=P[o]).e,duration:(F.t-(o?P[o-1].t:0))/100*v})[u]=F.v,a.to(A,M,O),O+=M.duration;a.duration()<v&&a.to({},{duration:v-a.duration()})}}v||r.duration(v=a.duration())}else r.timeline=0;return!0!==w||f||(Ue=p(r),g.killTweensOf(A),Ue=0),Wt(S,p(r),s),i.reversed&&r.reverse(),i.paused&&r.paused(!0),(_||!v&&!x&&r._start===Dt(S._time)&&W(_)&&It(p(r))&&"nested"!==S.data)&&(r._tTime=-1e-8,r.render(Math.max(0,-b))),C&&qt(p(r),C),r}m(e,t);var i=e.prototype;return i.render=function(t,e,i){var s,n,r,a,o,l,h,u,c,d=this._time,p=this._tDur,m=this._dur,f=t>p-F&&t>=0?p:t<F?0:t;if(m){if(f!==this._tTime||!t||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=t<0){if(s=f,u=this.timeline,this._repeat){if(a=m+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,i);if(s=Dt(f%a),f===p?(r=this._repeat,s=m):((r=~~(f/a))&&r===f/a&&(s=m,r--),s>m&&(s=m)),(l=this._yoyo&&1&r)&&(c=this._yEase,s=m-s),o=Nt(this._tTime,a),s===d&&!i&&this._initted)return this;r!==o&&(u&&this._yEase&&Oe(u,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=i=1,this.render(Dt(a*r),!0).invalidate()._lock=0))}if(!this._initted){if(Ht(this,t<0?t:s,i,e))return this._tTime=0,this;if(m!==this._dur)return this.render(t,e,i)}if(this._tTime=f,this._time=s,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=h=(c||this._ease)(s/m),this._from&&(this.ratio=h=1-h),s&&!d&&!e&&(me(this,"onStart"),this._tTime!==f))return this;for(n=this._pt;n;)n.r(h,n.d),n=n._next;u&&u.render(t<0?t:!s&&l?-1e-8:u._dur*u._ease(s/this._dur),e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,i),me(this,"onUpdate")),this._repeat&&r!==o&&this.vars.onRepeat&&!e&&this.parent&&me(this,"onRepeat"),f!==this._tDur&&f||this._tTime!==f||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!m)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&Ot(this,1),e||t<0&&!d||!f&&!d||(me(this,f===p?"onComplete":"onReverseComplete",!0),this._prom&&!(f<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,i,s){var n,r,a,o=t.ratio,l=e<0||!e&&(!t._start&&Yt(t)&&(t._initted||!Xt(t))||(t._ts<0||t._dp._ts<0)&&!Xt(t))?0:1,h=t._rDelay,u=0;if(h&&t._repeat&&(u=te(0,t._tDur,e),r=Nt(u,h),t._yoyo&&1&r&&(l=1-l),r!==Nt(t._tTime,h)&&(o=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==o||s||t._zTime===F||!e&&t._zTime){if(!t._initted&&Ht(t,e,s,i))return;for(a=t._zTime,t._zTime=e||(i?F:0),i||(i=e&&!a),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=u,n=t._pt;n;)n.r(l,n.d),n=n._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!i&&me(t,"onUpdate"),u&&t._repeat&&!i&&t.parent&&me(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&Ot(t,1),i||(me(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,i);return this},i.targets=function(){return this._targets},i.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},i.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?fe(this):this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Ue&&!0!==Ue.vars.overwrite)._first||fe(this),this.parent&&i!==this.timeline.totalDuration()&&$t(this,this._dur*this.timeline._tDur/i,0,1),this}var s,n,r,a,o,l,h,u=this._targets,c=t?ne(t):u,d=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var i=t.length,s=i===e.length;s&&i--&&t[i]===e[i];);return i<0}(u,c))return"all"===e&&(this._pt=0),fe(this);for(s=this._op=this._op||[],"all"!==e&&(N(e)&&(o={},bt(e,(function(t){return o[t]=1})),e=o),e=function(t,e){var i,s,n,r,a=t[0]?yt(t[0]).harness:0,o=a&&a.aliases;if(!o)return e;for(s in i=kt({},e),o)if(s in i)for(n=(r=o[s].split(",")).length;n--;)i[r[n]]=i[s];return i}(u,e)),h=u.length;h--;)if(~c.indexOf(u[h]))for(o in n=d[h],"all"===e?(s[h]=e,a=n,r={}):(r=s[h]=s[h]||{},a=e),a)(l=n&&n[o])&&("kill"in l.d&&!0!==l.d.kill(o)||Mt(this,l,"_pt"),delete n[o]),"all"!==r&&(r[o]=1);return this._initted&&!this._pt&&p&&fe(this),this},e.to=function(t,i){return new e(t,i,arguments[2])},e.from=function(t,e){return Zt(1,arguments)},e.delayedCall=function(t,i,s,n){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:i,onReverseComplete:i,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:n})},e.fromTo=function(t,e,i){return Zt(2,arguments)},e.set=function(t,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(t,i)},e.killTweensOf=function(t,e,i){return g.killTweensOf(t,e,i)},e}(je);St(Ke.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),bt("staggerTo,staggerFrom,staggerFromTo",(function(t){Ke[t]=function(){var e=new Ve,i=ie.call(arguments,0);return i.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,i)}}));var Ze=function(t,e,i){return t[e]=i},Je=function(t,e,i){return t[e](i)},ti=function(t,e,i,s){return t[e](s.fp,i)},ei=function(t,e,i){return t.setAttribute(e,i)},ii=function(t,e){return z(t[e])?Je:V(t[e])&&t.setAttribute?ei:Ze},si=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},ni=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},ri=function(t,e){var i=e._pt,s="";if(!t&&e.b)s=e.b;else if(1===t&&e.e)s=e.e;else{for(;i;)s=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+s,i=i._next;s+=e.c}e.set(e.t,e.p,s,e)},ai=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},oi=function(t,e,i,s){for(var n,r=this._pt;r;)n=r._next,r.p===s&&r.modifier(t,e,i),r=n},li=function(t){for(var e,i,s=this._pt;s;)i=s._next,s.p===t&&!s.op||s.op===t?Mt(this,s,"_pt"):s.dep||(e=1),s=i;return!e},hi=function(t,e,i,s){s.mSet(t,e,s.m.call(s.tween,i,s.mt),s)},ui=function(t){for(var e,i,s,n,r=t._pt;r;){for(e=r._next,i=s;i&&i.pr>r.pr;)i=i._next;(r._prev=i?i._prev:n)?r._prev._next=r:s=r,(r._next=i)?i._prev=r:n=r,r=e}t._pt=s},ci=function(){function t(t,e,i,s,n,r,a,o,l){this.t=e,this.s=s,this.c=n,this.p=i,this.r=r||si,this.d=a||this,this.set=o||Ze,this.pr=l||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=hi,this.m=t,this.mt=i,this.tween=e},t}();bt(ft+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return lt[t]=1})),et.TweenMax=et.TweenLite=Ke,et.TimelineLite=et.TimelineMax=Ve,g=new Ve({sortChildren:!1,defaults:A,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),k.stringFilter=Ce;var di={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((function(t){return ge(t)}))},timeline:function(t){return new Ve(t)},getTweensOf:function(t,e){return g.getTweensOf(t,e)},getProperty:function(t,e,i,s){N(t)&&(t=ne(t)[0]);var n=yt(t||{}).get,r=i?Et:Ct;return"native"===i&&(i=""),t?e?r((ct[e]&&ct[e].get||n)(t,e,i,s)):function(e,i,s){return r((ct[e]&&ct[e].get||n)(t,e,i,s))}:t},quickSetter:function(t,e,i){if((t=ne(t)).length>1){var s=t.map((function(t){return fi.quickSetter(t,e,i)})),n=s.length;return function(t){for(var e=n;e--;)s[e](t)}}t=t[0]||{};var r=ct[e],a=yt(t),o=a.harness&&(a.harness.aliases||{})[e]||e,l=r?function(e){var s=new r;w._pt=0,s.init(t,i?e+i:e,w,0,[t]),s.render(1,s),w._pt&&ai(1,w)}:a.set(t,o);return r?l:function(e){return l(t,o,i?e+i:e,a,1)}},isTweening:function(t){return g.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Re(t.ease,A.ease)),At(A,t||{})},config:function(t){return At(k,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,s=t.plugins,n=t.defaults,r=t.extendTimeline;(s||"").split(",").forEach((function(t){return t&&!ct[t]&&!et[t]&&rt(e+" effect requires "+t+" plugin.")})),dt[e]=function(t,e,s){return i(ne(t),St(e||{},n),s)},r&&(Ve.prototype[e]=function(t,i,s){return this.add(dt[e](t,U(i)?i:(s=i)&&{},this),s)})},registerEase:function(t,e){ke[t]=Re(e)},parseEase:function(t,e){return arguments.length?Re(t,e):ke},getById:function(t){return g.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var i,s,n=new Ve(t);for(n.smoothChildTiming=W(t.smoothChildTiming),g.remove(n),n._dp=0,n._time=n._tTime=g._time,i=g._first;i;)s=i._next,!e&&!i._dur&&i instanceof Ke&&i.vars.onComplete===i._targets[0]||Wt(n,i,i._start-i._delay),i=s;return Wt(g,n,0),n},utils:{wrap:function t(e,i,s){var n=i-e;return X(e)?ue(e,t(0,e.length),i):Jt(s,(function(t){return(n+(t-e)%n)%n+e}))},wrapYoyo:function t(e,i,s){var n=i-e,r=2*n;return X(e)?ue(e,t(0,e.length-1),i):Jt(s,(function(t){return e+((t=(r+(t-e)%r)%r||0)>n?r-t:t)}))},distribute:ae,random:he,snap:le,normalize:function(t,e,i){return de(t,e,0,1,i)},getUnit:ee,clamp:function(t,e,i){return Jt(i,(function(i){return te(t,e,i)}))},splitColor:_e,toArray:ne,selector:function(t){return t=ne(t)[0]||rt("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return ne(e,i.querySelectorAll?i:i===t?rt("Invalid scope")||b.createElement("div"):t)}},mapRange:de,pipe:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(i){return t(parseFloat(i))+(e||ee(i))}},interpolate:function t(e,i,s,n){var r=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!r){var a,o,l,h,u,c=N(e),d={};if(!0===s&&(n=1)&&(s=null),c)e={p:e},i={p:i};else if(X(e)&&!X(i)){for(l=[],h=e.length,u=h-2,o=1;o<h;o++)l.push(t(e[o-1],e[o]));h--,r=function(t){t*=h;var e=Math.min(u,~~t);return l[e](t-e)},s=i}else n||(e=kt(X(e)?[]:{},e));if(!l){for(a in i)qe.call(d,e,a,"get",i[a]);r=function(t){return ai(t,d)||(c?e.p:e)}}}return Jt(s,r)},shuffle:re},install:st,effects:dt,ticker:Ee,updateRoot:Ve.updateRoot,plugins:ct,globalTimeline:g,core:{PropTween:ci,globals:at,Tween:Ke,Timeline:Ve,Animation:je,getCache:yt,_removeLinkedListItem:Mt,suppressOverwrites:function(t){return f=t}}};bt("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return di[t]=Ke[t]})),Ee.add(Ve.updateRoot),w=di.to({},{duration:0});var pi=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},mi=function(t,e){return{name:t,rawVars:1,init:function(t,i,s){s._onInit=function(t){var s,n;if(N(i)&&(s={},bt(i,(function(t){return s[t]=1})),i=s),e){for(n in s={},i)s[n]=e(i[n]);i=s}!function(t,e){var i,s,n,r=t._targets;for(i in e)for(s=r.length;s--;)(n=t._ptLookup[s][i])&&(n=n.d)&&(n._pt&&(n=pi(n,i)),n&&n.modifier&&n.modifier(e[i],t,r[s],i))}(t,i)}}}},fi=di.registerPlugin({name:"attr",init:function(t,e,i,s,n){var r,a;for(r in e)(a=this.add(t,"setAttribute",(t.getAttribute(r)||0)+"",e[r],s,n,0,0,r))&&(a.op=r),this._props.push(r)}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i])}},mi("roundProps",oe),mi("modifiers"),mi("snap",le))||di;Ke.version=Ve.version=fi.version="3.9.1",_=1,q()&&Se(),ke.Power0,ke.Power1,ke.Power2,ke.Power3,ke.Power4,ke.Linear,ke.Quad,ke.Cubic,ke.Quart,ke.Quint,ke.Strong,ke.Elastic,ke.Back,ke.SteppedEase,ke.Bounce,ke.Sine,ke.Expo,ke.Circ;var gi,yi,vi,bi,_i,Di,wi,xi={},Ti=180/Math.PI,Ci=Math.PI/180,Ei=Math.atan2,Si=/([A-Z])/g,ki=/(?:left|right|width|margin|padding|x)/i,Ai=/[\s,\(]\S/,Pi={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Fi=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Mi=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Oi=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},Ri=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},Li=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Ii=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Bi=function(t,e,i){return t.style[e]=i},Ni=function(t,e,i){return t.style.setProperty(e,i)},zi=function(t,e,i){return t._gsap[e]=i},ji=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},Vi=function(t,e,i,s,n){var r=t._gsap;r.scaleX=r.scaleY=i,r.renderTransform(n,r)},Ui=function(t,e,i,s,n){var r=t._gsap;r[e]=i,r.renderTransform(n,r)},Wi="transform",qi=Wi+"Origin",Hi=function(t,e){var i=yi.createElementNS?yi.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):yi.createElement(t);return i.style?i:yi.createElement(t)},Yi=function t(e,i,s){var n=getComputedStyle(e);return n[i]||n.getPropertyValue(i.replace(Si,"-$1").toLowerCase())||n.getPropertyValue(i)||!s&&t(e,$i(i)||i,1)||""},Xi="O,Moz,ms,Ms,Webkit".split(","),$i=function(t,e,i){var s=(e||_i).style,n=5;if(t in s&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);n--&&!(Xi[n]+t in s););return n<0?null:(3===n?"ms":n>=0?Xi[n]:"")+t},Gi=function(){"undefined"!=typeof window&&window.document&&(gi=window,yi=gi.document,vi=yi.documentElement,_i=Hi("div")||{style:{}},Hi("div"),Wi=$i(Wi),qi=Wi+"Origin",_i.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",wi=!!$i("perspective"),bi=1)},Qi=function t(e){var i,s=Hi("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,a=this.style.cssText;if(vi.appendChild(s),s.appendChild(this),this.style.display="block",e)try{i=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(i=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),vi.removeChild(s),this.style.cssText=a,i},Ki=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},Zi=function(t){var e;try{e=t.getBBox()}catch(i){e=Qi.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Qi||(e=Qi.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+Ki(t,["x","cx","x1"])||0,y:+Ki(t,["y","cy","y1"])||0,width:0,height:0}},Ji=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Zi(t))},ts=function(t,e){if(e){var i=t.style;e in xi&&e!==qi&&(e=Wi),i.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),i.removeProperty(e.replace(Si,"-$1").toLowerCase())):i.removeAttribute(e)}},es=function(t,e,i,s,n,r){var a=new ci(t._pt,e,i,0,1,r?Ii:Li);return t._pt=a,a.b=s,a.e=n,t._props.push(i),a},is={deg:1,rad:1,turn:1},ss=function t(e,i,s,n){var r,a,o,l,h=parseFloat(s)||0,u=(s+"").trim().substr((h+"").length)||"px",c=_i.style,d=ki.test(i),p="svg"===e.tagName.toLowerCase(),m=(p?"client":"offset")+(d?"Width":"Height"),f=100,g="px"===n,y="%"===n;return n===u||!h||is[n]||is[u]?h:("px"!==u&&!g&&(h=t(e,i,s,"px")),l=e.getCTM&&Ji(e),!y&&"%"!==u||!xi[i]&&!~i.indexOf("adius")?(c[d?"width":"height"]=f+(g?u:n),a=~i.indexOf("adius")||"em"===n&&e.appendChild&&!p?e:e.parentNode,l&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==yi&&a.appendChild||(a=yi.body),(o=a._gsap)&&y&&o.width&&d&&o.time===Ee.time?_t(h/o.width*f):((y||"%"===u)&&(c.position=Yi(e,"position")),a===e&&(c.position="static"),a.appendChild(_i),r=_i[m],a.removeChild(_i),c.position="absolute",d&&y&&((o=yt(a)).time=Ee.time,o.width=a[m]),_t(g?r*h/f:r&&h?f/r*h:0))):(r=l?e.getBBox()[d?"width":"height"]:e[m],_t(y?h/r*f:h/100*r)))},ns=function(t,e,i,s){var n;return bi||Gi(),e in Pi&&"transform"!==e&&~(e=Pi[e]).indexOf(",")&&(e=e.split(",")[0]),xi[e]&&"transform"!==e?(n=fs(t,s),n="transformOrigin"!==e?n[e]:n.svg?n.origin:gs(Yi(t,qi))+" "+n.zOrigin+"px"):(!(n=t.style[e])||"auto"===n||s||~(n+"").indexOf("calc("))&&(n=ls[e]&&ls[e](t,e,i)||Yi(t,e)||vt(t,e)||("opacity"===e?1:0)),i&&!~(n+"").trim().indexOf(" ")?ss(t,e,n,i)+i:n},rs=function(t,e,i,s){if(!i||"none"===i){var n=$i(e,t,1),r=n&&Yi(t,n,1);r&&r!==i?(e=n,i=r):"borderColor"===e&&(i=Yi(t,"borderTopColor"))}var a,o,l,h,u,c,d,p,m,f,g,y,v=new ci(this._pt,t.style,e,0,1,ri),b=0,_=0;if(v.b=i,v.e=s,i+="","auto"==(s+="")&&(t.style[e]=s,s=Yi(t,e)||s,t.style[e]=i),Ce(a=[i,s]),s=a[1],l=(i=a[0]).match(Q)||[],(s.match(Q)||[]).length){for(;o=Q.exec(s);)d=o[0],m=s.substring(b,o.index),u?u=(u+1)%5:"rgba("!==m.substr(-5)&&"hsla("!==m.substr(-5)||(u=1),d!==(c=l[_++]||"")&&(h=parseFloat(c)||0,g=c.substr((h+"").length),(y="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),p=parseFloat(d),f=d.substr((p+"").length),b=Q.lastIndex-f.length,f||(f=f||k.units[e]||g,b===s.length&&(s+=f,v.e+=f)),g!==f&&(h=ss(t,e,c,f)||0),v._pt={_next:v._pt,p:m||1===_?m:",",s:h,c:y?y*p:p-h,m:u&&u<4||"zIndex"===e?Math.round:0});v.c=b<s.length?s.substring(b,s.length):""}else v.r="display"===e&&"none"===s?Ii:Li;return Z.test(s)&&(v.e=0),this._pt=v,v},as={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},os=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,s,n,r=e.t,a=r.style,o=e.u,l=r._gsap;if("all"===o||!0===o)a.cssText="",s=1;else for(n=(o=o.split(",")).length;--n>-1;)i=o[n],xi[i]&&(s=1,i="transformOrigin"===i?qi:Wi),ts(r,i);s&&(ts(r,Wi),l&&(l.svg&&r.removeAttribute("transform"),fs(r,1),l.uncache=1))}},ls={clearProps:function(t,e,i,s,n){if("isFromStart"!==n.data){var r=t._pt=new ci(t._pt,e,i,0,0,os);return r.u=s,r.pr=-10,r.tween=n,t._props.push(i),1}}},hs=[1,0,0,1,0,0],us={},cs=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},ds=function(t){var e=Yi(t,Wi);return cs(e)?hs:e.substr(7).match(G).map(_t)},ps=function(t,e){var i,s,n,r,a=t._gsap||yt(t),o=t.style,l=ds(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(n=t.transform.baseVal.consolidate().matrix).a,n.b,n.c,n.d,n.e,n.f]).join(",")?hs:l:(l!==hs||t.offsetParent||t===vi||a.svg||(n=o.display,o.display="block",(i=t.parentNode)&&t.offsetParent||(r=1,s=t.nextSibling,vi.appendChild(t)),l=ds(t),n?o.display=n:ts(t,"display"),r&&(s?i.insertBefore(t,s):i?i.appendChild(t):vi.removeChild(t))),e&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},ms=function(t,e,i,s,n,r){var a,o,l,h=t._gsap,u=n||ps(t,!0),c=h.xOrigin||0,d=h.yOrigin||0,p=h.xOffset||0,m=h.yOffset||0,f=u[0],g=u[1],y=u[2],v=u[3],b=u[4],_=u[5],D=e.split(" "),w=parseFloat(D[0])||0,x=parseFloat(D[1])||0;i?u!==hs&&(o=f*v-g*y)&&(l=w*(-g/o)+x*(f/o)-(f*_-g*b)/o,w=w*(v/o)+x*(-y/o)+(y*_-v*b)/o,x=l):(w=(a=Zi(t)).x+(~D[0].indexOf("%")?w/100*a.width:w),x=a.y+(~(D[1]||D[0]).indexOf("%")?x/100*a.height:x)),s||!1!==s&&h.smooth?(b=w-c,_=x-d,h.xOffset=p+(b*f+_*y)-b,h.yOffset=m+(b*g+_*v)-_):h.xOffset=h.yOffset=0,h.xOrigin=w,h.yOrigin=x,h.smooth=!!s,h.origin=e,h.originIsAbsolute=!!i,t.style[qi]="0px 0px",r&&(es(r,h,"xOrigin",c,w),es(r,h,"yOrigin",d,x),es(r,h,"xOffset",p,h.xOffset),es(r,h,"yOffset",m,h.yOffset)),t.setAttribute("data-svg-origin",w+" "+x)},fs=function(t,e){var i=t._gsap||new ze(t);if("x"in i&&!e&&!i.uncache)return i;var s,n,r,a,o,l,h,u,c,d,p,m,f,g,y,v,b,_,D,w,x,T,C,E,S,A,P,F,M,O,R,L,I=t.style,B=i.scaleX<0,N="px",z="deg",j=Yi(t,qi)||"0";return s=n=r=l=h=u=c=d=p=0,a=o=1,i.svg=!(!t.getCTM||!Ji(t)),g=ps(t,i.svg),i.svg&&(E=(!i.uncache||"0px 0px"===j)&&!e&&t.getAttribute("data-svg-origin"),ms(t,E||j,!!E||i.originIsAbsolute,!1!==i.smooth,g)),m=i.xOrigin||0,f=i.yOrigin||0,g!==hs&&(_=g[0],D=g[1],w=g[2],x=g[3],s=T=g[4],n=C=g[5],6===g.length?(a=Math.sqrt(_*_+D*D),o=Math.sqrt(x*x+w*w),l=_||D?Ei(D,_)*Ti:0,(c=w||x?Ei(w,x)*Ti+l:0)&&(o*=Math.abs(Math.cos(c*Ci))),i.svg&&(s-=m-(m*_+f*w),n-=f-(m*D+f*x))):(L=g[6],O=g[7],P=g[8],F=g[9],M=g[10],R=g[11],s=g[12],n=g[13],r=g[14],h=(y=Ei(L,M))*Ti,y&&(E=T*(v=Math.cos(-y))+P*(b=Math.sin(-y)),S=C*v+F*b,A=L*v+M*b,P=T*-b+P*v,F=C*-b+F*v,M=L*-b+M*v,R=O*-b+R*v,T=E,C=S,L=A),u=(y=Ei(-w,M))*Ti,y&&(v=Math.cos(-y),R=x*(b=Math.sin(-y))+R*v,_=E=_*v-P*b,D=S=D*v-F*b,w=A=w*v-M*b),l=(y=Ei(D,_))*Ti,y&&(E=_*(v=Math.cos(y))+D*(b=Math.sin(y)),S=T*v+C*b,D=D*v-_*b,C=C*v-T*b,_=E,T=S),h&&Math.abs(h)+Math.abs(l)>359.9&&(h=l=0,u=180-u),a=_t(Math.sqrt(_*_+D*D+w*w)),o=_t(Math.sqrt(C*C+L*L)),y=Ei(T,C),c=Math.abs(y)>2e-4?y*Ti:0,p=R?1/(R<0?-R:R):0),i.svg&&(E=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!cs(Yi(t,Wi)),E&&t.setAttribute("transform",E))),Math.abs(c)>90&&Math.abs(c)<270&&(B?(a*=-1,c+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,c+=c<=0?180:-180)),i.x=s-((i.xPercent=s&&(i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-s)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+N,i.y=n-((i.yPercent=n&&(i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-n)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+N,i.z=r+N,i.scaleX=_t(a),i.scaleY=_t(o),i.rotation=_t(l)+z,i.rotationX=_t(h)+z,i.rotationY=_t(u)+z,i.skewX=c+z,i.skewY=d+z,i.transformPerspective=p+N,(i.zOrigin=parseFloat(j.split(" ")[2])||0)&&(I[qi]=gs(j)),i.xOffset=i.yOffset=0,i.force3D=k.force3D,i.renderTransform=i.svg?xs:wi?ws:vs,i.uncache=0,i},gs=function(t){return(t=t.split(" "))[0]+" "+t[1]},ys=function(t,e,i){var s=ee(e);return _t(parseFloat(e)+parseFloat(ss(t,"x",i+"px",s)))+s},vs=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,ws(t,e)},bs="0deg",_s="0px",Ds=") ",ws=function(t,e){var i=e||this,s=i.xPercent,n=i.yPercent,r=i.x,a=i.y,o=i.z,l=i.rotation,h=i.rotationY,u=i.rotationX,c=i.skewX,d=i.skewY,p=i.scaleX,m=i.scaleY,f=i.transformPerspective,g=i.force3D,y=i.target,v=i.zOrigin,b="",_="auto"===g&&t&&1!==t||!0===g;if(v&&(u!==bs||h!==bs)){var D,w=parseFloat(h)*Ci,x=Math.sin(w),T=Math.cos(w);w=parseFloat(u)*Ci,D=Math.cos(w),r=ys(y,r,x*D*-v),a=ys(y,a,-Math.sin(w)*-v),o=ys(y,o,T*D*-v+v)}f!==_s&&(b+="perspective("+f+Ds),(s||n)&&(b+="translate("+s+"%, "+n+"%) "),(_||r!==_s||a!==_s||o!==_s)&&(b+=o!==_s||_?"translate3d("+r+", "+a+", "+o+") ":"translate("+r+", "+a+Ds),l!==bs&&(b+="rotate("+l+Ds),h!==bs&&(b+="rotateY("+h+Ds),u!==bs&&(b+="rotateX("+u+Ds),c===bs&&d===bs||(b+="skew("+c+", "+d+Ds),1===p&&1===m||(b+="scale("+p+", "+m+Ds),y.style[Wi]=b||"translate(0, 0)"},xs=function(t,e){var i,s,n,r,a,o=e||this,l=o.xPercent,h=o.yPercent,u=o.x,c=o.y,d=o.rotation,p=o.skewX,m=o.skewY,f=o.scaleX,g=o.scaleY,y=o.target,v=o.xOrigin,b=o.yOrigin,_=o.xOffset,D=o.yOffset,w=o.forceCSS,x=parseFloat(u),T=parseFloat(c);d=parseFloat(d),p=parseFloat(p),(m=parseFloat(m))&&(p+=m=parseFloat(m),d+=m),d||p?(d*=Ci,p*=Ci,i=Math.cos(d)*f,s=Math.sin(d)*f,n=Math.sin(d-p)*-g,r=Math.cos(d-p)*g,p&&(m*=Ci,a=Math.tan(p-m),n*=a=Math.sqrt(1+a*a),r*=a,m&&(a=Math.tan(m),i*=a=Math.sqrt(1+a*a),s*=a)),i=_t(i),s=_t(s),n=_t(n),r=_t(r)):(i=f,r=g,s=n=0),(x&&!~(u+"").indexOf("px")||T&&!~(c+"").indexOf("px"))&&(x=ss(y,"x",u,"px"),T=ss(y,"y",c,"px")),(v||b||_||D)&&(x=_t(x+v-(v*i+b*n)+_),T=_t(T+b-(v*s+b*r)+D)),(l||h)&&(a=y.getBBox(),x=_t(x+l/100*a.width),T=_t(T+h/100*a.height)),a="matrix("+i+","+s+","+n+","+r+","+x+","+T+")",y.setAttribute("transform",a),w&&(y.style[Wi]=a)},Ts=function(t,e,i,s,n,r){var a,o,l=360,h=N(n),u=parseFloat(n)*(h&&~n.indexOf("rad")?Ti:1),c=r?u*r:u-s,d=s+c+"deg";return h&&("short"===(a=n.split("_")[1])&&(c%=l)!=c%180&&(c+=c<0?l:-360),"cw"===a&&c<0?c=(c+36e9)%l-~~(c/l)*l:"ccw"===a&&c>0&&(c=(c-36e9)%l-~~(c/l)*l)),t._pt=o=new ci(t._pt,e,i,s,c,Mi),o.e=d,o.u="deg",t._props.push(i),o},Cs=function(t,e){for(var i in e)t[i]=e[i];return t},Es=function(t,e,i){var s,n,r,a,o,l,h,u=Cs({},i._gsap),c=i.style;for(n in u.svg?(r=i.getAttribute("transform"),i.setAttribute("transform",""),c[Wi]=e,s=fs(i,1),ts(i,Wi),i.setAttribute("transform",r)):(r=getComputedStyle(i)[Wi],c[Wi]=e,s=fs(i,1),c[Wi]=r),xi)(r=u[n])!==(a=s[n])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(n)<0&&(o=ee(r)!==(h=ee(a))?ss(i,n,r,h):parseFloat(r),l=parseFloat(a),t._pt=new ci(t._pt,s,n,o,l-o,Fi),t._pt.u=h||0,t._props.push(n));Cs(s,u)};bt("padding,margin,Width,Radius",(function(t,e){var i="Top",s="Right",n="Bottom",r="Left",a=(e<3?[i,s,n,r]:[i+r,i+s,n+s,n+r]).map((function(i){return e<2?t+i:"border"+i+t}));ls[e>1?"border"+t:t]=function(t,e,i,s,n){var r,o;if(arguments.length<4)return r=a.map((function(e){return ns(t,e,i)})),5===(o=r.join(" ")).split(r[0]).length?r[0]:o;r=(s+"").split(" "),o={},a.forEach((function(t,e){return o[t]=r[e]=r[e]||r[(e-1)/2|0]})),t.init(e,o,n)}}));var Ss,ks,As={name:"css",register:Gi,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,s,n){var r,a,o,l,h,u,c,d,p,m,f,g,y,v,b,_,D,w,x,T=this._props,C=t.style,E=i.vars.startAt;for(c in bi||Gi(),e)if("autoRound"!==c&&(a=e[c],!ct[c]||!He(c,e,i,s,t,n)))if(h=typeof a,u=ls[c],"function"===h&&(h=typeof(a=a.call(i,s,t,n))),"string"===h&&~a.indexOf("random(")&&(a=ce(a)),u)u(this,t,c,a,i)&&(b=1);else if("--"===c.substr(0,2))r=(getComputedStyle(t).getPropertyValue(c)+"").trim(),a+="",xe.lastIndex=0,xe.test(r)||(d=ee(r),p=ee(a)),p?d!==p&&(r=ss(t,c,r,p)+p):d&&(a+=d),this.add(C,"setProperty",r,a,s,n,0,0,c),T.push(c);else if("undefined"!==h){if(E&&c in E?(r="function"==typeof E[c]?E[c].call(i,s,t,n):E[c],N(r)&&~r.indexOf("random(")&&(r=ce(r)),ee(r+"")||(r+=k.units[c]||ee(ns(t,c))||""),"="===(r+"").charAt(1)&&(r=ns(t,c))):r=ns(t,c),l=parseFloat(r),(m="string"===h&&"="===a.charAt(1)?+(a.charAt(0)+"1"):0)&&(a=a.substr(2)),o=parseFloat(a),c in Pi&&("autoAlpha"===c&&(1===l&&"hidden"===ns(t,"visibility")&&o&&(l=0),es(this,C,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==c&&"transform"!==c&&~(c=Pi[c]).indexOf(",")&&(c=c.split(",")[0])),f=c in xi)if(g||((y=t._gsap).renderTransform&&!e.parseTransform||fs(t,e.parseTransform),v=!1!==e.smoothOrigin&&y.smooth,(g=this._pt=new ci(this._pt,C,Wi,0,1,y.renderTransform,y,0,-1)).dep=1),"scale"===c)this._pt=new ci(this._pt,y,"scaleY",y.scaleY,(m?m*o:o-y.scaleY)||0),T.push("scaleY",c),c+="X";else{if("transformOrigin"===c){D=void 0,w=void 0,x=void 0,w=(D=(_=a).split(" "))[0],x=D[1]||"50%","top"!==w&&"bottom"!==w&&"left"!==x&&"right"!==x||(_=w,w=x,x=_),D[0]=as[w]||w,D[1]=as[x]||x,a=D.join(" "),y.svg?ms(t,a,0,v,0,this):((p=parseFloat(a.split(" ")[2])||0)!==y.zOrigin&&es(this,y,"zOrigin",y.zOrigin,p),es(this,C,c,gs(r),gs(a)));continue}if("svgOrigin"===c){ms(t,a,1,v,0,this);continue}if(c in us){Ts(this,y,c,l,a,m);continue}if("smoothOrigin"===c){es(this,y,"smooth",y.smooth,a);continue}if("force3D"===c){y[c]=a;continue}if("transform"===c){Es(this,a,t);continue}}else c in C||(c=$i(c)||c);if(f||(o||0===o)&&(l||0===l)&&!Ai.test(a)&&c in C)o||(o=0),(d=(r+"").substr((l+"").length))!==(p=ee(a)||(c in k.units?k.units[c]:d))&&(l=ss(t,c,r,p)),this._pt=new ci(this._pt,f?y:C,c,l,m?m*o:o-l,f||"px"!==p&&"zIndex"!==c||!1===e.autoRound?Fi:Ri),this._pt.u=p||0,d!==p&&"%"!==p&&(this._pt.b=r,this._pt.r=Oi);else if(c in C)rs.call(this,t,c,r,a);else{if(!(c in t)){nt(c,a);continue}this.add(t,c,r||t[c],a,s,n)}T.push(c)}b&&ui(this)},get:ns,aliases:Pi,getSetter:function(t,e,i){var s=Pi[e];return s&&s.indexOf(",")<0&&(e=s),e in xi&&e!==qi&&(t._gsap.x||ns(t,"x"))?i&&Di===i?"scale"===e?ji:zi:(Di=i||{})&&("scale"===e?Vi:Ui):t.style&&!V(t.style[e])?Bi:~e.indexOf("-")?Ni:ii(t,e)},core:{_removeProperty:ts,_getMatrix:ps}};fi.utils.checkPrefix=$i,ks=bt("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(Ss="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){xi[t]=1})),bt(Ss,(function(t){k.units[t]="deg",us[t]=1})),Pi[ks[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+Ss,bt("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Pi[e[1]]=ks[e[0]]})),bt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){k.units[t]="px"})),fi.registerPlugin(As);var Ps,Fs,Ms,Os,Rs,Ls,Is,Bs,Ns,zs,js,Vs,Us,Ws,qs,Hs,Ys,Xs,$s,Gs,Qs,Ks,Zs,Js,tn,en,sn=fi.registerPlugin(As)||fi,nn=(sn.core.Tween,1),rn=[],an=[],on=Date.now,ln=on(),hn=0,un=1,cn=function(t){return t},dn=function(t){return Ns(t)[0]||(wn(t)&&!1!==Ps.config().nullTargetWarn?console.warn("Element not found:",t):null)},pn=function(t){return Math.round(1e5*t)/1e5||0},mn=function(){return"undefined"!=typeof window},fn=function(){return Ps||mn()&&(Ps=window.gsap)&&Ps.registerPlugin&&Ps},gn=function(t){return!!~Is.indexOf(t)},yn=function(t,e){return~rn.indexOf(t)&&rn[rn.indexOf(t)+1][e]},vn=function(t,e){var i=e.s,s=e.sc,n=an.indexOf(t),r=s===Vn.sc?1:2;return!~n&&(n=an.push(t)-1),an[n+r]||(an[n+r]=yn(t,i)||(gn(t)?s:function(e){return arguments.length?t[i]=e:t[i]}))},bn=function(t){return yn(t,"getBoundingClientRect")||(gn(t)?function(){return kr.width=Ms.innerWidth,kr.height=Ms.innerHeight,kr}:function(){return qn(t)})},_n=function(t,e){var i=e.s,s=e.d2,n=e.d,r=e.a;return(i="scroll"+s)&&(r=yn(t,i))?r()-bn(t)()[n]:gn(t)?(Ls[i]||Rs[i])-(Ms["inner"+s]||Rs["client"+s]||Ls["client"+s]):t[i]-t["offset"+s]},Dn=function(t,e){for(var i=0;i<$s.length;i+=3)(!e||~e.indexOf($s[i+1]))&&t($s[i],$s[i+1],$s[i+2])},wn=function(t){return"string"==typeof t},xn=function(t){return"function"==typeof t},Tn=function(t){return"number"==typeof t},Cn=function(t){return"object"==typeof t},En=function(t){return xn(t)&&t()},Sn=function(t,e){return function(){var i=En(t),s=En(e);return function(){En(i),En(s)}}},kn=function(t,e,i){return t&&t.progress(e?0:1)&&i&&t.pause()},An=function(t,e){if(t.enabled){var i=e(t);i&&i.totalTime&&(t.callbackAnimation=i)}},Pn=Math.abs,Fn="left",Mn="right",On="bottom",Rn="width",Ln="height",In="padding",Bn="margin",Nn="Width",zn="px",jn={s:"scrollLeft",p:Fn,p2:"Left",os:Mn,os2:"Right",d:Rn,d2:Nn,a:"x",sc:function(t){return arguments.length?Ms.scrollTo(t,Vn.sc()):Ms.pageXOffset||Os.scrollLeft||Rs.scrollLeft||Ls.scrollLeft||0}},Vn={s:"scrollTop",p:"top",p2:"Top",os:On,os2:"Bottom",d:Ln,d2:"Height",a:"y",op:jn,sc:function(t){return arguments.length?Ms.scrollTo(jn.sc(),t):Ms.pageYOffset||Os.scrollTop||Rs.scrollTop||Ls.scrollTop||0}},Un=function(t){return Ms.getComputedStyle(t)},Wn=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},qn=function(t,e){var i=e&&"matrix(1, 0, 0, 1, 0, 0)"!==Un(t)[qs]&&Ps.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),s=t.getBoundingClientRect();return i&&i.progress(0).kill(),s},Hn=function(t,e){var i=e.d2;return t["offset"+i]||t["client"+i]||0},Yn=function(t){var e,i=[],s=t.labels,n=t.duration();for(e in s)i.push(s[e]/n);return i},Xn=function(t){var e=Ps.utils.snap(t),i=Array.isArray(t)&&t.slice(0).sort((function(t,e){return t-e}));return i?function(t,s,n){var r;if(void 0===n&&(n=.001),!s)return e(t);if(s>0){for(t-=n,r=0;r<i.length;r++)if(i[r]>=t)return i[r];return i[r-1]}for(r=i.length,t+=n;r--;)if(i[r]<=t)return i[r];return i[0]}:function(i,s,n){void 0===n&&(n=.001);var r=e(i);return!s||Math.abs(r-i)<n||r-i<0==s<0?r:e(s<0?i-t:i+t)}},$n=function(t,e,i,s){return i.split(",").forEach((function(i){return t(e,i,s)}))},Gn=function(t,e,i){return t.addEventListener(e,i,{passive:!0})},Qn=function(t,e,i){return t.removeEventListener(e,i)},Kn={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Zn={toggleActions:"play",anticipatePin:0},Jn={top:0,left:0,center:.5,bottom:1,right:1},tr=function(t,e){if(wn(t)){var i=t.indexOf("="),s=~i?+(t.charAt(i-1)+1)*parseFloat(t.substr(i+1)):0;~i&&(t.indexOf("%")>i&&(s*=e/100),t=t.substr(0,i-1)),t=s+(t in Jn?Jn[t]*e:~t.indexOf("%")?parseFloat(t)*e/100:parseFloat(t)||0)}return t},er=function(t,e,i,s,n,r,a,o){var l=n.startColor,h=n.endColor,u=n.fontSize,c=n.indent,d=n.fontWeight,p=Os.createElement("div"),m=gn(i)||"fixed"===yn(i,"pinType"),f=-1!==t.indexOf("scroller"),g=m?Ls:i,y=-1!==t.indexOf("start"),v=y?l:h,b="border-color:"+v+";font-size:"+u+";color:"+v+";font-weight:"+d+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+((f||o)&&m?"fixed;":"absolute;"),(f||o||!m)&&(b+=(s===Vn?Mn:On)+":"+(r+parseFloat(c))+"px;"),a&&(b+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),p._isStart=y,p.setAttribute("class","gsap-marker-"+t+(e?" marker-"+e:"")),p.style.cssText=b,p.innerText=e||0===e?t+"-"+e:t,g.children[0]?g.insertBefore(p,g.children[0]):g.appendChild(p),p._offset=p["offset"+s.op.d2],ir(p,0,s,y),p},ir=function(t,e,i,s){var n={display:"block"},r=i[s?"os2":"p2"],a=i[s?"p2":"os2"];t._isFlipped=s,n[i.a+"Percent"]=s?-100:0,n[i.a]=s?"1px":0,n["border"+r+Nn]=1,n["border"+a+Nn]=0,n[i.p]=e+"px",Ps.set(t,n)},sr=[],nr={},rr=function(){return on()-hn>34&&Dr()},ar=function(){Dr(),hn||pr("scrollStart"),hn=on()},or=function(){return!Us&&!Ks&&!Os.fullscreenElement&&Bs.restart(!0)},lr={},hr=[],ur=[],cr=function(t){var e,i=Ps.ticker.frame,s=[],n=0;if(tn!==i||nn){for(gr();n<ur.length;n+=4)(e=Ms.matchMedia(ur[n]).matches)!==ur[n+3]&&(ur[n+3]=e,e?s.push(n):gr(1,ur[n])||xn(ur[n+2])&&ur[n+2]());for(fr(),n=0;n<s.length;n++)e=s[n],Js=ur[e],ur[e+2]=ur[e+1](t);Js=0,Fs&&vr(0,1),tn=i,pr("matchMedia")}},dr=function t(){return Qn(Or,"scrollEnd",t)||vr(!0)},pr=function(t){return lr[t]&&lr[t].map((function(t){return t()}))||hr},mr=[],fr=function(t){for(var e=0;e<mr.length;e+=5)t&&mr[e+4]!==t||(mr[e].style.cssText=mr[e+1],mr[e].getBBox&&mr[e].setAttribute("transform",mr[e+2]||""),mr[e+3].uncache=1)},gr=function(t,e){var i;for(Hs=0;Hs<sr.length;Hs++)i=sr[Hs],e&&i.media!==e||(t?i.kill(1):i.revert());e&&fr(e),e||pr("revert")},yr=function(){return an.forEach((function(t){return"function"==typeof t&&(t.rec=0)}))},vr=function(t,e){if(!hn||t){en=!0;var i=pr("refreshInit");Gs&&Or.sort(),e||gr(),sr.forEach((function(t){return t.refresh()})),sr.forEach((function(t){return"max"===t.vars.end&&t.setPositions(t.start,_n(t.scroller,t._dir))})),i.forEach((function(t){return t&&t.render&&t.render(-1)})),yr(),Bs.pause(),en=!1,pr("refresh")}else Gn(Or,"scrollEnd",dr)},br=0,_r=1,Dr=function(){if(!en){var t=sr.length,e=on(),i=e-ln>=50,s=t&&sr[0].scroll();if(_r=br>s?-1:1,br=s,i&&(hn&&!Ws&&e-hn>200&&(hn=0,pr("scrollEnd")),js=ln,ln=e),_r<0){for(Hs=t;Hs-- >0;)sr[Hs]&&sr[Hs].update(0,i);_r=1}else for(Hs=0;Hs<t;Hs++)sr[Hs]&&sr[Hs].update(0,i)}},wr=[Fn,"top",On,Mn,"marginBottom","marginRight","marginTop","marginLeft","display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],xr=wr.concat([Rn,Ln,"boxSizing","maxWidth","maxHeight","position",Bn,In,"paddingTop","paddingRight","paddingBottom","paddingLeft"]),Tr=function(t,e,i,s){if(t.parentNode!==e){for(var n,r=wr.length,a=e.style,o=t.style;r--;)a[n=wr[r]]=i[n];a.position="absolute"===i.position?"absolute":"relative","inline"===i.display&&(a.display="inline-block"),o.bottom=o.right=a.flexBasis="auto",a.overflow="visible",a.boxSizing="border-box",a.width=Hn(t,jn)+zn,a.height=Hn(t,Vn)+zn,a.padding=o.margin=o.top=o.left="0",Er(s),o.width=o.maxWidth=i.width,o.height=o.maxHeight=i.height,o.padding=i.padding,t.parentNode.insertBefore(e,t),e.appendChild(t)}},Cr=/([A-Z])/g,Er=function(t){if(t){var e,i,s=t.t.style,n=t.length,r=0;for((t.t._gsap||Ps.core.getCache(t.t)).uncache=1;r<n;r+=2)i=t[r+1],e=t[r],i?s[e]=i:s[e]&&s.removeProperty(e.replace(Cr,"-$1").toLowerCase())}},Sr=function(t){for(var e=xr.length,i=t.style,s=[],n=0;n<e;n++)s.push(xr[n],i[xr[n]]);return s.t=t,s},kr={left:0,top:0},Ar=function(t,e,i,s,n,r,a,o,l,h,u,c,d){xn(t)&&(t=t(o)),wn(t)&&"max"===t.substr(0,3)&&(t=c+("="===t.charAt(4)?tr("0"+t.substr(3),i):0));var p,m,f,g=d?d.time():0;if(d&&d.seek(0),Tn(t))a&&ir(a,i,s,!0);else{xn(e)&&(e=e(o));var y,v,b,_,D=t.split(" ");f=dn(e)||Ls,(y=qn(f)||{})&&(y.left||y.top)||"none"!==Un(f).display||(_=f.style.display,f.style.display="block",y=qn(f),_?f.style.display=_:f.style.removeProperty("display")),v=tr(D[0],y[s.d]),b=tr(D[1]||"0",i),t=y[s.p]-l[s.p]-h+v+n-b,a&&ir(a,b,s,i-b<20||a._isStart&&b>20),i-=i-b}if(r){var w=t+i,x=r._isStart;p="scroll"+s.d2,ir(r,w,s,x&&w>20||!x&&(u?Math.max(Ls[p],Rs[p]):r.parentNode[p])<=w+1),u&&(l=qn(a),u&&(r.style[s.op.p]=l[s.op.p]-s.op.m-r._offset+zn))}return d&&f&&(p=qn(f),d.seek(c),m=qn(f),d._caScrollDist=p[s.p]-m[s.p],t=t/d._caScrollDist*c),d&&d.seek(g),d?t:Math.round(t)},Pr=/(?:webkit|moz|length|cssText|inset)/i,Fr=function(t,e,i,s){if(t.parentNode!==e){var n,r,a=t.style;if(e===Ls){for(n in t._stOrig=a.cssText,r=Un(t))+n||Pr.test(n)||!r[n]||"string"!=typeof a[n]||"0"===n||(a[n]=r[n]);a.top=i,a.left=s}else a.cssText=t._stOrig;Ps.core.getCache(t).uncache=1,e.appendChild(t)}},Mr=function(t,e){var i,s,n=vn(t,e),r="_scroll"+e.p2,a=function e(a,o,l,h,u){var c=e.tween,d=o.onComplete,p={};return c&&c.kill(),i=Math.round(l),o[r]=a,o.modifiers=p,p[r]=function(t){return(t=pn(n()))!==i&&t!==s&&Math.abs(t-i)>2&&Math.abs(t-s)>2?(c.kill(),e.tween=0):t=l+h*c.ratio+u*c.ratio*c.ratio,s=i,i=pn(t)},o.onComplete=function(){e.tween=0,d&&d.call(c)},c=e.tween=Ps.to(t,o)};return t[r]=n,Gn(t,"wheel",(function(){return a.tween&&a.tween.kill()&&(a.tween=0)})),a};jn.op=Vn;var Or=function(){function t(e,i){Fs||t.register(Ps)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(e,i)}return t.prototype.init=function(e,i){if(this.progress=this.start=0,this.vars&&this.kill(1),un){var s,n,r,a,o,l,h,u,c,d,p,m,f,g,y,v,b,_,D,w,x,T,C,E,S,k,A,P,F,M,O,R,L,I,B,N,z,j,V,U,W=e=Wn(wn(e)||Tn(e)||e.nodeType?{trigger:e}:e,Zn),q=W.onUpdate,H=W.toggleClass,Y=W.id,X=W.onToggle,$=W.onRefresh,G=W.scrub,Q=W.trigger,K=W.pin,Z=W.pinSpacing,J=W.invalidateOnRefresh,tt=W.anticipatePin,et=W.onScrubComplete,it=W.onSnapComplete,st=W.once,nt=W.snap,rt=W.pinReparent,at=W.pinSpacer,ot=W.containerAnimation,lt=W.fastScrollEnd,ht=W.preventOverlaps,ut=e.horizontal||e.containerAnimation&&!1!==e.horizontal?jn:Vn,ct=!G&&0!==G,dt=dn(e.scroller||Ms),pt=Ps.core.getCache(dt),mt=gn(dt),ft="fixed"===("pinType"in e?e.pinType:yn(dt,"pinType")||mt&&"fixed"),gt=[e.onEnter,e.onLeave,e.onEnterBack,e.onLeaveBack],yt=ct&&e.toggleActions.split(" "),vt="markers"in e?e.markers:Zn.markers,bt=mt?0:parseFloat(Un(dt)["border"+ut.p2+Nn])||0,_t=this,Dt=e.onRefreshInit&&function(){return e.onRefreshInit(_t)},wt=function(t,e,i){var s=i.d,n=i.d2,r=i.a;return(r=yn(t,"getBoundingClientRect"))?function(){return r()[s]}:function(){return(e?Ms["inner"+n]:t["client"+n])||0}}(dt,mt,ut),xt=function(t,e){return!e||~rn.indexOf(t)?bn(t):function(){return kr}}(dt,mt),Tt=0,Ct=vn(dt,ut);if(_t.media=Js,_t._dir=ut,tt*=45,_t.scroller=dt,_t.scroll=ot?ot.time.bind(ot):Ct,a=Ct(),_t.vars=e,i=i||e.animation,"refreshPriority"in e&&(Gs=1),pt.tweenScroll=pt.tweenScroll||{top:Mr(dt,Vn),left:Mr(dt,jn)},_t.tweenTo=s=pt.tweenScroll[ut.p],i&&(i.vars.lazy=!1,i._initted||!1!==i.vars.immediateRender&&!1!==e.immediateRender&&i.render(0,!0,!0),_t.animation=i.pause(),i.scrollTrigger=_t,(O=Tn(G)&&G)&&(M=Ps.to(i,{ease:"power3",duration:O,onComplete:function(){return et&&et(_t)}})),P=0,Y||(Y=i.vars.id)),sr.push(_t),nt&&(Cn(nt)&&!nt.push||(nt={snapTo:nt}),"scrollBehavior"in Ls.style&&Ps.set(mt?[Ls,Rs]:dt,{scrollBehavior:"auto"}),r=xn(nt.snapTo)?nt.snapTo:"labels"===nt.snapTo?function(t){return function(e){return Ps.utils.snap(Yn(t),e)}}(i):"labelsDirectional"===nt.snapTo?(j=i,function(t,e){return Xn(Yn(j))(t,e.direction)}):!1!==nt.directional?function(t,e){return Xn(nt.snapTo)(t,e.direction)}:Ps.utils.snap(nt.snapTo),R=nt.duration||{min:.1,max:2},R=Cn(R)?zs(R.min,R.max):zs(R,R),L=Ps.delayedCall(nt.delay||O/2||.1,(function(){if(Math.abs(_t.getVelocity())<10&&!Ws&&Tt!==Ct()){var t=i&&!ct?i.totalProgress():_t.progress,e=(t-F)/(on()-js)*1e3||0,n=Ps.utils.clamp(-_t.progress,1-_t.progress,Pn(e/2)*e/.185),a=_t.progress+(!1===nt.inertia?0:n),o=zs(0,1,r(a,_t)),u=Ct(),c=Math.round(l+o*f),d=nt,p=d.onStart,m=d.onInterrupt,g=d.onComplete,y=s.tween;if(u<=h&&u>=l&&c!==u){if(y&&!y._initted&&y.data<=Pn(c-u))return;!1===nt.inertia&&(n=o-_t.progress),s(c,{duration:R(Pn(.185*Math.max(Pn(a-t),Pn(o-t))/e/.05||0)),ease:nt.ease||"power3",data:Pn(c-u),onInterrupt:function(){return L.restart(!0)&&m&&m(_t)},onComplete:function(){_t.update(),Tt=Ct(),P=F=i&&!ct?i.totalProgress():_t.progress,it&&it(_t),g&&g(_t)}},u,n*f,c-u-n*f),p&&p(_t,s.tween)}}else _t.isActive&&L.restart(!0)})).pause()),Y&&(nr[Y]=_t),Q=_t.trigger=dn(Q||K),K=!0===K?Q:dn(K),wn(H)&&(H={targets:Q,className:H}),K&&(!1===Z||Z===Bn||(Z=!(!Z&&"flex"===Un(K.parentNode).display)&&In),_t.pin=K,!1!==e.force3D&&Ps.set(K,{force3D:!0}),(n=Ps.core.getCache(K)).spacer?g=n.pinState:(at&&((at=dn(at))&&!at.nodeType&&(at=at.current||at.nativeElement),n.spacerIsNative=!!at,at&&(n.spacerState=Sr(at))),n.spacer=b=at||Os.createElement("div"),b.classList.add("pin-spacer"),Y&&b.classList.add("pin-spacer-"+Y),n.pinState=g=Sr(K)),_t.spacer=b=n.spacer,A=Un(K),C=A[Z+ut.os2],D=Ps.getProperty(K),w=Ps.quickSetter(K,ut.a,zn),Tr(K,b,A),v=Sr(K)),vt&&(m=Cn(vt)?Wn(vt,Kn):Kn,d=er("scroller-start",Y,dt,ut,m,0),p=er("scroller-end",Y,dt,ut,m,0,d),_=d["offset"+ut.op.d2],u=er("start",Y,dt,ut,m,_,0,ot),c=er("end",Y,dt,ut,m,_,0,ot),ot&&(z=Ps.quickSetter([u,c],ut.a,zn)),ft||rn.length&&!0===yn(dt,"fixedMarkers")||(U=Un(V=mt?Ls:dt).position,V.style.position="absolute"===U||"fixed"===U?U:"relative",Ps.set([d,p],{force3D:!0}),S=Ps.quickSetter(d,ut.a,zn),k=Ps.quickSetter(p,ut.a,zn))),ot){var Et=ot.vars.onUpdate,St=ot.vars.onUpdateParams;ot.eventCallback("onUpdate",(function(){_t.update(0,0,1),Et&&Et.apply(St||[])}))}_t.previous=function(){return sr[sr.indexOf(_t)-1]},_t.next=function(){return sr[sr.indexOf(_t)+1]},_t.revert=function(t){var e=!1!==t||!_t.enabled,s=Us;e!==_t.isReverted&&(e&&(_t.scroll.rec||(_t.scroll.rec=Ct()),B=Math.max(Ct(),_t.scroll.rec||0),I=_t.progress,N=i&&i.progress()),u&&[u,c,d,p].forEach((function(t){return t.style.display=e?"none":"block"})),e&&(Us=1),_t.update(e),Us=s,K&&(e?function(t,e,i){Er(i);var s=t._gsap;if(s.spacerIsNative)Er(s.spacerState);else if(t.parentNode===e){var n=e.parentNode;n&&(n.insertBefore(t,e),n.removeChild(e))}}(K,b,g):(!rt||!_t.isActive)&&Tr(K,b,Un(K),E)),_t.isReverted=e)},_t.refresh=function(s,n){if(!Us&&_t.enabled||n)if(K&&s&&hn)Gn(t,"scrollEnd",dr);else{Us=1,M&&M.pause(),J&&i&&i.time(-.01,!0).invalidate(),_t.isReverted||_t.revert();for(var r,m,_,w,C,S,k,A,P,F,O=wt(),R=xt(),L=ot?ot.duration():_n(dt,ut),z=0,j=0,V=e.end,U=e.endTrigger||Q,W=e.start||(0!==e.start&&Q?K?"0 0":"0 100%":0),q=e.pinnedContainer&&dn(e.pinnedContainer),H=Q&&Math.max(0,sr.indexOf(_t))||0,Y=H;Y--;)(S=sr[Y]).end||S.refresh(0,1)||(Us=1),!(k=S.pin)||k!==Q&&k!==K||S.isReverted||(F||(F=[]),F.unshift(S),S.revert());for(xn(W)&&(W=W(_t)),l=Ar(W,Q,O,ut,Ct(),u,d,_t,R,bt,ft,L,ot)||(K?-.001:0),xn(V)&&(V=V(_t)),wn(V)&&!V.indexOf("+=")&&(~V.indexOf(" ")?V=(wn(W)?W.split(" ")[0]:"")+V:(z=tr(V.substr(2),O),V=wn(W)?W:l+z,U=Q)),h=Math.max(l,Ar(V||(U?"100% 0":L),U,O,ut,Ct()+z,c,p,_t,R,bt,ft,L,ot))||-.001,f=h-l||(l-=.01)&&.001,z=0,Y=H;Y--;)(k=(S=sr[Y]).pin)&&S.start-S._pinPush<l&&!ot&&(r=S.end-S.start,k!==Q&&k!==q||Tn(W)||(z+=r*(1-S.progress)),k===K&&(j+=r));if(l+=z,h+=z,_t._pinPush=j,u&&z&&((r={})[ut.a]="+="+z,q&&(r[ut.p]="-="+Ct()),Ps.set([u,c],r)),K)r=Un(K),w=ut===Vn,_=Ct(),x=parseFloat(D(ut.a))+j,!L&&h>1&&((mt?Ls:dt).style["overflow-"+ut.a]="scroll"),Tr(K,b,r),v=Sr(K),m=qn(K,!0),A=ft&&vn(dt,w?jn:Vn)(),Z&&((E=[Z+ut.os2,f+j+zn]).t=b,(Y=Z===In?Hn(K,ut)+f+j:0)&&E.push(ut.d,Y+zn),Er(E),ft&&Ct(B)),ft&&((C={top:m.top+(w?_-l:A)+zn,left:m.left+(w?A:_-l)+zn,boxSizing:"border-box",position:"fixed"}).width=C.maxWidth=Math.ceil(m.width)+zn,C.height=C.maxHeight=Math.ceil(m.height)+zn,C.margin=C.marginTop=C.marginRight=C.marginBottom=C.marginLeft="0",C.padding=r.padding,C.paddingTop=r.paddingTop,C.paddingRight=r.paddingRight,C.paddingBottom=r.paddingBottom,C.paddingLeft=r.paddingLeft,y=function(t,e,i){for(var s,n=[],r=t.length,a=i?8:0;a<r;a+=2)s=t[a],n.push(s,s in e?e[s]:t[a+1]);return n.t=t.t,n}(g,C,rt)),i?(P=i._initted,Qs(1),i.render(i.duration(),!0,!0),T=D(ut.a)-x+f+j,f!==T&&y.splice(y.length-2,2),i.render(0,!0,!0),P||i.invalidate(),Qs(0)):T=f;else if(Q&&Ct()&&!ot)for(m=Q.parentNode;m&&m!==Ls;)m._pinOffset&&(l-=m._pinOffset,h-=m._pinOffset),m=m.parentNode;F&&F.forEach((function(t){return t.revert(!1)})),_t.start=l,_t.end=h,a=o=Ct(),ot||(a<B&&Ct(B),_t.scroll.rec=0),_t.revert(!1),Us=0,i&&ct&&i._initted&&i.progress()!==N&&i.progress(N,!0).render(i.time(),!0,!0),(I!==_t.progress||ot)&&(i&&!ct&&i.totalProgress(I,!0),_t.progress=I,_t.update(0,0,1)),K&&Z&&(b._pinOffset=Math.round(_t.progress*T)),$&&$(_t)}},_t.getVelocity=function(){return(Ct()-o)/(on()-js)*1e3||0},_t.endAnimation=function(){kn(_t.callbackAnimation),i&&(M?M.progress(1):i.paused()?ct||kn(i,_t.direction<0,1):kn(i,i.reversed()))},_t.labelToScroll=function(t){return i&&i.labels&&(l||_t.refresh()||l)+i.labels[t]/i.duration()*f||0},_t.getTrailing=function(t){var e=sr.indexOf(_t),i=_t.direction>0?sr.slice(0,e).reverse():sr.slice(e+1);return wn(t)?i.filter((function(e){return e.vars.preventOverlaps===t})):i},_t.update=function(t,e,n){if(!ot||n||t){var r,u,c,p,m,g,_,D=_t.scroll(),E=t?0:(D-l)/f,A=E<0?0:E>1?1:E||0,O=_t.progress;if(e&&(o=a,a=ot?Ct():D,nt&&(F=P,P=i&&!ct?i.totalProgress():A)),tt&&!A&&K&&!Us&&!nn&&hn&&l<D+(D-o)/(on()-js)*tt&&(A=1e-4),A!==O&&_t.enabled){if(p=(m=(r=_t.isActive=!!A&&A<1)!=(!!O&&O<1))||!!A!=!!O,_t.direction=A>O?1:-1,_t.progress=A,p&&!Us&&(u=A&&!O?0:1===A?1:1===O?2:3,ct&&(c=!m&&"none"!==yt[u+1]&&yt[u+1]||yt[u],_=i&&("complete"===c||"reset"===c||c in i))),ht&&m&&(_||G||!i)&&(xn(ht)?ht(_t):_t.getTrailing(ht).forEach((function(t){return t.endAnimation()}))),ct||(!M||Us||nn?i&&i.totalProgress(A,!!Us):(M.vars.totalProgress=A,M.invalidate().restart())),K)if(t&&Z&&(b.style[Z+ut.os2]=C),ft){if(p){if(g=!t&&A>O&&h+1>D&&D+1>=_n(dt,ut),rt)if(t||!r&&!g)Fr(K,b);else{var R=qn(K,!0),I=D-l;Fr(K,Ls,R.top+(ut===Vn?I:0)+zn,R.left+(ut===Vn?0:I)+zn)}Er(r||g?y:v),T!==f&&A<1&&r||w(x+(1!==A||g?0:T))}}else w(x+T*A);nt&&!s.tween&&!Us&&!nn&&L.restart(!0),H&&(m||st&&A&&(A<1||!Zs))&&Ns(H.targets).forEach((function(t){return t.classList[r||st?"add":"remove"](H.className)})),q&&!ct&&!t&&q(_t),p&&!Us?(ct&&(_&&("complete"===c?i.pause().totalProgress(1):"reset"===c?i.restart(!0).pause():"restart"===c?i.restart(!0):i[c]()),q&&q(_t)),!m&&Zs||(X&&m&&An(_t,X),gt[u]&&An(_t,gt[u]),st&&(1===A?_t.kill(!1,1):gt[u]=0),m||gt[u=1===A?1:3]&&An(_t,gt[u])),lt&&!r&&Math.abs(_t.getVelocity())>(Tn(lt)?lt:2500)&&(kn(_t.callbackAnimation),M?M.progress(1):kn(i,!A,1))):ct&&q&&!Us&&q(_t)}if(k){var B=ot?D/ot.duration()*(ot._caScrollDist||0):D;S(B+(d._isFlipped?1:0)),k(B)}z&&z(-D/ot.duration()*(ot._caScrollDist||0))}},_t.enable=function(e,i){_t.enabled||(_t.enabled=!0,Gn(dt,"resize",or),Gn(dt,"scroll",ar),Dt&&Gn(t,"refreshInit",Dt),!1!==e&&(_t.progress=I=0,a=o=Tt=Ct()),!1!==i&&_t.refresh())},_t.getTween=function(t){return t&&s?s.tween:M},_t.setPositions=function(t,e){K&&(x+=t-l,T+=e-t-f),_t.start=l=t,_t.end=h=e,f=e-t,_t.update()},_t.disable=function(e,i){if(_t.enabled&&(!1!==e&&_t.revert(),_t.enabled=_t.isActive=!1,i||M&&M.pause(),B=0,n&&(n.uncache=1),Dt&&Qn(t,"refreshInit",Dt),L&&(L.pause(),s.tween&&s.tween.kill()&&(s.tween=0)),!mt)){for(var r=sr.length;r--;)if(sr[r].scroller===dt&&sr[r]!==_t)return;Qn(dt,"resize",or),Qn(dt,"scroll",ar)}},_t.kill=function(t,e){_t.disable(t,e),M&&M.kill(),Y&&delete nr[Y];var s=sr.indexOf(_t);s>=0&&sr.splice(s,1),s===Hs&&_r>0&&Hs--,s=0,sr.forEach((function(t){return t.scroller===_t.scroller&&(s=1)})),s||(_t.scroll.rec=0),i&&(i.scrollTrigger=null,t&&i.render(-1),e||i.kill()),u&&[u,c,d,p].forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),K&&(n&&(n.uncache=1),s=0,sr.forEach((function(t){return t.pin===K&&s++})),s||(n.spacer=0))},_t.enable(!1,!1),i&&i.add&&!f?Ps.delayedCall(.01,(function(){return l||h||_t.refresh()}))&&(f=.01)&&(l=h=0):_t.refresh()}else this.update=this.refresh=this.kill=cn},t.register=function(e){if(!Fs&&(Ps=e||fn(),mn()&&window.document&&(Ms=window,Os=document,Rs=Os.documentElement,Ls=Os.body),Ps&&(Ns=Ps.utils.toArray,zs=Ps.utils.clamp,Qs=Ps.core.suppressOverwrites||cn,Ps.core.globals("ScrollTrigger",t),Ls))){Gn(Ms,"wheel",ar),Is=[Ms,Os,Rs,Ls],Gn(Os,"scroll",ar);var i,s=Ls.style,n=s.borderTopStyle;s.borderTopStyle="solid",i=qn(Ls),Vn.m=Math.round(i.top+Vn.sc())||0,jn.m=Math.round(i.left+jn.sc())||0,n?s.borderTopStyle=n:s.removeProperty("border-top-style"),Vs=setInterval(rr,200),Ps.delayedCall(.5,(function(){return nn=0})),Gn(Os,"touchcancel",cn),Gn(Ls,"touchstart",cn),$n(Gn,Os,"pointerdown,touchstart,mousedown",(function(){return Ws=1})),$n(Gn,Os,"pointerup,touchend,mouseup",(function(){return Ws=0})),qs=Ps.utils.checkPrefix("transform"),xr.push(qs),Fs=on(),Bs=Ps.delayedCall(.2,vr).pause(),$s=[Os,"visibilitychange",function(){var t=Ms.innerWidth,e=Ms.innerHeight;Os.hidden?(Ys=t,Xs=e):Ys===t&&Xs===e||or()},Os,"DOMContentLoaded",vr,Ms,"load",function(){return hn||vr()},Ms,"resize",or],Dn(Gn)}return Fs},t.defaults=function(t){if(t)for(var e in t)Zn[e]=t[e];return Zn},t.kill=function(){un=0,sr.slice(0).forEach((function(t){return t.kill(1)}))},t.config=function(t){"limitCallbacks"in t&&(Zs=!!t.limitCallbacks);var e=t.syncInterval;e&&clearInterval(Vs)||(Vs=e)&&setInterval(rr,e),"autoRefreshEvents"in t&&(Dn(Qn)||Dn(Gn,t.autoRefreshEvents||"none"),Ks=-1===(t.autoRefreshEvents+"").indexOf("resize"))},t.scrollerProxy=function(t,e){var i=dn(t),s=an.indexOf(i),n=gn(i);~s&&an.splice(s,n?6:2),e&&(n?rn.unshift(Ms,e,Ls,e,Rs,e):rn.unshift(i,e))},t.matchMedia=function(t){var e,i,s,n,r;for(i in t)s=ur.indexOf(i),n=t[i],Js=i,"all"===i?n():(e=Ms.matchMedia(i))&&(e.matches&&(r=n()),~s?(ur[s+1]=Sn(ur[s+1],n),ur[s+2]=Sn(ur[s+2],r)):(s=ur.length,ur.push(i,n,r),e.addListener?e.addListener(cr):e.addEventListener("change",cr)),ur[s+3]=e.matches),Js=0;return ur},t.clearMatchMedia=function(t){t||(ur.length=0),(t=ur.indexOf(t))>=0&&ur.splice(t,4)},t.isInViewport=function(t,e,i){var s=(wn(t)?dn(t):t).getBoundingClientRect(),n=s[i?Rn:Ln]*e||0;return i?s.right-n>0&&s.left+n<Ms.innerWidth:s.bottom-n>0&&s.top+n<Ms.innerHeight},t.positionInViewport=function(t,e,i){wn(t)&&(t=dn(t));var s=t.getBoundingClientRect(),n=s[i?Rn:Ln],r=null==e?n/2:e in Jn?Jn[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0;return i?(s.left+r)/Ms.innerWidth:(s.top+r)/Ms.innerHeight},t}();Or.version="3.9.1",Or.saveStyles=function(t){return t?Ns(t).forEach((function(t){if(t&&t.style){var e=mr.indexOf(t);e>=0&&mr.splice(e,5),mr.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),Ps.core.getCache(t),Js)}})):mr},Or.revert=function(t,e){return gr(!t,e)},Or.create=function(t,e){return new Or(t,e)},Or.refresh=function(t){return t?or():(Fs||Or.register())&&vr(!0)},Or.update=Dr,Or.clearScrollMemory=yr,Or.maxScroll=function(t,e){return _n(t,e?jn:Vn)},Or.getScrollFunc=function(t,e){return vn(dn(t),e?jn:Vn)},Or.getById=function(t){return nr[t]},Or.getAll=function(){return sr.slice(0)},Or.isScrolling=function(){return!!hn},Or.snapDirectional=Xn,Or.addEventListener=function(t,e){var i=lr[t]||(lr[t]=[]);~i.indexOf(e)||i.push(e)},Or.removeEventListener=function(t,e){var i=lr[t],s=i&&i.indexOf(e);s>=0&&i.splice(s,1)},Or.batch=function(t,e){var i,s=[],n={},r=e.interval||.016,a=e.batchMax||1e9,o=function(t,e){var i=[],s=[],n=Ps.delayedCall(r,(function(){e(i,s),i=[],s=[]})).pause();return function(t){i.length||n.restart(!0),i.push(t.trigger),s.push(t),a<=i.length&&n.progress(1)}};for(i in e)n[i]="on"===i.substr(0,2)&&xn(e[i])&&"onRefreshInit"!==i?o(0,e[i]):e[i];return xn(a)&&(a=a(),Gn(Or,"refresh",(function(){return a=e.batchMax()}))),Ns(t).forEach((function(t){var e={};for(i in n)e[i]=n[i];e.trigger=t,s.push(Or.create(e))})),s},Or.sort=function(t){return sr.sort(t||function(t,e){return-1e6*(t.vars.refreshPriority||0)+t.start-(e.start+-1e6*(e.vars.refreshPriority||0))})},fn()&&Ps.registerPlugin(Or);let Rr=0;function Lr(){if(!(Rr>100)){if(100===Rr)console.warn("Curtains: too many warnings thrown, stop logging.");else{const t=Array.prototype.slice.call(arguments);console.warn.apply(console,t)}Rr++}}function Ir(){const t=Array.prototype.slice.call(arguments);console.error.apply(console,t)}function Br(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{let e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16).toUpperCase()}))}function Nr(t){return 0==(t&t-1)}class zr{constructor(t){if(this.type="Scene",t&&"Renderer"===t.type){if(!t.gl)return void Ir(this.type+": Renderer WebGL context is undefined",t)}else Ir(this.type+": Renderer not passed as first argument",t);this.renderer=t,this.gl=t.gl,this.initStacks()}initStacks(){this.stacks={pingPong:[],renderTargets:[],opaque:[],transparent:[],renderPasses:[],scenePasses:[]}}resetPlaneStacks(){this.stacks.pingPong=[],this.stacks.renderTargets=[],this.stacks.opaque=[],this.stacks.transparent=[];for(let t=0;t<this.renderer.planes.length;t++)this.addPlane(this.renderer.planes[t])}resetShaderPassStacks(){this.stacks.scenePasses=[],this.stacks.renderPasses=[];for(let t=0;t<this.renderer.shaderPasses.length;t++)this.renderer.shaderPasses[t].index=t,this.renderer.shaderPasses[t]._isScenePass?this.stacks.scenePasses.push(this.renderer.shaderPasses[t]):this.stacks.renderPasses.push(this.renderer.shaderPasses[t]);0===this.stacks.scenePasses.length&&(this.renderer.state.scenePassIndex=null)}addToRenderTargetsStack(t){const e=this.renderer.planes.filter((e=>"PingPongPlane"!==e.type&&e.target&&e.uuid!==t.uuid));let i=-1;if(t.target._depth){for(let s=e.length-1;s>=0;s--)if(e[s].target.uuid===t.target.uuid){i=s+1;break}}else i=e.findIndex((e=>e.target.uuid===t.target.uuid));i=Math.max(0,i),e.splice(i,0,t),t.target._depth?(e.sort(((t,e)=>t.index-e.index)),e.sort(((t,e)=>e.renderOrder-t.renderOrder))):(e.sort(((t,e)=>e.index-t.index)),e.sort(((t,e)=>t.renderOrder-e.renderOrder))),e.sort(((t,e)=>t.target.index-e.target.index)),this.stacks.renderTargets=e}addToRegularPlaneStack(t){const e=this.renderer.planes.filter((e=>"PingPongPlane"!==e.type&&!e.target&&e._transparent===t._transparent&&e.uuid!==t.uuid));let i=-1;for(let s=e.length-1;s>=0;s--)if(e[s]._geometry.definition.id===t._geometry.definition.id){i=s+1;break}return i=Math.max(0,i),e.splice(i,0,t),e.sort(((t,e)=>t.index-e.index)),e}addPlane(t){if("PingPongPlane"===t.type)this.stacks.pingPong.push(t);else if(t.target)this.addToRenderTargetsStack(t);else if(t._transparent){const e=this.addToRegularPlaneStack(t);e.sort(((t,e)=>e.relativeTranslation.z-t.relativeTranslation.z)),e.sort(((t,e)=>e.renderOrder-t.renderOrder)),this.stacks.transparent=e}else{const e=this.addToRegularPlaneStack(t);e.sort(((t,e)=>e.renderOrder-t.renderOrder)),this.stacks.opaque=e}}removePlane(t){"PingPongPlane"===t.type?this.stacks.pingPong=this.stacks.pingPong.filter((e=>e.uuid!==t.uuid)):t.target?this.stacks.renderTargets=this.stacks.renderTargets.filter((e=>e.uuid!==t.uuid)):t._transparent?this.stacks.transparent=this.stacks.transparent.filter((e=>e.uuid!==t.uuid)):this.stacks.opaque=this.stacks.opaque.filter((e=>e.uuid!==t.uuid))}setPlaneRenderOrder(t){if("ShaderPass"===t.type)this.sortShaderPassStack(t._isScenePass?this.stacks.scenePasses:this.stacks.renderPasses);else if("PingPongPlane"===t.type)return;if(t.target)t.target._depth?(this.stacks.renderTargets.sort(((t,e)=>t.index-e.index)),this.stacks.renderTargets.sort(((t,e)=>e.renderOrder-t.renderOrder))):(this.stacks.renderTargets.sort(((t,e)=>e.index-t.index)),this.stacks.renderTargets.sort(((t,e)=>t.renderOrder-e.renderOrder))),this.stacks.renderTargets.sort(((t,e)=>t.target.index-e.target.index));else{const e=t._transparent?this.stacks.transparent:this.stacks.opaque,i=this.stacks.scenePasses.find(((t,e)=>t._isScenePass&&!t._depth&&0===e));!this.renderer.depth||i?(e.sort(((t,e)=>e.index-t.index)),t._transparent&&e.sort(((t,e)=>t.relativeTranslation.z-e.relativeTranslation.z)),e.sort(((t,e)=>t.renderOrder-e.renderOrder))):(e.sort(((t,e)=>t.index-e.index)),t._transparent&&e.sort(((t,e)=>e.relativeTranslation.z-t.relativeTranslation.z)),e.sort(((t,e)=>e.renderOrder-t.renderOrder)))}}addShaderPass(t){t._isScenePass?(this.stacks.scenePasses.push(t),this.sortShaderPassStack(this.stacks.scenePasses)):(this.stacks.renderPasses.push(t),this.sortShaderPassStack(this.stacks.renderPasses))}removeShaderPass(t){this.resetShaderPassStacks()}sortShaderPassStack(t){t.sort(((t,e)=>t.index-e.index)),t.sort(((t,e)=>t.renderOrder-e.renderOrder))}enableShaderPass(){this.stacks.scenePasses.length&&0===this.stacks.renderPasses.length&&this.renderer.planes.length&&(this.renderer.state.scenePassIndex=0,this.renderer.bindFrameBuffer(this.stacks.scenePasses[0].target))}drawRenderPasses(){this.stacks.scenePasses.length&&this.stacks.renderPasses.length&&this.renderer.planes.length&&(this.renderer.state.scenePassIndex=0,this.renderer.bindFrameBuffer(this.stacks.scenePasses[0].target));for(let t=0;t<this.stacks.renderPasses.length;t++)this.stacks.renderPasses[t]._startDrawing(),this.renderer.clearDepth()}drawScenePasses(){for(let t=0;t<this.stacks.scenePasses.length;t++)this.stacks.scenePasses[t]._startDrawing()}drawPingPongStack(){for(let t=0;t<this.stacks.pingPong.length;t++){const e=this.stacks.pingPong[t];e&&e._startDrawing()}}drawStack(t){for(let e=0;e<this.stacks[t].length;e++){const i=this.stacks[t][e];i&&i._startDrawing()}}draw(){this.drawPingPongStack(),this.enableShaderPass(),this.drawStack("renderTargets"),this.drawRenderPasses(),this.renderer.setBlending(!1),this.drawStack("opaque"),this.stacks.transparent.length&&(this.renderer.setBlending(!0),this.drawStack("transparent")),this.drawScenePasses()}}class jr{constructor(){this.geometries=[],this.clear()}clear(){this.textures=[],this.programs=[]}getGeometryFromID(t){return this.geometries.find((e=>e.id===t))}addGeometry(t,e,i){this.geometries.push({id:t,vertices:e,uvs:i})}isSameShader(t,e){return 0===t.localeCompare(e)}getProgramFromShaders(t,e){return this.programs.find((i=>this.isSameShader(i.vsCode,t)&&this.isSameShader(i.fsCode,e)))}addProgram(t){this.programs.push(t)}getTextureFromSource(t){const e="string"==typeof t?t:t.src;return this.textures.find((t=>t.source&&t.source.src===e))}addTexture(t){this.getTextureFromSource(t.source)||this.textures.push(t)}removeTexture(t){this.textures=this.textures.filter((e=>e.uuid!==t.uuid))}}class Vr{constructor(){this.clear()}clear(){this.queue=[]}add(t,e=!1){const i={callback:t,keep:e,timeout:null};return i.timeout=setTimeout((()=>{this.queue.push(i)}),0),i}execute(){this.queue.map((t=>{t.callback&&t.callback(),clearTimeout(this.queue.timeout)})),this.queue=this.queue.filter((t=>t.keep))}}class Ur{constructor({alpha:t,antialias:e,premultipliedAlpha:i,depth:s,failIfMajorPerformanceCaveat:n,preserveDrawingBuffer:r,stencil:a,container:o,pixelRatio:l,renderingScale:h,production:u,onError:c,onSuccess:d,onContextLost:p,onContextRestored:m,onDisposed:f,onSceneChange:g}){this.type="Renderer",this.alpha=t,this.antialias=e,this.premultipliedAlpha=i,this.depth=s,this.failIfMajorPerformanceCaveat=n,this.preserveDrawingBuffer=r,this.stencil=a,this.container=o,this.pixelRatio=l,this._renderingScale=h,this.production=u,this.onError=c,this.onSuccess=d,this.onContextLost=p,this.onContextRestored=m,this.onDisposed=f,this.onSceneChange=g,this.initState(),this.canvas=document.createElement("canvas");const y={alpha:this.alpha,premultipliedAlpha:this.premultipliedAlpha,antialias:this.antialias,depth:this.depth,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,stencil:this.stencil};if(this.gl=this.canvas.getContext("webgl2",y),this._isWebGL2=!!this.gl,this.gl||(this.gl=this.canvas.getContext("webgl",y)||this.canvas.getContext("experimental-webgl",y)),!this.gl)return this.production||Lr(this.type+": WebGL context could not be created"),this.state.isActive=!1,void(this.onError&&this.onError());this.onSuccess&&this.onSuccess(),this.initRenderer()}initState(){this.state={isActive:!0,isContextLost:!0,drawingEnabled:!0,forceRender:!1,currentProgramID:null,currentGeometryID:null,forceBufferUpdate:!1,depthTest:null,blending:null,cullFace:null,frameBufferID:null,scenePassIndex:null,activeTexture:null,unpackAlignment:null,flipY:null,premultiplyAlpha:null}}initCallbackQueueManager(){this.nextRender=new Vr}initRenderer(){this.planes=[],this.renderTargets=[],this.shaderPasses=[],this.state.isContextLost=!1,this.state.maxTextureSize=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.initCallbackQueueManager(),this.setBlendFunc(),this.setDepthFunc(),this.setDepthTest(!0),this.cache=new jr,this.scene=new zr(this),this.getExtensions(),this._contextLostHandler=this.contextLost.bind(this),this.canvas.addEventListener("webglcontextlost",this._contextLostHandler,!1),this._contextRestoredHandler=this.contextRestored.bind(this),this.canvas.addEventListener("webglcontextrestored",this._contextRestoredHandler,!1)}getExtensions(){this.extensions=[],this._isWebGL2?(this.extensions.EXT_color_buffer_float=this.gl.getExtension("EXT_color_buffer_float"),this.extensions.OES_texture_float_linear=this.gl.getExtension("OES_texture_float_linear"),this.extensions.EXT_texture_filter_anisotropic=this.gl.getExtension("EXT_texture_filter_anisotropic"),this.extensions.WEBGL_lose_context=this.gl.getExtension("WEBGL_lose_context")):(this.extensions.OES_vertex_array_object=this.gl.getExtension("OES_vertex_array_object"),this.extensions.OES_texture_float=this.gl.getExtension("OES_texture_float"),this.extensions.OES_texture_float_linear=this.gl.getExtension("OES_texture_float_linear"),this.extensions.OES_texture_half_float=this.gl.getExtension("OES_texture_half_float"),this.extensions.OES_texture_half_float_linear=this.gl.getExtension("OES_texture_half_float_linear"),this.extensions.EXT_texture_filter_anisotropic=this.gl.getExtension("EXT_texture_filter_anisotropic"),this.extensions.OES_element_index_uint=this.gl.getExtension("OES_element_index_uint"),this.extensions.OES_standard_derivatives=this.gl.getExtension("OES_standard_derivatives"),this.extensions.EXT_sRGB=this.gl.getExtension("EXT_sRGB"),this.extensions.WEBGL_depth_texture=this.gl.getExtension("WEBGL_depth_texture"),this.extensions.WEBGL_draw_buffers=this.gl.getExtension("WEBGL_draw_buffers"),this.extensions.WEBGL_lose_context=this.gl.getExtension("WEBGL_lose_context"))}contextLost(t){this.state.isContextLost=!0,this.state.isActive&&(t.preventDefault(),this.nextRender.add((()=>this.onContextLost&&this.onContextLost())))}restoreContext(){this.state.isActive&&(this.initState(),this.gl&&this.extensions.WEBGL_lose_context?this.extensions.WEBGL_lose_context.restoreContext():(this.gl||this.production?this.extensions.WEBGL_lose_context||this.production||Lr(this.type+": Could not restore the context because the restore context extension is not defined"):Lr(this.type+": Could not restore the context because the context is not defined"),this.onError&&this.onError()))}isContextexFullyRestored(){let t=!0;for(let e=0;e<this.renderTargets.length;e++){this.renderTargets[e].textures[0]._canDraw||(t=!1);break}if(t)for(let e=0;e<this.planes.length;e++){if(!this.planes[e]._canDraw){t=!1;break}for(let i=0;i<this.planes[e].textures.length;i++)if(!this.planes[e].textures[i]._canDraw){t=!1;break}}if(t)for(let e=0;e<this.shaderPasses.length;e++){if(!this.shaderPasses[e]._canDraw){t=!1;break}for(let i=0;i<this.shaderPasses[e].textures.length;i++)if(!this.shaderPasses[e].textures[i]._canDraw){t=!1;break}}return t}contextRestored(){this.getExtensions(),this.setBlendFunc(),this.setDepthFunc(),this.setDepthTest(!0),this.cache.clear(),this.scene.initStacks();for(let t=0;t<this.renderTargets.length;t++)this.renderTargets[t]._restoreContext();for(let t=0;t<this.planes.length;t++)this.planes[t]._restoreContext();for(let t=0;t<this.shaderPasses.length;t++)this.shaderPasses[t]._restoreContext();const t=this.nextRender.add((()=>{this.isContextexFullyRestored()&&(t.keep=!1,this.state.isContextLost=!1,this.onContextRestored&&this.onContextRestored(),this.onSceneChange(),this.needRender())}),!0)}setPixelRatio(t){this.pixelRatio=t}setSize(){if(!this.gl)return;const t=this.container.getBoundingClientRect();this._boundingRect={width:t.width*this.pixelRatio,height:t.height*this.pixelRatio,top:t.top*this.pixelRatio,left:t.left*this.pixelRatio};const e=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),i=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(e&&i){function t(t){let e=0;for(;t&&!isNaN(t.offsetTop);)e+=t.offsetTop-t.scrollTop,t=t.offsetParent;return e}this._boundingRect.top=t(this.container)*this.pixelRatio}this.canvas.style.width=Math.floor(this._boundingRect.width/this.pixelRatio)+"px",this.canvas.style.height=Math.floor(this._boundingRect.height/this.pixelRatio)+"px",this.canvas.width=Math.floor(this._boundingRect.width*this._renderingScale),this.canvas.height=Math.floor(this._boundingRect.height*this._renderingScale),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}resize(){for(let t=0;t<this.planes.length;t++)this.planes[t]._canDraw&&this.planes[t].resize();for(let t=0;t<this.shaderPasses.length;t++)this.shaderPasses[t]._canDraw&&this.shaderPasses[t].resize();for(let t=0;t<this.renderTargets.length;t++)this.renderTargets[t].resize();this.needRender()}clear(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}clearDepth(){this.gl.clear(this.gl.DEPTH_BUFFER_BIT)}clearColor(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)}bindFrameBuffer(t,e){let i=null;t?(i=t.index,i!==this.state.frameBufferID&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t._frameBuffer),this.gl.viewport(0,0,t._size.width,t._size.height),t._shouldClear&&!e&&this.clear())):null!==this.state.frameBufferID&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)),this.state.frameBufferID=i}setDepthTest(t){t&&!this.state.depthTest?(this.state.depthTest=t,this.gl.enable(this.gl.DEPTH_TEST)):!t&&this.state.depthTest&&(this.state.depthTest=t,this.gl.disable(this.gl.DEPTH_TEST))}setDepthFunc(){this.gl.depthFunc(this.gl.LEQUAL)}setBlending(t=!1){t&&!this.state.blending?(this.state.blending=t,this.gl.enable(this.gl.BLEND)):!t&&this.state.blending&&(this.state.blending=t,this.gl.disable(this.gl.BLEND))}setBlendFunc(){this.gl.enable(this.gl.BLEND),this.premultipliedAlpha?this.gl.blendFuncSeparate(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA)}setFaceCulling(t){if(this.state.cullFace!==t)if(this.state.cullFace=t,"none"===t)this.gl.disable(this.gl.CULL_FACE);else{const e="front"===t?this.gl.FRONT:this.gl.BACK;this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(e)}}useProgram(t){null!==this.state.currentProgramID&&this.state.currentProgramID===t.id||(this.gl.useProgram(t.program),this.state.currentProgramID=t.id)}removePlane(t){this.gl&&(this.planes=this.planes.filter((e=>e.uuid!==t.uuid)),this.scene.removePlane(t),t=null,this.gl&&this.clear(),this.onSceneChange())}removeRenderTarget(t){if(!this.gl)return;let e=this.planes.find((e=>"PingPongPlane"!==e.type&&e.target&&e.target.uuid===t.uuid));for(let e=0;e<this.planes.length;e++)this.planes[e].target&&this.planes[e].target.uuid===t.uuid&&(this.planes[e].target=null);this.renderTargets=this.renderTargets.filter((e=>e.uuid!==t.uuid));for(let t=0;t<this.renderTargets.length;t++)this.renderTargets[t].index=t;t=null,this.gl&&this.clear(),e&&this.scene.resetPlaneStacks(),this.onSceneChange()}removeShaderPass(t){this.gl&&(this.shaderPasses=this.shaderPasses.filter((e=>e.uuid!==t.uuid)),this.scene.removeShaderPass(t),t=null,this.gl&&this.clear(),this.onSceneChange())}enableDrawing(){this.state.drawingEnabled=!0}disableDrawing(){this.state.drawingEnabled=!1}needRender(){this.state.forceRender=!0}render(){this.gl&&(this.clear(),this.state.currentGeometryID=null,this.scene.draw())}deletePrograms(){for(let t=0;t<this.cache.programs.length;t++){const e=this.cache.programs[t];this.gl.deleteProgram(e.program)}}dispose(){if(!this.gl)return;for(this.state.isActive=!1;this.planes.length>0;)this.removePlane(this.planes[0]);for(;this.shaderPasses.length>0;)this.removeShaderPass(this.shaderPasses[0]);for(;this.renderTargets.length>0;)this.removeRenderTarget(this.renderTargets[0]);let t=this.nextRender.add((()=>{0===this.planes.length&&0===this.shaderPasses.length&&0===this.renderTargets.length&&(t.keep=!1,this.deletePrograms(),this.clear(),this.canvas.removeEventListener("webgllost",this._contextLostHandler,!1),this.canvas.removeEventListener("webglrestored",this._contextRestoredHandler,!1),this.gl&&this.extensions.WEBGL_lose_context&&this.extensions.WEBGL_lose_context.loseContext(),this.canvas.width=this.canvas.width,this.gl=null,this.container.removeChild(this.canvas),this.container=null,this.canvas=null,this.onDisposed&&this.onDisposed())}),!0)}}class Wr{constructor({xOffset:t=0,yOffset:e=0,lastXDelta:i=0,lastYDelta:s=0,shouldWatch:n=!0,onScroll:r=(()=>{})}={}){this.xOffset=t,this.yOffset=e,this.lastXDelta=i,this.lastYDelta=s,this.shouldWatch=n,this.onScroll=r,this.handler=this.scroll.bind(this,!0),this.shouldWatch&&window.addEventListener("scroll",this.handler,{passive:!0})}scroll(){this.updateScrollValues(window.pageXOffset,window.pageYOffset)}updateScrollValues(t,e){const i=this.xOffset;this.xOffset=t,this.lastXDelta=i-this.xOffset;const s=this.yOffset;this.yOffset=e,this.lastYDelta=s-this.yOffset,this.onScroll&&this.onScroll(this.lastXDelta,this.lastYDelta)}dispose(){this.shouldWatch&&window.removeEventListener("scroll",this.handler,{passive:!0})}}class qr{constructor({container:t,alpha:e=!0,premultipliedAlpha:i=!1,antialias:s=!0,depth:n=!0,failIfMajorPerformanceCaveat:r=!0,preserveDrawingBuffer:a=!1,stencil:o=!1,autoResize:l=!0,autoRender:h=!0,watchScroll:u=!0,pixelRatio:c=window.devicePixelRatio||1,renderingScale:d=1,production:p=!1}={}){this.type="Curtains",this._autoResize=l,this._autoRender=h,this._watchScroll=u,this.pixelRatio=c,d=isNaN(d)?1:parseFloat(d),this._renderingScale=Math.max(.25,Math.min(1,d)),this.premultipliedAlpha=i,this.alpha=e,this.antialias=s,this.depth=n,this.failIfMajorPerformanceCaveat=r,this.preserveDrawingBuffer=a,this.stencil=o,this.production=p,this.errors=!1,t?this.setContainer(t):this.production||Lr(this.type+": no container provided in the initial parameters. Use setContainer() method to set one later and initialize the WebGL context")}setContainer(t){if(t)if("string"==typeof t)if(t=document.getElementById(t))this.container=t;else{let t=document.createElement("div");t.setAttribute("id","curtains-canvas"),document.body.appendChild(t),this.container=t,this.production||Lr('Curtains: no valid container HTML element or ID provided, created a div with "curtains-canvas" ID instead')}else t instanceof Element&&(this.container=t);else{let t=document.createElement("div");t.setAttribute("id","curtains-canvas"),document.body.appendChild(t),this.container=t,this.production||Lr('Curtains: no valid container HTML element or ID provided, created a div with "curtains-canvas" ID instead')}this._initCurtains()}_initCurtains(){this.planes=[],this.renderTargets=[],this.shaderPasses=[],this._initRenderer(),this.gl&&(this._initScroll(),this._setSize(),this._addListeners(),this.container.appendChild(this.canvas),console.log("curtains.js - v8.1.3"),this._animationFrameID=null,this._autoRender&&this._animate())}_initRenderer(){this.renderer=new Ur({alpha:this.alpha,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,depth:this.depth,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,stencil:this.stencil,container:this.container,pixelRatio:this.pixelRatio,renderingScale:this._renderingScale,production:this.production,onError:()=>this._onRendererError(),onSuccess:()=>this._onRendererSuccess(),onContextLost:()=>this._onRendererContextLost(),onContextRestored:()=>this._onRendererContextRestored(),onDisposed:()=>this._onRendererDisposed(),onSceneChange:()=>this._keepSync()}),this.gl=this.renderer.gl,this.canvas=this.renderer.canvas}restoreContext(){this.renderer.restoreContext()}_animate(){this.render(),this._animationFrameID=window.requestAnimationFrame(this._animate.bind(this))}enableDrawing(){this.renderer.enableDrawing()}disableDrawing(){this.renderer.disableDrawing()}needRender(){this.renderer.needRender()}nextRender(t,e=!1){return this.renderer.nextRender.add(t,e)}clear(){this.renderer&&this.renderer.clear()}clearDepth(){this.renderer&&this.renderer.clearDepth()}clearColor(){this.renderer&&this.renderer.clearColor()}isWebGL2(){return!!this.gl&&this.renderer._isWebGL2}render(){this.renderer.nextRender.execute(),(this.renderer.state.drawingEnabled||this.renderer.state.forceRender)&&(this.renderer.state.forceRender&&(this.renderer.state.forceRender=!1),this._onRenderCallback&&this._onRenderCallback(),this.renderer.render())}_addListeners(){this._resizeHandler=null,this._autoResize&&(this._resizeHandler=this.resize.bind(this,!0),window.addEventListener("resize",this._resizeHandler,!1))}setPixelRatio(t,e){this.pixelRatio=parseFloat(Math.max(t,1))||1,this.renderer.setPixelRatio(t),this.resize(e)}_setSize(){this.renderer.setSize(),this._scrollManager.shouldWatch&&(this._scrollManager.xOffset=window.pageXOffset,this._scrollManager.yOffset=window.pageYOffset)}getBoundingRect(){return this.renderer._boundingRect}resize(t){this.gl&&(this._setSize(),this.renderer.resize(),this.nextRender((()=>{this._onAfterResizeCallback&&t&&this._onAfterResizeCallback()})))}_initScroll(){this._scrollManager=new Wr({xOffset:window.pageXOffset,yOffset:window.pageYOffset,lastXDelta:0,lastYDelta:0,shouldWatch:this._watchScroll,onScroll:(t,e)=>this._updateScroll(t,e)})}_updateScroll(t,e){for(let i=0;i<this.planes.length;i++)this.planes[i].watchScroll&&this.planes[i].updateScrollPosition(t,e);this.renderer.needRender(),this._onScrollCallback&&this._onScrollCallback()}updateScrollValues(t,e){this._scrollManager.updateScrollValues(t,e)}getScrollDeltas(){return{x:this._scrollManager.lastXDelta,y:this._scrollManager.lastYDelta}}getScrollValues(){return{x:this._scrollManager.xOffset,y:this._scrollManager.yOffset}}_keepSync(){this.planes=this.renderer.planes,this.shaderPasses=this.renderer.shaderPasses,this.renderTargets=this.renderer.renderTargets}lerp(t,e,i){return function(t,e,i){return(1-i)*t+i*e}(t,e,i)}onAfterResize(t){return t&&(this._onAfterResizeCallback=t),this}onError(t){return t&&(this._onErrorCallback=t),this}_onRendererError(){setTimeout((()=>{this._onErrorCallback&&!this.errors&&this._onErrorCallback(),this.errors=!0}),0)}onSuccess(t){return t&&(this._onSuccessCallback=t),this}_onRendererSuccess(){setTimeout((()=>{this._onSuccessCallback&&this._onSuccessCallback()}),0)}onContextLost(t){return t&&(this._onContextLostCallback=t),this}_onRendererContextLost(){this._onContextLostCallback&&this._onContextLostCallback()}onContextRestored(t){return t&&(this._onContextRestoredCallback=t),this}_onRendererContextRestored(){this._onContextRestoredCallback&&this._onContextRestoredCallback()}onRender(t){return t&&(this._onRenderCallback=t),this}onScroll(t){return t&&(this._onScrollCallback=t),this}dispose(){this.renderer.dispose()}_onRendererDisposed(){this._animationFrameID&&window.cancelAnimationFrame(this._animationFrameID),this._resizeHandler&&window.removeEventListener("resize",this._resizeHandler,!1),this._scrollManager&&this._scrollManager.dispose()}}class Hr{constructor(t,e,i){if(this.type="Uniforms",t&&"Renderer"===t.type){if(!t.gl)return void Ir(this.type+": Renderer WebGL context is undefined",t)}else Ir(this.type+": Renderer not passed as first argument",t);if(this.renderer=t,this.gl=t.gl,this.program=e,this.uniforms={},i)for(const t in i){const e=i[t];this.uniforms[t]={name:e.name,type:e.type,value:e.value.clone&&"function"==typeof e.value.clone?e.value.clone():e.value,update:null}}}handleUniformSetting(t){switch(t.type){case"1i":t.update=this.setUniform1i.bind(this);break;case"1iv":t.update=this.setUniform1iv.bind(this);break;case"1f":t.update=this.setUniform1f.bind(this);break;case"1fv":t.update=this.setUniform1fv.bind(this);break;case"2i":t.update=this.setUniform2i.bind(this);break;case"2iv":t.update=this.setUniform2iv.bind(this);break;case"2f":t.update=this.setUniform2f.bind(this);break;case"2fv":t.update=this.setUniform2fv.bind(this);break;case"3i":t.update=this.setUniform3i.bind(this);break;case"3iv":t.update=this.setUniform3iv.bind(this);break;case"3f":t.update=this.setUniform3f.bind(this);break;case"3fv":t.update=this.setUniform3fv.bind(this);break;case"4i":t.update=this.setUniform4i.bind(this);break;case"4iv":t.update=this.setUniform4iv.bind(this);break;case"4f":t.update=this.setUniform4f.bind(this);break;case"4fv":t.update=this.setUniform4fv.bind(this);break;case"mat2":t.update=this.setUniformMatrix2fv.bind(this);break;case"mat3":t.update=this.setUniformMatrix3fv.bind(this);break;case"mat4":t.update=this.setUniformMatrix4fv.bind(this);break;default:this.renderer.production||Lr(this.type+": This uniform type is not handled : ",t.type)}}setInternalFormat(t){"Vec2"===t.value.type?(t._internalFormat="Vec2",t.lastValue=t.value.clone()):"Vec3"===t.value.type?(t._internalFormat="Vec3",t.lastValue=t.value.clone()):"Mat4"===t.value.type?(t._internalFormat="Mat4",t.lastValue=t.value.clone()):"Quat"===t.value.type?(t._internalFormat="Quat",t.lastValue=t.value.clone()):Array.isArray(t.value)?(t._internalFormat="array",t.lastValue=Array.from(t.value)):t.value.constructor===Float32Array?(t._internalFormat="mat",t.lastValue=t.value):(t._internalFormat="float",t.lastValue=t.value)}setUniforms(){if(this.uniforms)for(const t in this.uniforms){let e=this.uniforms[t];e.location=this.gl.getUniformLocation(this.program,e.name),e._internalFormat||this.setInternalFormat(e),e.type||("Vec2"===e._internalFormat?e.type="2f":"Vec3"===e._internalFormat?e.type="3f":"Mat4"===e._internalFormat?e.type="mat4":"array"===e._internalFormat?4===e.value.length?(e.type="4f",this.renderer.production||Lr(this.type+": No uniform type declared for "+e.name+", applied a 4f (array of 4 floats) uniform type")):3===e.value.length?(e.type="3f",this.renderer.production||Lr(this.type+": No uniform type declared for "+e.name+", applied a 3f (array of 3 floats) uniform type")):2===e.value.length&&(e.type="2f",this.renderer.production||Lr(this.type+": No uniform type declared for "+e.name+", applied a 2f (array of 2 floats) uniform type")):"mat"===e._internalFormat?16===e.value.length?(e.type="mat4",this.renderer.production||Lr(this.type+": No uniform type declared for "+e.name+", applied a mat4 (4x4 matrix array) uniform type")):9===e.value.length?(e.type="mat3",this.renderer.production||Lr(this.type+": No uniform type declared for "+e.name+", applied a mat3 (3x3 matrix array) uniform type")):4===e.value.length&&(e.type="mat2",this.renderer.production||Lr(this.type+": No uniform type declared for "+e.name+", applied a mat2 (2x2 matrix array) uniform type")):(e.type="1f",this.renderer.production||Lr(this.type+": No uniform type declared for "+e.name+", applied a 1f (float) uniform type"))),this.handleUniformSetting(e),e.update&&e.update(e)}}updateUniforms(){if(this.uniforms)for(const t in this.uniforms){const e=this.uniforms[t];let i=!1;"Vec2"===e._internalFormat||"Vec3"===e._internalFormat||"Quat"===e._internalFormat?e.value.equals(e.lastValue)||(i=!0,e.lastValue.copy(e.value)):e.value.length?JSON.stringify(e.value)!==JSON.stringify(e.lastValue)&&(i=!0,e.lastValue=Array.from(e.value)):e.value!==e.lastValue&&(i=!0,e.lastValue=e.value),i&&e.update&&e.update(e)}}setUniform1i(t){this.gl.uniform1i(t.location,t.value)}setUniform1iv(t){this.gl.uniform1iv(t.location,t.value)}setUniform1f(t){this.gl.uniform1f(t.location,t.value)}setUniform1fv(t){this.gl.uniform1fv(t.location,t.value)}setUniform2i(t){"Vec2"===t._internalFormat?this.gl.uniform2i(t.location,t.value.x,t.value.y):this.gl.uniform2i(t.location,t.value[0],t.value[1])}setUniform2iv(t){"Vec2"===t._internalFormat?this.gl.uniform2iv(t.location,[t.value.x,t.value.y]):this.gl.uniform2iv(t.location,t.value)}setUniform2f(t){"Vec2"===t._internalFormat?this.gl.uniform2f(t.location,t.value.x,t.value.y):this.gl.uniform2f(t.location,t.value[0],t.value[1])}setUniform2fv(t){"Vec2"===t._internalFormat?this.gl.uniform2fv(t.location,[t.value.x,t.value.y]):this.gl.uniform2fv(t.location,t.value)}setUniform3i(t){"Vec3"===t._internalFormat?this.gl.uniform3i(t.location,t.value.x,t.value.y,t.value.z):this.gl.uniform3i(t.location,t.value[0],t.value[1],t.value[2])}setUniform3iv(t){"Vec3"===t._internalFormat?this.gl.uniform3iv(t.location,[t.value.x,t.value.y,t.value.z]):this.gl.uniform3iv(t.location,t.value)}setUniform3f(t){"Vec3"===t._internalFormat?this.gl.uniform3f(t.location,t.value.x,t.value.y,t.value.z):this.gl.uniform3f(t.location,t.value[0],t.value[1],t.value[2])}setUniform3fv(t){"Vec3"===t._internalFormat?this.gl.uniform3fv(t.location,[t.value.x,t.value.y,t.value.z]):this.gl.uniform3fv(t.location,t.value)}setUniform4i(t){"Quat"===t._internalFormat?this.gl.uniform4i(t.location,t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]):this.gl.uniform4i(t.location,t.value[0],t.value[1],t.value[2],t.value[3])}setUniform4iv(t){"Quat"===t._internalFormat?this.gl.uniform4iv(t.location,[t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]]):this.gl.uniform4iv(t.location,t.value)}setUniform4f(t){"Quat"===t._internalFormat?this.gl.uniform4f(t.location,t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]):this.gl.uniform4f(t.location,t.value[0],t.value[1],t.value[2],t.value[3])}setUniform4fv(t){"Quat"===t._internalFormat?this.gl.uniform4fv(t.location,[t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]]):this.gl.uniform4fv(t.location,t.value)}setUniformMatrix2fv(t){this.gl.uniformMatrix2fv(t.location,!1,t.value)}setUniformMatrix3fv(t){this.gl.uniformMatrix3fv(t.location,!1,t.value)}setUniformMatrix4fv(t){"Mat4"===t._internalFormat?this.gl.uniformMatrix4fv(t.location,!1,t.value.elements):this.gl.uniformMatrix4fv(t.location,!1,t.value)}}var Yr="\nprecision mediump float;\n".replace(/\n/g,""),Xr="\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n".replace(/\n/g,""),$r="\nvarying vec3 vVertexPosition;\nvarying vec2 vTextureCoord;\n".replace(/\n/g,""),Gr=(Yr+Xr+$r+"\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvoid main() {\n    vTextureCoord = aTextureCoord;\n    vVertexPosition = aVertexPosition;\n    \n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n}\n").replace(/\n/g,""),Qr=(Yr+$r+"\nvoid main() {\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n}\n").replace(/\n/g,""),Kr=(Yr+Xr+$r+"\nvoid main() {\n    vTextureCoord = aTextureCoord;\n    vVertexPosition = aVertexPosition;\n    \n    gl_Position = vec4(aVertexPosition, 1.0);\n}\n").replace(/\n/g,""),Zr=(Yr+$r+"\nuniform sampler2D uRenderTexture;\n\nvoid main() {\n    gl_FragColor = texture2D(uRenderTexture, vTextureCoord);\n}\n").replace(/\n/g,"");let Jr=0;class ta{constructor(t,{parent:e,vertexShader:i,fragmentShader:s}={}){if(this.type="Program",t&&"Renderer"===t.type){if(!t.gl)return void Ir(this.type+": Renderer WebGL context is undefined",t)}else Ir(this.type+": Renderer not passed as first argument",t);this.renderer=t,this.gl=this.renderer.gl,this.parent=e,this.defaultVsCode="Plane"===this.parent.type?Gr:Kr,this.defaultFsCode="Plane"===this.parent.type?Qr:Zr,i?this.vsCode=i:(this.renderer.production||"Plane"!==this.parent.type||Lr(this.parent.type+": No vertex shader provided, will use a default one"),this.vsCode=this.defaultVsCode),s?this.fsCode=s:(this.renderer.production||Lr(this.parent.type+": No fragment shader provided, will use a default one"),this.fsCode=this.defaultFsCode),this.compiled=!0,this.setupProgram()}createShader(t,e){const i=this.gl.createShader(e);if(this.gl.shaderSource(i,t),this.gl.compileShader(i),!this.renderer.production&&!this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)){const t=e===this.gl.VERTEX_SHADER?"vertex shader":"fragment shader";let s=this.gl.getShaderSource(i).split("\n");for(let t=0;t<s.length;t++)s[t]=t+1+": "+s[t];return s=s.join("\n"),Lr(this.type+": Errors occurred while compiling the",t,":\n",this.gl.getShaderInfoLog(i)),Ir(s),Lr(this.type+": Will use a default",t),this.createShader(e===this.gl.VERTEX_SHADER?this.defaultVsCode:this.defaultFsCode,e)}return i}useNewShaders(){this.vertexShader=this.createShader(this.vsCode,this.gl.VERTEX_SHADER),this.fragmentShader=this.createShader(this.fsCode,this.gl.FRAGMENT_SHADER),this.vertexShader&&this.fragmentShader||this.renderer.production||Lr(this.type+": Unable to find or compile the vertex or fragment shader")}setupProgram(){let t=this.renderer.cache.getProgramFromShaders(this.vsCode,this.fsCode);t?(this.vertexShader=t.vertexShader,this.fragmentShader=t.fragmentShader,this.activeUniforms=t.activeUniforms,this.activeAttributes=t.activeAttributes,this.createProgram()):(this.useNewShaders(),this.compiled&&(this.createProgram(),this.renderer.cache.addProgram(this)))}createProgram(){if(Jr++,this.id=Jr,this.program=this.gl.createProgram(),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),!this.renderer.production&&!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return Lr(this.type+": Unable to initialize the shader program: "+this.gl.getProgramInfoLog(this.program)),Lr(this.type+": Will use default vertex and fragment shaders"),this.vertexShader=this.createShader(this.defaultVsCode,this.gl.VERTEX_SHADER),this.fragmentShader=this.createShader(this.defaultFsCode,this.gl.FRAGMENT_SHADER),void this.createProgram();if(this.gl.deleteShader(this.vertexShader),this.gl.deleteShader(this.fragmentShader),!this.activeUniforms||!this.activeAttributes){this.activeUniforms={textures:[],textureMatrices:[]};const t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let e=0;e<t;e++){const t=this.gl.getActiveUniform(this.program,e);t.type===this.gl.SAMPLER_2D&&this.activeUniforms.textures.push(t.name),t.type===this.gl.FLOAT_MAT4&&"uMVMatrix"!==t.name&&"uPMatrix"!==t.name&&this.activeUniforms.textureMatrices.push(t.name)}this.activeAttributes=[];const e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let t=0;t<e;t++){const e=this.gl.getActiveAttrib(this.program,t);this.activeAttributes.push(e.name)}}}createUniforms(t){this.uniformsManager=new Hr(this.renderer,this.program,t),this.setUniforms()}setUniforms(){this.renderer.useProgram(this),this.uniformsManager.setUniforms()}updateUniforms(){this.renderer.useProgram(this),this.uniformsManager.updateUniforms()}}class ea{constructor(t,{program:e=null,width:i=1,height:s=1}={}){if(this.type="Geometry",t&&"Renderer"===t.type){if(!t.gl)return void Ir(this.type+": Renderer WebGL context is undefined",t)}else Ir(this.type+": Renderer not passed as first argument",t);this.renderer=t,this.gl=this.renderer.gl,this.definition={id:i*s+i,width:i,height:s},this.setDefaultAttributes(),this.setVerticesUVs()}restoreContext(t){this.program=null,this.setDefaultAttributes(),this.setVerticesUVs(),this.setProgram(t)}setDefaultAttributes(){this.attributes={vertexPosition:{name:"aVertexPosition",size:3,isActive:!1},textureCoord:{name:"aTextureCoord",size:3,isActive:!1}}}setVerticesUVs(){const t=this.renderer.cache.getGeometryFromID(this.definition.id);t?(this.attributes.vertexPosition.array=t.vertices,this.attributes.textureCoord.array=t.uvs):(this.computeVerticesUVs(),this.renderer.cache.addGeometry(this.definition.id,this.attributes.vertexPosition.array,this.attributes.textureCoord.array))}setProgram(t){this.program=t,this.initAttributes(),this.renderer._isWebGL2?(this._vao=this.gl.createVertexArray(),this.gl.bindVertexArray(this._vao)):this.renderer.extensions.OES_vertex_array_object&&(this._vao=this.renderer.extensions.OES_vertex_array_object.createVertexArrayOES(),this.renderer.extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao)),this.initializeBuffers()}initAttributes(){for(const t in this.attributes){if(this.attributes[t].isActive=this.program.activeAttributes.includes(this.attributes[t].name),!this.attributes[t].isActive)return;this.attributes[t].location=this.gl.getAttribLocation(this.program.program,this.attributes[t].name),this.attributes[t].buffer=this.gl.createBuffer(),this.attributes[t].numberOfItems=this.definition.width*this.definition.height*this.attributes[t].size*2}}computeVerticesUVs(){this.attributes.vertexPosition.array=[],this.attributes.textureCoord.array=[];const t=this.attributes.vertexPosition.array,e=this.attributes.textureCoord.array;for(let i=0;i<this.definition.height;i++){const s=i/this.definition.height;for(let i=0;i<this.definition.width;i++){const n=i/this.definition.width;e.push(n),e.push(s),e.push(0),t.push(2*(n-.5)),t.push(2*(s-.5)),t.push(0),e.push(n+1/this.definition.width),e.push(s),e.push(0),t.push(2*(n+1/this.definition.width-.5)),t.push(2*(s-.5)),t.push(0),e.push(n),e.push(s+1/this.definition.height),e.push(0),t.push(2*(n-.5)),t.push(2*(s+1/this.definition.height-.5)),t.push(0),e.push(n),e.push(s+1/this.definition.height),e.push(0),t.push(2*(n-.5)),t.push(2*(s+1/this.definition.height-.5)),t.push(0),e.push(n+1/this.definition.width),e.push(s),e.push(0),t.push(2*(n+1/this.definition.width-.5)),t.push(2*(s-.5)),t.push(0),e.push(n+1/this.definition.width),e.push(s+1/this.definition.height),e.push(0),t.push(2*(n+1/this.definition.width-.5)),t.push(2*(s+1/this.definition.height-.5)),t.push(0)}}}initializeBuffers(){if(this.attributes){for(const t in this.attributes){if(!this.attributes[t].isActive)return;this.gl.enableVertexAttribArray(this.attributes[t].location),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[t].buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.attributes[t].array),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.attributes[t].location,this.attributes[t].size,this.gl.FLOAT,!1,0,0)}this.renderer.state.currentGeometryID=this.definition.id}}bindBuffers(){if(this._vao)this.renderer._isWebGL2?this.gl.bindVertexArray(this._vao):this.renderer.extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao);else for(const t in this.attributes){if(!this.attributes[t].isActive)return;this.gl.enableVertexAttribArray(this.attributes[t].location),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[t].buffer),this.gl.vertexAttribPointer(this.attributes[t].location,this.attributes[t].size,this.gl.FLOAT,!1,0,0)}this.renderer.state.currentGeometryID=this.definition.id}draw(){this.gl.drawArrays(this.gl.TRIANGLES,0,this.attributes.vertexPosition.numberOfItems)}dispose(){this._vao&&(this.renderer._isWebGL2?this.gl.deleteVertexArray(this._vao):this.renderer.extensions.OES_vertex_array_object.deleteVertexArrayOES(this._vao));for(const t in this.attributes){if(!this.attributes[t].isActive)return;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[t].buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,1,this.gl.STATIC_DRAW),this.gl.deleteBuffer(this.attributes[t].buffer)}this.attributes=null,this.renderer.state.currentGeometryID=null}}class ia{constructor(t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])){this.type="Mat4",this.elements=t}setFromArray(t){for(let e=0;e<this.elements.length;e++)this.elements[e]=t[e];return this}copy(t){const e=t.elements;return this.elements[0]=e[0],this.elements[1]=e[1],this.elements[2]=e[2],this.elements[3]=e[3],this.elements[4]=e[4],this.elements[5]=e[5],this.elements[6]=e[6],this.elements[7]=e[7],this.elements[8]=e[8],this.elements[9]=e[9],this.elements[10]=e[10],this.elements[11]=e[11],this.elements[12]=e[12],this.elements[13]=e[13],this.elements[14]=e[14],this.elements[15]=e[15],this}clone(){return(new ia).copy(this)}multiply(t){const e=this.elements,i=t.elements;let s=new ia;return s.elements[0]=i[0]*e[0]+i[1]*e[4]+i[2]*e[8]+i[3]*e[12],s.elements[1]=i[0]*e[1]+i[1]*e[5]+i[2]*e[9]+i[3]*e[13],s.elements[2]=i[0]*e[2]+i[1]*e[6]+i[2]*e[10]+i[3]*e[14],s.elements[3]=i[0]*e[3]+i[1]*e[7]+i[2]*e[11]+i[3]*e[15],s.elements[4]=i[4]*e[0]+i[5]*e[4]+i[6]*e[8]+i[7]*e[12],s.elements[5]=i[4]*e[1]+i[5]*e[5]+i[6]*e[9]+i[7]*e[13],s.elements[6]=i[4]*e[2]+i[5]*e[6]+i[6]*e[10]+i[7]*e[14],s.elements[7]=i[4]*e[3]+i[5]*e[7]+i[6]*e[11]+i[7]*e[15],s.elements[8]=i[8]*e[0]+i[9]*e[4]+i[10]*e[8]+i[11]*e[12],s.elements[9]=i[8]*e[1]+i[9]*e[5]+i[10]*e[9]+i[11]*e[13],s.elements[10]=i[8]*e[2]+i[9]*e[6]+i[10]*e[10]+i[11]*e[14],s.elements[11]=i[8]*e[3]+i[9]*e[7]+i[10]*e[11]+i[11]*e[15],s.elements[12]=i[12]*e[0]+i[13]*e[4]+i[14]*e[8]+i[15]*e[12],s.elements[13]=i[12]*e[1]+i[13]*e[5]+i[14]*e[9]+i[15]*e[13],s.elements[14]=i[12]*e[2]+i[13]*e[6]+i[14]*e[10]+i[15]*e[14],s.elements[15]=i[12]*e[3]+i[13]*e[7]+i[14]*e[11]+i[15]*e[15],s}getInverse(){const t=this.elements,e=new ia,i=e.elements;let s=t[0],n=t[1],r=t[2],a=t[3],o=t[4],l=t[5],h=t[6],u=t[7],c=t[8],d=t[9],p=t[10],m=t[11],f=t[12],g=t[13],y=t[14],v=t[15],b=s*l-n*o,_=s*h-r*o,D=s*u-a*o,w=n*h-r*l,x=n*u-a*l,T=r*u-a*h,C=c*g-d*f,E=c*y-p*f,S=c*v-m*f,k=d*y-p*g,A=d*v-m*g,P=p*v-m*y,F=b*P-_*A+D*k+w*S-x*E+T*C;return F?(F=1/F,i[0]=(l*P-h*A+u*k)*F,i[1]=(r*A-n*P-a*k)*F,i[2]=(g*T-y*x+v*w)*F,i[3]=(p*x-d*T-m*w)*F,i[4]=(h*S-o*P-u*E)*F,i[5]=(s*P-r*S+a*E)*F,i[6]=(y*D-f*T-v*_)*F,i[7]=(c*T-p*D+m*_)*F,i[8]=(o*A-l*S+u*C)*F,i[9]=(n*S-s*A-a*C)*F,i[10]=(f*x-g*D+v*b)*F,i[11]=(d*D-c*x-m*b)*F,i[12]=(l*E-o*k-h*C)*F,i[13]=(s*k-n*E+r*C)*F,i[14]=(g*_-f*w-y*b)*F,i[15]=(c*w-d*_+p*b)*F,e):null}scale(t){let e=this.elements;return e[0]*=t.x,e[1]*=t.x,e[2]*=t.x,e[3]*=t.x,e[4]*=t.y,e[5]*=t.y,e[6]*=t.y,e[7]*=t.y,e[8]*=t.z,e[9]*=t.z,e[10]*=t.z,e[11]*=t.z,this}compose(t,e,i){let s=this.elements;const n=e.elements[0],r=e.elements[1],a=e.elements[2],o=e.elements[3],l=n+n,h=r+r,u=a+a,c=n*l,d=n*h,p=n*u,m=r*h,f=r*u,g=a*u,y=o*l,v=o*h,b=o*u,_=i.x,D=i.y,w=i.z;return s[0]=(1-(m+g))*_,s[1]=(d+b)*_,s[2]=(p-v)*_,s[3]=0,s[4]=(d-b)*D,s[5]=(1-(c+g))*D,s[6]=(f+y)*D,s[7]=0,s[8]=(p+v)*w,s[9]=(f-y)*w,s[10]=(1-(c+m))*w,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}composeFromOrigin(t,e,i,s){let n=this.elements;const r=e.elements[0],a=e.elements[1],o=e.elements[2],l=e.elements[3],h=r+r,u=a+a,c=o+o,d=r*h,p=r*u,m=r*c,f=a*u,g=a*c,y=o*c,v=l*h,b=l*u,_=l*c,D=i.x,w=i.y,x=i.z,T=s.x,C=s.y,E=s.z,S=(1-(f+y))*D,k=(p+_)*D,A=(m-b)*D,P=(p-_)*w,F=(1-(d+y))*w,M=(g+v)*w,O=(m+b)*x,R=(g-v)*x,L=(1-(d+f))*x;return n[0]=S,n[1]=k,n[2]=A,n[3]=0,n[4]=P,n[5]=F,n[6]=M,n[7]=0,n[8]=O,n[9]=R,n[10]=L,n[11]=0,n[12]=t.x+T-(S*T+P*C+O*E),n[13]=t.y+C-(k*T+F*C+R*E),n[14]=t.z+E-(A*T+M*C+L*E),n[15]=1,this}}class sa{constructor(t=0,e=t){this.type="Vec2",this._x=t,this._y=e}get x(){return this._x}get y(){return this._y}set x(t){const e=t!==this._x;this._x=t,e&&this._onChangeCallback&&this._onChangeCallback()}set y(t){const e=t!==this._y;this._y=t,e&&this._onChangeCallback&&this._onChangeCallback()}onChange(t){return t&&(this._onChangeCallback=t),this}set(t,e){return this._x=t,this._y=e,this}add(t){return this._x+=t.x,this._y+=t.y,this}addScalar(t){return this._x+=t,this._y+=t,this}sub(t){return this._x-=t.x,this._y-=t.y,this}subScalar(t){return this._x-=t,this._y-=t,this}multiply(t){return this._x*=t.x,this._y*=t.y,this}multiplyScalar(t){return this._x*=t,this._y*=t,this}copy(t){return this._x=t.x,this._y=t.y,this}clone(){return new sa(this._x,this._y)}sanitizeNaNValuesWith(t){return this._x=isNaN(this._x)?t.x:parseFloat(this._x),this._y=isNaN(this._y)?t.y:parseFloat(this._y),this}max(t){return this._x=Math.max(this._x,t.x),this._y=Math.max(this._y,t.y),this}min(t){return this._x=Math.min(this._x,t.x),this._y=Math.min(this._y,t.y),this}equals(t){return this._x===t.x&&this._y===t.y}normalize(){let t=this._x*this._x+this._y*this._y;return t>0&&(t=1/Math.sqrt(t)),this._x*=t,this._y*=t,this}dot(t){return this._x*t.x+this._y*t.y}}class na{constructor(t=0,e=t,i=t){this.type="Vec3",this._x=t,this._y=e,this._z=i}get x(){return this._x}get y(){return this._y}get z(){return this._z}set x(t){const e=t!==this._x;this._x=t,e&&this._onChangeCallback&&this._onChangeCallback()}set y(t){const e=t!==this._y;this._y=t,e&&this._onChangeCallback&&this._onChangeCallback()}set z(t){const e=t!==this._z;this._z=t,e&&this._onChangeCallback&&this._onChangeCallback()}onChange(t){return t&&(this._onChangeCallback=t),this}set(t,e,i){return this._x=t,this._y=e,this._z=i,this}add(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this}addScalar(t){return this._x+=t,this._y+=t,this._z+=t,this}sub(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this}subScalar(t){return this._x-=t,this._y-=t,this._z-=t,this}multiply(t){return this._x*=t.x,this._y*=t.y,this._z*=t.z,this}multiplyScalar(t){return this._x*=t,this._y*=t,this._z*=t,this}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this}clone(){return new na(this._x,this._y,this._z)}sanitizeNaNValuesWith(t){return this._x=isNaN(this._x)?t.x:parseFloat(this._x),this._y=isNaN(this._y)?t.y:parseFloat(this._y),this._z=isNaN(this._z)?t.z:parseFloat(this._z),this}max(t){return this._x=Math.max(this._x,t.x),this._y=Math.max(this._y,t.y),this._z=Math.max(this._z,t.z),this}min(t){return this._x=Math.min(this._x,t.x),this._y=Math.min(this._y,t.y),this._z=Math.min(this._z,t.z),this}equals(t){return this._x===t.x&&this._y===t.y&&this._z===t.z}normalize(){let t=this._x*this._x+this._y*this._y+this._z*this._z;return t>0&&(t=1/Math.sqrt(t)),this._x*=t,this._y*=t,this._z*=t,this}dot(t){return this._x*t.x+this._y*t.y+this._z*t.z}applyMat4(t){const e=this._x,i=this._y,s=this._z,n=t.elements;let r=n[3]*e+n[7]*i+n[11]*s+n[15];return r=r||1,this._x=(n[0]*e+n[4]*i+n[8]*s+n[12])/r,this._y=(n[1]*e+n[5]*i+n[9]*s+n[13])/r,this._z=(n[2]*e+n[6]*i+n[10]*s+n[14])/r,this}applyQuat(t){const e=this._x,i=this._y,s=this._z,n=t.elements[0],r=t.elements[1],a=t.elements[2],o=t.elements[3],l=o*e+r*s-a*i,h=o*i+a*e-n*s,u=o*s+n*i-r*e,c=-n*e-r*i-a*s;return this._x=l*o+c*-n+h*-a-u*-r,this._y=h*o+c*-r+u*-n-l*-a,this._z=u*o+c*-a+l*-r-h*-n,this}project(t){return this.applyMat4(t.viewMatrix).applyMat4(t.projectionMatrix),this}unproject(t){return this.applyMat4(t.projectionMatrix.getInverse()).applyMat4(t.worldMatrix),this}}const ra=new sa,aa=new na,oa=new ia;class la{constructor(t,{isFBOTexture:e=!1,fromTexture:i=!1,loader:s,sampler:n,floatingPoint:r="none",premultiplyAlpha:a=!1,anisotropy:o=1,generateMipmap:l=null,wrapS:h,wrapT:u,minFilter:c,magFilter:d}={}){if(this.type="Texture",(t=t&&t.renderer||t)&&"Renderer"===t.type){if(!t.gl)return void(t.production||Ir(this.type+": Unable to create a "+this.type+" because the Renderer WebGL context is not defined"))}else Ir(this.type+": Renderer not passed as first argument",t);if(this.renderer=t,this.gl=this.renderer.gl,this.uuid=Br(),this._globalParameters={unpackAlignment:4,flipY:!e,premultiplyAlpha:!1,shouldPremultiplyAlpha:a,floatingPoint:r,type:this.gl.UNSIGNED_BYTE,internalFormat:this.gl.RGBA,format:this.gl.RGBA},this.parameters={anisotropy:o,generateMipmap:l,wrapS:h||this.gl.CLAMP_TO_EDGE,wrapT:u||this.gl.CLAMP_TO_EDGE,minFilter:c||this.gl.LINEAR,magFilter:d||this.gl.LINEAR,_shouldUpdate:!0},this._initState(),this.sourceType=e?"fbo":"empty",this._useCache=!0,this._samplerName=n,this._sampler={isActive:!1,isTextureBound:!1,texture:this.gl.createTexture()},this._textureMatrix={matrix:new ia,isActive:!1},this._size={width:1,height:1},this.scale=new sa(1),this.scale.onChange((()=>this.resize())),this.offset=new sa,this.offset.onChange((()=>this.resize())),this._loader=s,this._sourceLoaded=!1,this._uploaded=!1,this._willUpdate=!1,this.shouldUpdate=!1,this._forceUpdate=!1,this.userData={},this._canDraw=!1,i)return this._copyOnInit=!0,void(this._copiedFrom=i);this._copyOnInit=!1,this._initTexture()}_initState(){this._state={anisotropy:1,generateMipmap:!1,wrapS:null,wrapT:null,minFilter:null,magFilter:this.gl.LINEAR}}_initTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),"empty"===this.sourceType&&(this._globalParameters.flipY=!1,this._updateGlobalTexParameters(),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array([0,0,0,255])),this._canDraw=!0)}_restoreFromTexture(){this._copyOnInit||this._initTexture(),this._parent&&(this._setTextureUniforms(),this._setSize()),this.copy(this._copiedFrom),this._canDraw=!0}_restoreContext(){if(this._canDraw=!1,this._sampler.texture=this.gl.createTexture(),this._sampler.isActive=!1,this._sampler.isTextureBound=!1,this._textureMatrix.isActive=!1,this._initState(),this._state.generateMipmap=!1,this.parameters._shouldUpdate=!0,this._copiedFrom){const t=this.renderer.nextRender.add((()=>{this._copiedFrom._canDraw&&(this._restoreFromTexture(),t.keep=!1)}),!0)}else this._initTexture(),this._parent&&this._setParent(),this.source&&(this.setSource(this.source),"image"===this.sourceType?this.renderer.cache.addTexture(this):this.needUpdate()),this._canDraw=!0}addParent(t){!t||"Plane"!==t.type&&"PingPongPlane"!==t.type&&"ShaderPass"!==t.type&&"RenderTarget"!==t.type?this.renderer.production||Lr(this.type+": cannot add texture as a child of ",t," because it is not a valid parent"):(this._parent=t,this.index=this._parent.textures.length,this._parent.textures.push(this),this._setParent())}_setParent(){if(this._sampler.name=this._samplerName||"uSampler"+this.index,this._textureMatrix.name=this._samplerName?this._samplerName+"Matrix":"uTextureMatrix"+this.index,this._parent._program){if(!this._parent._program.compiled)return void(this.renderer.production||Lr(this.type+": Unable to create the texture because the program is not valid"));if(this._setTextureUniforms(),this._copyOnInit){const t=this.renderer.nextRender.add((()=>{this._copiedFrom._canDraw&&this._copiedFrom._uploaded&&(this.copy(this._copiedFrom),t.keep=!1)}),!0);return}this.source?this._parent.loader&&this._parent.loader._addSourceToParent(this.source,this.sourceType):this._size={width:this._parent._boundingRect.document.width,height:this._parent._boundingRect.document.height},this._setSize()}else"RenderTarget"===this._parent.type&&(this._size={width:this._parent._size&&this._parent._size.width||this.renderer._boundingRect.width,height:this._parent._size&&this._parent._size.height||this.renderer._boundingRect.height},this._upload(),this._updateTexParameters(),this._canDraw=!0)}hasParent(){return!!this._parent}_setTextureUniforms(){const t=this._parent._program.activeUniforms;for(let e=0;e<t.textures.length;e++)t.textures[e]===this._sampler.name&&(this._sampler.isActive=!0,this.renderer.useProgram(this._parent._program),this._sampler.location=this.gl.getUniformLocation(this._parent._program.program,this._sampler.name),t.textureMatrices.find((t=>t===this._textureMatrix.name))&&(this._textureMatrix.isActive=!0,this._textureMatrix.location=this.gl.getUniformLocation(this._parent._program.program,this._textureMatrix.name)),this.gl.uniform1i(this._sampler.location,this.index))}copy(t){t&&"Texture"===t.type?(this._globalParameters=Object.assign({},t._globalParameters),this._state=Object.assign({},t._state),this.parameters.generateMipmap=t.parameters.generateMipmap,this._state.generateMipmap=null,this._size=t._size,!this._sourceLoaded&&t._sourceLoaded&&this._onSourceLoadedCallback&&this._onSourceLoadedCallback(),this._sourceLoaded=t._sourceLoaded,!this._uploaded&&t._uploaded&&this._onSourceUploadedCallback&&this._onSourceUploadedCallback(),this._uploaded=t._uploaded,this.sourceType=t.sourceType,this.source=t.source,this._videoFrameCallbackID=t._videoFrameCallbackID,this._sampler.texture=t._sampler.texture,this._copiedFrom=t,!this._parent||!this._parent._program||this._canDraw&&this._textureMatrix.matrix||(this._setSize(),this._canDraw=!0),this._updateTexParameters(),this.renderer.needRender()):this.renderer.production||Lr(this.type+": Unable to set the texture from texture:",t)}setSource(t){this._sourceLoaded||this.renderer.nextRender.add((()=>this._onSourceLoadedCallback&&this._onSourceLoadedCallback()));const e="IMG"===t.tagName.toUpperCase()?"image":t.tagName.toLowerCase();if("video"!==e&&"canvas"!==e||(this._useCache=!1),this._useCache){const e=this.renderer.cache.getTextureFromSource(t);if(e&&e.uuid!==this.uuid)return this._uploaded||(this.renderer.nextRender.add((()=>this._onSourceUploadedCallback&&this._onSourceUploadedCallback())),this._uploaded=!0),this.copy(e),void this.resize()}if("empty"===this.sourceType||this.sourceType!==e)if("video"===e)this._willUpdate=!1,this.shouldUpdate=!0;else if("canvas"===e)this._willUpdate=!0,this.shouldUpdate=!0;else{if("image"!==e)return void(this.renderer.production||Lr(this.type+": this HTML tag could not be converted into a texture:",t.tagName));this._willUpdate=!1,this.shouldUpdate=!1}this.source=t,this.sourceType=e,this._size={width:this.source.naturalWidth||this.source.width||this.source.videoWidth,height:this.source.naturalHeight||this.source.height||this.source.videoHeight},this._sourceLoaded=!0,this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.resize(),this._globalParameters.flipY=!0,this._globalParameters.premultiplyAlpha=this._globalParameters.shouldPremultiplyAlpha,"image"===this.sourceType&&(this.parameters.generateMipmap=this.parameters.generateMipmap||null===this.parameters.generateMipmap,this.parameters._shouldUpdate=this.parameters.generateMipmap,this._state.generateMipmap=!1,this._upload()),this.renderer.needRender()}_updateGlobalTexParameters(){this.renderer.state.unpackAlignment!==this._globalParameters.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this._globalParameters.unpackAlignment),this.renderer.state.unpackAlignment=this._globalParameters.unpackAlignment),this.renderer.state.flipY!==this._globalParameters.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this._globalParameters.flipY),this.renderer.state.flipY=this._globalParameters.flipY),this.renderer.state.premultiplyAlpha!==this._globalParameters.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._globalParameters.premultiplyAlpha),this.renderer.state.premultiplyAlpha=this._globalParameters.premultiplyAlpha),"half-float"===this._globalParameters.floatingPoint?this.renderer._isWebGL2&&this.renderer.extensions.EXT_color_buffer_float?(this._globalParameters.internalFormat=this.gl.RGBA16F,this._globalParameters.type=this.gl.HALF_FLOAT):this.renderer.extensions.OES_texture_half_float?this._globalParameters.type=this.renderer.extensions.OES_texture_half_float.HALF_FLOAT_OES:this.renderer.production||Lr(this.type+": could not use half-float textures because the extension is not available"):"float"===this._globalParameters.floatingPoint&&(this.renderer._isWebGL2&&this.renderer.extensions.EXT_color_buffer_float?(this._globalParameters.internalFormat=this.gl.RGBA16F,this._globalParameters.type=this.gl.FLOAT):this.renderer.extensions.OES_texture_float?this._globalParameters.type=this.renderer.extensions.OES_texture_half_float.FLOAT:this.renderer.production||Lr(this.type+": could not use float textures because the extension is not available"))}_updateTexParameters(){this.index&&this.renderer.state.activeTexture!==this.index&&this._bindTexture(),this.parameters.wrapS!==this._state.wrapS&&(this.renderer._isWebGL2||Nr(this._size.width)&&Nr(this._size.height)||(this.parameters.wrapS=this.gl.CLAMP_TO_EDGE),this.parameters.wrapS!==this.gl.REPEAT&&this.parameters.wrapS!==this.gl.CLAMP_TO_EDGE&&this.parameters.wrapS!==this.gl.MIRRORED_REPEAT&&(this.renderer.production||Lr(this.type+": Wrong wrapS value",this.parameters.wrapS,"for this texture:",this,"\ngl.CLAMP_TO_EDGE wrapping will be used instead"),this.parameters.wrapS=this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.parameters.wrapS),this._state.wrapS=this.parameters.wrapS),this.parameters.wrapT!==this._state.wrapT&&(this.renderer._isWebGL2||Nr(this._size.width)&&Nr(this._size.height)||(this.parameters.wrapT=this.gl.CLAMP_TO_EDGE),this.parameters.wrapT!==this.gl.REPEAT&&this.parameters.wrapT!==this.gl.CLAMP_TO_EDGE&&this.parameters.wrapT!==this.gl.MIRRORED_REPEAT&&(this.renderer.production||Lr(this.type+": Wrong wrapT value",this.parameters.wrapT,"for this texture:",this,"\ngl.CLAMP_TO_EDGE wrapping will be used instead"),this.parameters.wrapT=this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.parameters.wrapT),this._state.wrapT=this.parameters.wrapT),this.parameters.generateMipmap&&!this._state.generateMipmap&&this.source&&(this.renderer._isWebGL2||Nr(this._size.width)&&Nr(this._size.height)?this.gl.generateMipmap(this.gl.TEXTURE_2D):this.parameters.generateMipmap=!1,this._state.generateMipmap=this.parameters.generateMipmap),this.parameters.minFilter!==this._state.minFilter&&(this.renderer._isWebGL2||Nr(this._size.width)&&Nr(this._size.height)||(this.parameters.minFilter=this.gl.LINEAR),this.parameters.generateMipmap||null===this.parameters.generateMipmap||(this.parameters.minFilter=this.gl.LINEAR),this.parameters.minFilter!==this.gl.LINEAR&&this.parameters.minFilter!==this.gl.NEAREST&&this.parameters.minFilter!==this.gl.NEAREST_MIPMAP_NEAREST&&this.parameters.minFilter!==this.gl.LINEAR_MIPMAP_NEAREST&&this.parameters.minFilter!==this.gl.NEAREST_MIPMAP_LINEAR&&this.parameters.minFilter!==this.gl.LINEAR_MIPMAP_LINEAR&&(this.renderer.production||Lr(this.type+": Wrong minFilter value",this.parameters.minFilter,"for this texture:",this,"\ngl.LINEAR filtering will be used instead"),this.parameters.minFilter=this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.parameters.minFilter),this._state.minFilter=this.parameters.minFilter),this.parameters.magFilter!==this._state.magFilter&&(this.renderer._isWebGL2||Nr(this._size.width)&&Nr(this._size.height)||(this.parameters.magFilter=this.gl.LINEAR),this.parameters.magFilter!==this.gl.LINEAR&&this.parameters.magFilter!==this.gl.NEAREST&&(this.renderer.production||Lr(this.type+": Wrong magFilter value",this.parameters.magFilter,"for this texture:",this,"\ngl.LINEAR filtering will be used instead"),this.parameters.magFilter=this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.parameters.magFilter),this._state.magFilter=this.parameters.magFilter);const t=this.renderer.extensions.EXT_texture_filter_anisotropic;if(t&&this.parameters.anisotropy!==this._state.anisotropy){const e=this.gl.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.parameters.anisotropy=Math.max(1,Math.min(this.parameters.anisotropy,e)),this.gl.texParameterf(this.gl.TEXTURE_2D,t.TEXTURE_MAX_ANISOTROPY_EXT,this.parameters.anisotropy),this._state.anisotropy=this.parameters.anisotropy}}setWrapS(t){this.parameters.wrapS!==t&&(this.parameters.wrapS=t,this.parameters._shouldUpdate=!0)}setWrapT(t){this.parameters.wrapT!==t&&(this.parameters.wrapT=t,this.parameters._shouldUpdate=!0)}setMinFilter(t){this.parameters.minFilter!==t&&(this.parameters.minFilter=t,this.parameters._shouldUpdate=!0)}setMagFilter(t){this.parameters.magFilter!==t&&(this.parameters.magFilter=t,this.parameters._shouldUpdate=!0)}setAnisotropy(t){t=isNaN(t)?this.parameters.anisotropy:t,this.parameters.anisotropy!==t&&(this.parameters.anisotropy=t,this.parameters._shouldUpdate=!0)}needUpdate(){this._forceUpdate=!0}_videoFrameCallback(){this._willUpdate=!0,this.source.requestVideoFrameCallback((()=>this._videoFrameCallback()))}_upload(){this._updateGlobalTexParameters(),this.source?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._globalParameters.format,this._globalParameters.type,this.source):"fbo"===this.sourceType&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._size.width,this._size.height,0,this._globalParameters.format,this._globalParameters.type,this.source||null),this._uploaded||(this.renderer.nextRender.add((()=>this._onSourceUploadedCallback&&this._onSourceUploadedCallback())),this._uploaded=!0)}_getSizes(){if("fbo"===this.sourceType)return{parentWidth:this._parent._boundingRect.document.width,parentHeight:this._parent._boundingRect.document.height,sourceWidth:this._parent._boundingRect.document.width,sourceHeight:this._parent._boundingRect.document.height,xOffset:0,yOffset:0};const t=this._parent.scale?ra.set(this._parent.scale.x,this._parent.scale.y):ra.set(1,1),e=this._parent._boundingRect.document.width*t.x,i=this._parent._boundingRect.document.height*t.y,s=this._size.width,n=this._size.height,r=s/n,a=e/i;let o=0,l=0;return a>r?l=Math.min(0,i-e*(1/r)):a<r&&(o=Math.min(0,e-i*r)),{parentWidth:e,parentHeight:i,sourceWidth:s,sourceHeight:n,xOffset:o,yOffset:l}}setScale(t){t.type&&"Vec2"===t.type?(t.sanitizeNaNValuesWith(this.scale).max(ra.set(.001,.001)),t.equals(this.scale)||(this.scale.copy(t),this.resize())):this.renderer.production||Lr(this.type+": Cannot set scale because the parameter passed is not of Vec2 type:",t)}setOffset(t){t.type&&"Vec2"===t.type?(t.sanitizeNaNValuesWith(this.offset),t.equals(this.offset)||(this.offset.copy(t),this.resize())):this.renderer.production||Lr(this.type+": Cannot set offset because the parameter passed is not of Vec2 type:",scale)}_setSize(){if(this._parent&&this._parent._program){const t=this._getSizes();this._updateTextureMatrix(t)}}resize(){"fbo"===this.sourceType?(this._size={width:this._parent._size&&this._parent._size.width||this._parent._boundingRect.document.width,height:this._parent._size&&this._parent._size.height||this._parent._boundingRect.document.height},this._copiedFrom||(this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._size.width,this._size.height,0,this._globalParameters.format,this._globalParameters.type,null))):this.source&&(this._size={width:this.source.naturalWidth||this.source.width||this.source.videoWidth,height:this.source.naturalHeight||this.source.height||this.source.videoHeight}),this._setSize()}_updateTextureMatrix(t){const e=aa.set(t.parentWidth/(t.parentWidth-t.xOffset),t.parentHeight/(t.parentHeight-t.yOffset),1);e.x/=this.scale.x,e.y/=this.scale.y,this._textureMatrix.matrix=oa.setFromArray([e.x,0,0,0,0,e.y,0,0,0,0,1,0,(1-e.x)/2+this.offset.x,(1-e.y)/2+this.offset.y,0,1]),this._updateMatrixUniform()}_updateMatrixUniform(){this._textureMatrix.isActive&&(this.renderer.useProgram(this._parent._program),this.gl.uniformMatrix4fv(this._textureMatrix.location,!1,this._textureMatrix.matrix.elements))}_onSourceLoaded(t){this.setSource(t),"image"===this.sourceType&&this.renderer.cache.addTexture(this)}_bindTexture(){this._canDraw&&(this.renderer.state.activeTexture!==this.index&&(this.gl.activeTexture(this.gl.TEXTURE0+this.index),this.renderer.state.activeTexture=this.index),this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this._sampler.isTextureBound||(this._sampler.isTextureBound=!!this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._sampler.isTextureBound&&this.renderer.needRender()))}_draw(){this._sampler.isActive&&(this._bindTexture(),"video"===this.sourceType&&this.source&&!this._videoFrameCallbackID&&this.source.readyState>=this.source.HAVE_CURRENT_DATA&&!this.source.paused&&(this._willUpdate=!0),(this._forceUpdate||this._willUpdate&&this.shouldUpdate)&&(this._state.generateMipmap=!1,this._upload()),"video"===this.sourceType&&(this._willUpdate=!1),this._forceUpdate=!1),this.parameters._shouldUpdate&&(this._updateTexParameters(),this.parameters._shouldUpdate=!1)}onSourceLoaded(t){return t&&(this._onSourceLoadedCallback=t),this}onSourceUploaded(t){return t&&(this._onSourceUploadedCallback=t),this}_dispose(t=!1){"video"===this.sourceType||"image"===this.sourceType&&!this.renderer.state.isActive?(this._loader&&this._loader._removeSource(this),this.source=null):"canvas"===this.sourceType&&(this.source.width=this.source.width,this.source=null),this._parent=null,this.gl&&!this._copiedFrom&&(t||"image"!==this.sourceType||!this.renderer.state.isActive)&&(this._canDraw=!1,this.renderer.cache.removeTexture(this),this.gl.activeTexture(this.gl.TEXTURE0+this.index),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.deleteTexture(this._sampler.texture))}}class ha{constructor(t,e="anonymous"){if(this.type="TextureLoader",(t=t&&t.renderer||t)&&"Renderer"===t.type){if(!t.gl)return void Ir(this.type+": Renderer WebGL context is undefined",t)}else Ir(this.type+": Renderer not passed as first argument",t);this.renderer=t,this.gl=this.renderer.gl,this.crossOrigin=e,this.elements=[]}_addElement(t,e,i,s){const n={source:t,texture:e,load:this._sourceLoaded.bind(this,t,e,i),error:this._sourceLoadError.bind(this,t,s)};return this.elements.push(n),n}_sourceLoadError(t,e,i){e&&e(t,i)}_sourceLoaded(t,e,i){e._sourceLoaded||(e._onSourceLoaded(t),this._parent&&(this._increment&&this._increment(),this.renderer.nextRender.add((()=>this._parent._onLoadingCallback&&this._parent._onLoadingCallback(e)))),i&&i(e))}_getSourceType(t){let e;return"string"==typeof t?null!==t.match(/\.(jpeg|jpg|jfif|pjpeg|pjp|gif|bmp|png|webp|svg|avif|apng)$/)?e="image":null!==t.match(/\.(webm|mp4|mpg|mpeg|avi|ogg|ogm|ogv|mov|av1)$/)&&(e="video"):"IMG"===t.tagName.toUpperCase()?e="image":"VIDEO"===t.tagName.toUpperCase()?e="video":"CANVAS"===t.tagName.toUpperCase()&&(e="canvas"),e}_createImage(t){if("string"!=typeof t&&t.hasAttribute("crossOrigin"))return t;{const e=new Image;return e.crossOrigin=this.crossOrigin,"string"==typeof t?e.src=t:(e.src=t.src,t.hasAttribute("data-sampler")&&e.setAttribute("data-sampler",t.getAttribute("data-sampler"))),e}}_createVideo(t){if("string"==typeof t||null===t.getAttribute("crossOrigin")){const e=document.createElement("video");return e.crossOrigin=this.crossOrigin,"string"==typeof t?e.src=t:(e.src=t.src,t.hasAttribute("data-sampler")&&e.setAttribute("data-sampler",t.getAttribute("data-sampler"))),e}return t}loadSource(t,e,i,s){switch(this._getSourceType(t)){case"image":this.loadImage(t,e,i,s);break;case"video":this.loadVideo(t,e,i,s);break;case"canvas":this.loadCanvas(t,e,i);break;default:this._sourceLoadError(t,s,"this source could not be converted into a texture: "+t)}}loadSources(t,e,i,s){for(let n=0;n<t.length;n++)this.loadSource(t[n],e,i,s)}loadImage(t,e={},i,s){const n=this.renderer.cache.getTextureFromSource(t);let r=Object.assign({},e);if(this._parent&&(r=Object.assign(r,this._parent._texturesOptions)),r.loader=this,n){r.sampler="string"!=typeof t&&t.hasAttribute("data-sampler")?t.getAttribute("data-sampler"):r.sampler,r.fromTexture=n;const e=new la(this.renderer,r);return this._sourceLoaded(n.source,e,i),void(this._parent&&this._addToParent(e,n.source,"image"))}const a=this._createImage(t);r.sampler=a.hasAttribute("data-sampler")?a.getAttribute("data-sampler"):r.sampler;const o=new la(this.renderer,r),l=this._addElement(a,o,i,s);a.complete?this._sourceLoaded(a,o,i):a.decode?a.decode().then(this._sourceLoaded.bind(this,a,o,i)).catch((()=>{a.addEventListener("load",l.load,!1),a.addEventListener("error",l.error,!1)})):(a.addEventListener("load",l.load,!1),a.addEventListener("error",l.error,!1)),this._parent&&this._addToParent(o,a,"image")}loadImages(t,e,i,s){for(let n=0;n<t.length;n++)this.loadImage(t[n],e,i,s)}loadVideo(t,e={},i,s){const n=this._createVideo(t);n.preload=!0,n.muted=!0,n.loop=!0,n.setAttribute("playsinline",""),n.crossOrigin=this.crossOrigin;let r=Object.assign({},e);this._parent&&(r=Object.assign(e,this._parent._texturesOptions)),r.loader=this,r.sampler=n.hasAttribute("data-sampler")?n.getAttribute("data-sampler"):r.sampler;const a=new la(this.renderer,r),o=this._addElement(n,a,i,s);n.addEventListener("canplaythrough",o.load,!1),n.addEventListener("error",o.error,!1),n.readyState>=n.HAVE_FUTURE_DATA&&i&&this._sourceLoaded(n,a,i),n.load(),this._addToParent&&this._addToParent(a,n,"video"),"requestVideoFrameCallback"in HTMLVideoElement.prototype&&(o.videoFrameCallback=a._videoFrameCallback.bind(a),a._videoFrameCallbackID=n.requestVideoFrameCallback(o.videoFrameCallback))}loadVideos(t,e,i,s){for(let n=0;n<t.length;n++)this.loadVideo(t[n],e,i,s)}loadCanvas(t,e={},i){let s=Object.assign({},e);this._parent&&(s=Object.assign(e,this._parent._texturesOptions)),s.loader=this,s.sampler=t.hasAttribute("data-sampler")?t.getAttribute("data-sampler"):s.sampler;const n=new la(this.renderer,s);this._addElement(t,n,i,null),this._sourceLoaded(t,n,i),this._parent&&this._addToParent(n,t,"canvas")}loadCanvases(t,e,i){for(let s=0;s<t.length;s++)this.loadCanvas(t[s],e,i)}_removeSource(t){const e=this.elements.find((e=>e.texture.uuid===t.uuid));e&&("image"===t.sourceType?e.source.removeEventListener("load",e.load,!1):"video"===t.sourceType&&(e.videoFrameCallback&&t._videoFrameCallbackID&&e.source.cancelVideoFrameCallback(t._videoFrameCallbackID),e.source.removeEventListener("canplaythrough",e.load,!1),e.source.pause(),e.source.removeAttribute("src"),e.source.load()),e.source.removeEventListener("error",e.error,!1))}}class ua extends ha{constructor(t,e,{sourcesLoaded:i=0,sourcesToLoad:s=0,complete:n=!1,onComplete:r=(()=>{})}={}){super(t,e.crossOrigin),this.type="PlaneTextureLoader",this._parent=e,"Plane"!==this._parent.type&&"PingPongPlane"!==this._parent.type&&"ShaderPass"!==this._parent.type&&(Lr(this.type+": Wrong parent type assigned to this loader"),this._parent=null),this.sourcesLoaded=i,this.sourcesToLoad=s,this.complete=n,this.onComplete=r}_setLoaderSize(t){this.sourcesToLoad=t,0===this.sourcesToLoad&&(this.complete=!0,this.renderer.nextRender.add((()=>this.onComplete&&this.onComplete())))}_increment(){this.sourcesLoaded++,this.sourcesLoaded>=this.sourcesToLoad&&!this.complete&&(this.complete=!0,this.renderer.nextRender.add((()=>this.onComplete&&this.onComplete())))}_addSourceToParent(t,e){if("image"===e){const e=this._parent.images;!e.find((e=>e.src===t.src))&&e.push(t)}else if("video"===e){const e=this._parent.videos;!e.find((e=>e.src===t.src))&&e.push(t)}else if("canvas"===e){const e=this._parent.canvases;!e.find((e=>e.isSameNode(t)))&&e.push(t)}}_addToParent(t,e,i){this._addSourceToParent(e,i),this._parent&&t.addParent(this._parent)}}const ca=new sa,da=new sa;class pa{constructor({fov:t=50,near:e=.1,far:i=150,width:s,height:n,pixelRatio:r=1}={}){this.position=new na,this.projectionMatrix=new ia,this.worldMatrix=new ia,this.viewMatrix=new ia,this._shouldUpdate=!1,this.setSize(),this.setPerspective(t,e,i,s,n,r)}setFov(t){t=isNaN(t)?this.fov:parseFloat(t),(t=Math.max(1,Math.min(t,179)))!==this.fov&&(this.fov=t,this.setPosition(),this._shouldUpdate=!0),this.setCSSPerspective()}setNear(t){t=isNaN(t)?this.near:parseFloat(t),(t=Math.max(t,.01))!==this.near&&(this.near=t,this._shouldUpdate=!0)}setFar(t){t=isNaN(t)?this.far:parseFloat(t),(t=Math.max(t,50))!==this.far&&(this.far=t,this._shouldUpdate=!0)}setPixelRatio(t){t!==this.pixelRatio&&(this._shouldUpdate=!0),this.pixelRatio=t}setSize(t,e){t===this.width&&e===this.height||(this._shouldUpdate=!0),this.width=t,this.height=e}setPerspective(t,e,i,s,n,r){this.setPixelRatio(r),this.setSize(s,n),this.setFov(t),this.setNear(e),this.setFar(i),this._shouldUpdate&&this.updateProjectionMatrix()}setPosition(){this.position.set(0,0,1),this.worldMatrix.setFromArray([1,0,0,0,0,1,0,0,0,0,1,0,this.position.x,this.position.y,this.position.z,1]),this.viewMatrix=this.viewMatrix.copy(this.worldMatrix).getInverse()}setCSSPerspective(){this.CSSPerspective=Math.pow(Math.pow(this.width/(2*this.pixelRatio),2)+Math.pow(this.height/(2*this.pixelRatio),2),.5)/Math.tan(.5*this.fov*Math.PI/180)}getScreenRatiosFromFov(t=0){const e=this.position.z;t<e?t-=e:t+=e;const i=this.fov*Math.PI/180,s=2*Math.tan(i/2)*Math.abs(t);return{width:s*this.width/this.height,height:s}}updateProjectionMatrix(){const t=this.width/this.height,e=this.near*Math.tan(Math.PI/180*.5*this.fov),i=2*e,s=t*i,n=-.5*s,r=n+s,a=e-i,o=2*this.near/(r-n),l=2*this.near/(e-a),h=(r+n)/(r-n),u=(e+a)/(e-a),c=-(this.far+this.near)/(this.far-this.near),d=-2*this.far*this.near/(this.far-this.near);this.projectionMatrix.setFromArray([o,0,0,0,0,l,0,0,h,u,c,-1,0,0,d,0])}forceUpdate(){this._shouldUpdate=!0}cancelUpdate(){this._shouldUpdate=!1}}class ma{constructor(t=new Float32Array([0,0,0,1]),e="XYZ"){this.type="Quat",this.elements=t,this.axisOrder=e}setFromArray(t){return this.elements[0]=t[0],this.elements[1]=t[1],this.elements[2]=t[2],this.elements[3]=t[3],this}setAxisOrder(t){switch(t=t.toUpperCase()){case"XYZ":case"YXZ":case"ZXY":case"ZYX":case"YZX":case"XZY":this.axisOrder=t;break;default:this.axisOrder="XYZ"}return this}copy(t){return this.elements=t.elements,this.axisOrder=t.axisOrder,this}clone(){return(new ma).copy(this)}equals(t){return this.elements[0]===t.elements[0]&&this.elements[1]===t.elements[1]&&this.elements[2]===t.elements[2]&&this.elements[3]===t.elements[3]&&this.axisOrder===t.axisOrder}setFromVec3(t){const e=.5*t.x,i=.5*t.y,s=.5*t.z,n=Math.cos(e),r=Math.cos(i),a=Math.cos(s),o=Math.sin(e),l=Math.sin(i),h=Math.sin(s);return"XYZ"===this.axisOrder?(this.elements[0]=o*r*a+n*l*h,this.elements[1]=n*l*a-o*r*h,this.elements[2]=n*r*h+o*l*a,this.elements[3]=n*r*a-o*l*h):"YXZ"===this.axisOrder?(this.elements[0]=o*r*a+n*l*h,this.elements[1]=n*l*a-o*r*h,this.elements[2]=n*r*h-o*l*a,this.elements[3]=n*r*a+o*l*h):"ZXY"===this.axisOrder?(this.elements[0]=o*r*a-n*l*h,this.elements[1]=n*l*a+o*r*h,this.elements[2]=n*r*h+o*l*a,this.elements[3]=n*r*a-o*l*h):"ZYX"===this.axisOrder?(this.elements[0]=o*r*a-n*l*h,this.elements[1]=n*l*a+o*r*h,this.elements[2]=n*r*h-o*l*a,this.elements[3]=n*r*a+o*l*h):"YZX"===this.axisOrder?(this.elements[0]=o*r*a+n*l*h,this.elements[1]=n*l*a+o*r*h,this.elements[2]=n*r*h-o*l*a,this.elements[3]=n*r*a-o*l*h):"XZY"===this.axisOrder&&(this.elements[0]=o*r*a-n*l*h,this.elements[1]=n*l*a-o*r*h,this.elements[2]=n*r*h+o*l*a,this.elements[3]=n*r*a+o*l*h),this}}const fa=new sa,ga=new na,ya=new na,va=new na,ba=new na,_a=new na,Da=new na,wa=new na,xa=new na,Ta=new ma,Ca=new na(.5,.5,0),Ea=new na,Sa=new na,ka=new na,Aa=new na,Pa=new sa;class Fa extends class extends class{constructor(t,e="Mesh",{vertexShaderID:i,fragmentShaderID:s,vertexShader:n,fragmentShader:r,uniforms:a={},widthSegments:o=1,heightSegments:l=1,renderOrder:h=0,depthTest:u=!0,cullFace:c="back",texturesOptions:d={},crossOrigin:p="anonymous"}={}){if(this.type=e,(t=t&&t.renderer||t)&&"Renderer"===t.type||(Ir(this.type+": Curtains not passed as first argument or Curtains Renderer is missing",t),setTimeout((()=>{this._onErrorCallback&&this._onErrorCallback()}),0)),this.renderer=t,this.gl=this.renderer.gl,!this.gl)return this.renderer.production||Ir(this.type+": Unable to create a "+this.type+" because the Renderer WebGL context is not defined"),void setTimeout((()=>{this._onErrorCallback&&this._onErrorCallback()}),0);this._canDraw=!1,this.renderOrder=h,this._depthTest=u,this.cullFace=c,"back"!==this.cullFace&&"front"!==this.cullFace&&"none"!==this.cullFace&&(this.cullFace="back"),this.textures=[],this._texturesOptions=Object.assign({premultiplyAlpha:!1,anisotropy:1,floatingPoint:"none",wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR},d),this.crossOrigin=p,!n&&i&&document.getElementById(i)&&(n=document.getElementById(i).innerHTML),!r&&s&&document.getElementById(s)&&(r=document.getElementById(s).innerHTML),this._initMesh(),o=parseInt(o),l=parseInt(l),this._geometry=new ea(this.renderer,{width:o,height:l}),this._program=new ta(this.renderer,{parent:this,vertexShader:n,fragmentShader:r}),this._program.compiled?(this._program.createUniforms(a),this.uniforms=this._program.uniformsManager.uniforms,this._geometry.setProgram(this._program),this.renderer.onSceneChange()):this.renderer.nextRender.add((()=>this._onErrorCallback&&this._onErrorCallback()))}_initMesh(){this.uuid=Br(),this.loader=new ua(this.renderer,this,{sourcesLoaded:0,initSourcesToLoad:0,complete:!1,onComplete:()=>{this._onReadyCallback&&this._onReadyCallback(),this.renderer.needRender()}}),this.images=[],this.videos=[],this.canvases=[],this.userData={},this._canDraw=!0}_restoreContext(){this._canDraw=!1,this._matrices&&(this._matrices=null),this._program=new ta(this.renderer,{parent:this,vertexShader:this._program.vsCode,fragmentShader:this._program.fsCode}),this._program.compiled&&(this._geometry.restoreContext(this._program),this._program.createUniforms(this.uniforms),this.uniforms=this._program.uniformsManager.uniforms,this._programRestored())}setRenderTarget(t){t&&"RenderTarget"===t.type?("Plane"===this.type&&this.renderer.scene.removePlane(this),this.target=t,"Plane"===this.type&&this.renderer.scene.addPlane(this)):this.renderer.production||Lr(this.type+": Could not set the render target because the argument passed is not a RenderTarget class object",t)}setRenderOrder(t=0){(t=isNaN(t)?this.renderOrder:parseInt(t))!==this.renderOrder&&(this.renderOrder=t,this.renderer.scene.setPlaneRenderOrder(this))}createTexture(t={}){const e=new la(this.renderer,Object.assign(this._texturesOptions,t));return e.addParent(this),e}addTexture(t){t&&"Texture"===t.type?t.addParent(this):this.renderer.production||Lr(this.type+": cannot add ",t," to this "+this.type+" because it is not a valid texture")}loadSources(t,e={},i,s){for(let n=0;n<t.length;n++)this.loadSource(t[n],e,i,s)}loadSource(t,e={},i,s){this.loader.loadSource(t,Object.assign(e,this._texturesOptions),(t=>{i&&i(t)}),((t,e)=>{this.renderer.production||Lr(this.type+": this HTML tag could not be converted into a texture:",t.tagName),s&&s(t,e)}))}loadImage(t,e={},i,s){this.loader.loadImage(t,Object.assign(e,this._texturesOptions),(t=>{i&&i(t)}),((t,e)=>{this.renderer.production||Lr(this.type+": There has been an error:\n",e,"\nwhile loading this image:\n",t),s&&s(t,e)}))}loadVideo(t,e={},i,s){this.loader.loadVideo(t,Object.assign(e,this._texturesOptions),(t=>{i&&i(t)}),((t,e)=>{this.renderer.production||Lr(this.type+": There has been an error:\n",e,"\nwhile loading this video:\n",t),s&&s(t,e)}))}loadCanvas(t,e={},i){this.loader.loadCanvas(t,Object.assign(e,this._texturesOptions),(t=>{i&&i(t)}))}loadImages(t,e={},i,s){for(let n=0;n<t.length;n++)this.loadImage(t[n],e,i,s)}loadVideos(t,e={},i,s){for(let n=0;n<t.length;n++)this.loadVideo(t[n],e,i,s)}loadCanvases(t,e={},i){for(let s=0;s<t.length;s++)this.loadCanvas(t[s],e,i)}playVideos(){for(let t=0;t<this.textures.length;t++){const e=this.textures[t];if("video"===e.sourceType){const t=e.source.play();void 0!==t&&t.catch((t=>{this.renderer.production||Lr(this.type+": Could not play the video : ",t)}))}}}_draw(){this.renderer.setDepthTest(this._depthTest),this.renderer.setFaceCulling(this.cullFace),this._program.updateUniforms(),this._geometry.bindBuffers(),this.renderer.state.forceBufferUpdate=!1;for(let t=0;t<this.textures.length;t++)if(this.textures[t]._draw(),this.textures[t]._sampler.isActive&&!this.textures[t]._sampler.isTextureBound)return;this._geometry.draw(),this.renderer.state.activeTexture=null,this._onAfterRenderCallback&&this._onAfterRenderCallback()}onError(t){return t&&(this._onErrorCallback=t),this}onLoading(t){return t&&(this._onLoadingCallback=t),this}onReady(t){return t&&(this._onReadyCallback=t),this}onRender(t){return t&&(this._onRenderCallback=t),this}onAfterRender(t){return t&&(this._onAfterRenderCallback=t),this}remove(){this._canDraw=!1,this.target&&this.renderer.bindFrameBuffer(null),this._dispose(),"Plane"===this.type?this.renderer.removePlane(this):"ShaderPass"===this.type&&(this.target&&(this.target._shaderPass=null,this.target.remove(),this.target=null),this.renderer.removeShaderPass(this))}_dispose(){if(this.gl){this._geometry&&this._geometry.dispose(),this.target&&"ShaderPass"===this.type&&(this.renderer.removeRenderTarget(this.target),this.textures.shift());for(let t=0;t<this.textures.length;t++)this.textures[t]._dispose();this.textures=[]}}}{constructor(t,e,i="DOMMesh",{widthSegments:s,heightSegments:n,renderOrder:r,depthTest:a,cullFace:o,uniforms:l,vertexShaderID:h,fragmentShaderID:u,vertexShader:c,fragmentShader:d,texturesOptions:p,crossOrigin:m}={}){super(t,i,{widthSegments:s,heightSegments:n,renderOrder:r,depthTest:a,cullFace:o,uniforms:l,vertexShaderID:h=h||e&&e.getAttribute("data-vs-id"),fragmentShaderID:u=u||e&&e.getAttribute("data-fs-id"),vertexShader:c,fragmentShader:d,texturesOptions:p,crossOrigin:m}),this.gl&&(this.htmlElement=e,this.htmlElement&&0!==this.htmlElement.length||this.renderer.production||Lr(this.type+": The HTML element you specified does not currently exists in the DOM"),this._setDocumentSizes())}_setDocumentSizes(){let t=this.htmlElement.getBoundingClientRect();this._boundingRect||(this._boundingRect={}),this._boundingRect.document={width:t.width*this.renderer.pixelRatio,height:t.height*this.renderer.pixelRatio,top:t.top*this.renderer.pixelRatio,left:t.left*this.renderer.pixelRatio}}getBoundingRect(){return{width:this._boundingRect.document.width,height:this._boundingRect.document.height,top:this._boundingRect.document.top,left:this._boundingRect.document.left,right:this._boundingRect.document.left+this._boundingRect.document.width,bottom:this._boundingRect.document.top+this._boundingRect.document.height}}resize(){this._setDocumentSizes(),"Plane"===this.type&&(this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._setWorldSizes(),this._applyWorldPositions());for(let t=0;t<this.textures.length;t++)this.textures[t].resize();this.renderer.nextRender.add((()=>this._onAfterResizeCallback&&this._onAfterResizeCallback()))}mouseToPlaneCoords(t){const e=this.scale?this.scale:da.set(1,1),i=ca.set((this._boundingRect.document.width-this._boundingRect.document.width*e.x)/2,(this._boundingRect.document.height-this._boundingRect.document.height*e.y)/2),s=this._boundingRect.document.width*e.x/this.renderer.pixelRatio,n=this._boundingRect.document.height*e.y/this.renderer.pixelRatio,r=(this._boundingRect.document.top+i.y)/this.renderer.pixelRatio,a=(this._boundingRect.document.left+i.x)/this.renderer.pixelRatio;return ca.set((t.x-a)/s*2-1,1-(t.y-r)/n*2)}onAfterResize(t){return t&&(this._onAfterResizeCallback=t),this}}{constructor(t,e,{widthSegments:i,heightSegments:s,renderOrder:n,depthTest:r,cullFace:a,uniforms:o,vertexShaderID:l,fragmentShaderID:h,vertexShader:u,fragmentShader:c,texturesOptions:d,crossOrigin:p,alwaysDraw:m=!1,visible:f=!0,transparent:g=!1,drawCheckMargins:y={top:0,right:0,bottom:0,left:0},autoloadSources:v=!0,watchScroll:b=!0,fov:_=50}={}){super(t,e,"Plane",{widthSegments:i,heightSegments:s,renderOrder:n,depthTest:r,cullFace:a,uniforms:o,vertexShaderID:l,fragmentShaderID:h,vertexShader:u,fragmentShader:c,texturesOptions:d,crossOrigin:p}),this.gl&&(this.index=this.renderer.planes.length,this.target=null,this.alwaysDraw=m,this._shouldDraw=!0,this.visible=f,this._transparent=g,this.drawCheckMargins=y,this.autoloadSources=v,this.watchScroll=b,this._updateMVMatrix=!1,this.camera=new pa({fov:_,width:this.renderer._boundingRect.width,height:this.renderer._boundingRect.height,pixelRatio:this.renderer.pixelRatio}),this._program.compiled&&(this._initPlane(),this.renderer.scene.addPlane(this),this.renderer.planes.push(this)))}_programRestored(){this.target&&this.setRenderTarget(this.renderer.renderTargets[this.target.index]),this._initMatrices(),this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._setWorldSizes(),this._applyWorldPositions(),this.renderer.scene.addPlane(this);for(let t=0;t<this.textures.length;t++)this.textures[t]._parent=this,this.textures[t]._restoreContext();this._canDraw=!0}_initPlane(){this._initTransformValues(),this._initPositions(),this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._initSources()}_initTransformValues(){this.rotation=new na,this.rotation.onChange((()=>this._applyRotation())),this.quaternion=new ma,this.relativeTranslation=new na,this.relativeTranslation.onChange((()=>this._setTranslation())),this._translation=new na,this.scale=new na(1),this.scale.onChange((()=>{this.scale.z=1,this._applyScale()})),this.transformOrigin=new na(.5,.5,0),this.transformOrigin.onChange((()=>{this._setWorldTransformOrigin(),this._updateMVMatrix=!0}))}resetPlane(t){this._initTransformValues(),this._setWorldTransformOrigin(),null!==t&&t?(this.htmlElement=t,this.resize()):t||this.renderer.production||Lr(this.type+": You are trying to reset a plane with a HTML element that does not exist. The old HTML element will be kept instead.")}removeRenderTarget(){this.target&&(this.renderer.scene.removePlane(this),this.target=null,this.renderer.scene.addPlane(this))}_initPositions(){this._initMatrices(),this._setWorldSizes(),this._applyWorldPositions()}_initMatrices(){const t=new ia;this._matrices={world:{matrix:t},modelView:{name:"uMVMatrix",matrix:t,location:this.gl.getUniformLocation(this._program.program,"uMVMatrix")},projection:{name:"uPMatrix",matrix:t,location:this.gl.getUniformLocation(this._program.program,"uPMatrix")},modelViewProjection:{matrix:t}}}_setPerspectiveMatrix(){this.camera._shouldUpdate&&(this.renderer.useProgram(this._program),this.gl.uniformMatrix4fv(this._matrices.projection.location,!1,this._matrices.projection.matrix.elements)),this.camera.cancelUpdate()}setPerspective(t,e,i){this.camera.setPerspective(t,e,i,this.renderer._boundingRect.width,this.renderer._boundingRect.height,this.renderer.pixelRatio),this.renderer.state.isContextLost&&this.camera.forceUpdate(),this._matrices.projection.matrix=this.camera.projectionMatrix,this.camera._shouldUpdate&&(this._setWorldSizes(),this._applyWorldPositions(),this._translation.z=this.relativeTranslation.z/this.camera.CSSPerspective),this._updateMVMatrix=this.camera._shouldUpdate}_setMVMatrix(){this._updateMVMatrix&&(this._matrices.world.matrix=this._matrices.world.matrix.composeFromOrigin(this._translation,this.quaternion,this.scale,this._boundingRect.world.transformOrigin),this._matrices.world.matrix.scale({x:this._boundingRect.world.width,y:this._boundingRect.world.height,z:1}),this._matrices.modelView.matrix.copy(this._matrices.world.matrix),this._matrices.modelView.matrix.elements[14]-=this.camera.position.z,this._matrices.modelViewProjection.matrix=this._matrices.projection.matrix.multiply(this._matrices.modelView.matrix),this.alwaysDraw||this._shouldDrawCheck(),this.renderer.useProgram(this._program),this.gl.uniformMatrix4fv(this._matrices.modelView.location,!1,this._matrices.modelView.matrix.elements)),this._updateMVMatrix=!1}_setWorldTransformOrigin(){this._boundingRect.world.transformOrigin=new na((2*this.transformOrigin.x-1)*this._boundingRect.world.width,-(2*this.transformOrigin.y-1)*this._boundingRect.world.height,this.transformOrigin.z)}_documentToWorldSpace(t){return ya.set(t.x*this.renderer.pixelRatio/this.renderer._boundingRect.width*this._boundingRect.world.ratios.width,-t.y*this.renderer.pixelRatio/this.renderer._boundingRect.height*this._boundingRect.world.ratios.height,t.z)}_setWorldSizes(){const t=this.camera.getScreenRatiosFromFov();this._boundingRect.world={width:this._boundingRect.document.width/this.renderer._boundingRect.width*t.width/2,height:this._boundingRect.document.height/this.renderer._boundingRect.height*t.height/2,ratios:t},this._setWorldTransformOrigin()}_setWorldPosition(){const t=this._boundingRect.document.width/2+this._boundingRect.document.left,e=this._boundingRect.document.height/2+this._boundingRect.document.top,i=this.renderer._boundingRect.width/2+this.renderer._boundingRect.left,s=this.renderer._boundingRect.height/2+this.renderer._boundingRect.top;this._boundingRect.world.top=(s-e)/this.renderer._boundingRect.height*this._boundingRect.world.ratios.height,this._boundingRect.world.left=(t-i)/this.renderer._boundingRect.width*this._boundingRect.world.ratios.width}setScale(t){t.type&&"Vec2"===t.type?(t.sanitizeNaNValuesWith(this.scale).max(fa.set(.001,.001)),t.x===this.scale.x&&t.y===this.scale.y||(this.scale.set(t.x,t.y,1),this._applyScale())):this.renderer.production||Lr(this.type+": Cannot set scale because the parameter passed is not of Vec2 type:",t)}_applyScale(){for(let t=0;t<this.textures.length;t++)this.textures[t].resize();this._updateMVMatrix=!0}setRotation(t){t.type&&"Vec3"===t.type?(t.sanitizeNaNValuesWith(this.rotation),t.equals(this.rotation)||(this.rotation.copy(t),this._applyRotation())):this.renderer.production||Lr(this.type+": Cannot set rotation because the parameter passed is not of Vec3 type:",t)}_applyRotation(){this.quaternion.setFromVec3(this.rotation),this._updateMVMatrix=!0}setTransformOrigin(t){t.type&&"Vec3"===t.type?(t.sanitizeNaNValuesWith(this.transformOrigin),t.equals(this.transformOrigin)||(this.transformOrigin.copy(t),this._setWorldTransformOrigin(),this._updateMVMatrix=!0)):this.renderer.production||Lr(this.type+": Cannot set transform origin because the parameter passed is not of Vec3 type:",t)}_setTranslation(){let t=ga.set(0,0,0);this.relativeTranslation.equals(t)||(t=this._documentToWorldSpace(this.relativeTranslation)),this._translation.set(this._boundingRect.world.left+t.x,this._boundingRect.world.top+t.y,this.relativeTranslation.z/this.camera.CSSPerspective),this._updateMVMatrix=!0}setRelativeTranslation(t){t.type&&"Vec3"===t.type?(t.sanitizeNaNValuesWith(this.relativeTranslation),t.equals(this.relativeTranslation)||(this.relativeTranslation.copy(t),this._setTranslation())):this.renderer.production||Lr(this.type+": Cannot set translation because the parameter passed is not of Vec3 type:",t)}_applyWorldPositions(){this._setWorldPosition(),this._setTranslation()}updatePosition(){this._setDocumentSizes(),this._applyWorldPositions()}updateScrollPosition(t,e){(t||e)&&(this._boundingRect.document.top+=e*this.renderer.pixelRatio,this._boundingRect.document.left+=t*this.renderer.pixelRatio,this._applyWorldPositions())}_getIntersection(t,e){let i=e.clone().sub(t),s=t.clone();for(;s.z>-1;)s.add(i);return s}_getNearPlaneIntersections(t,e,i){const s=this._matrices.modelViewProjection.matrix;if(1===i.length)0===i[0]?(e[0]=this._getIntersection(e[1],wa.set(.95,1,0).applyMat4(s)),e.push(this._getIntersection(e[3],xa.set(-1,-.95,0).applyMat4(s)))):1===i[0]?(e[1]=this._getIntersection(e[0],wa.set(-.95,1,0).applyMat4(s)),e.push(this._getIntersection(e[2],xa.set(1,-.95,0).applyMat4(s)))):2===i[0]?(e[2]=this._getIntersection(e[3],wa.set(-.95,-1,0).applyMat4(s)),e.push(this._getIntersection(e[1],xa.set(1,.95,0).applyMat4(s)))):3===i[0]&&(e[3]=this._getIntersection(e[2],wa.set(.95,-1,0).applyMat4(s)),e.push(this._getIntersection(e[0],xa.set(-1,.95,0).applyMat4(s))));else if(2===i.length)0===i[0]&&1===i[1]?(e[0]=this._getIntersection(e[3],wa.set(-1,-.95,0).applyMat4(s)),e[1]=this._getIntersection(e[2],xa.set(1,-.95,0).applyMat4(s))):1===i[0]&&2===i[1]?(e[1]=this._getIntersection(e[0],wa.set(-.95,1,0).applyMat4(s)),e[2]=this._getIntersection(e[3],xa.set(-.95,-1,0).applyMat4(s))):2===i[0]&&3===i[1]?(e[2]=this._getIntersection(e[1],wa.set(1,.95,0).applyMat4(s)),e[3]=this._getIntersection(e[0],xa.set(-1,.95,0).applyMat4(s))):0===i[0]&&3===i[1]&&(e[0]=this._getIntersection(e[1],wa.set(.95,1,0).applyMat4(s)),e[3]=this._getIntersection(e[2],xa.set(.95,-1,0).applyMat4(s)));else if(3===i.length){let n=0;for(let e=0;e<t.length;e++)i.includes(e)||(n=e);e=[e[n]],0===n?(e.push(this._getIntersection(e[0],wa.set(-.95,1,0).applyMat4(s))),e.push(this._getIntersection(e[0],xa.set(-1,.95,0).applyMat4(s)))):1===n?(e.push(this._getIntersection(e[0],wa.set(.95,1,0).applyMat4(s))),e.push(this._getIntersection(e[0],xa.set(1,.95,0).applyMat4(s)))):2===n?(e.push(this._getIntersection(e[0],wa.set(.95,-1,0).applyMat4(s))),e.push(this._getIntersection(e[0],xa.set(1,-.95,0).applyMat4(s)))):3===n&&(e.push(this._getIntersection(e[0],wa.set(-.95,-1,0).applyMat4(s))),e.push(this._getIntersection(e[0],xa.set(-1.95,0).applyMat4(s))))}else for(let i=0;i<t.length;i++)e[i][0]=1e4,e[i][1]=1e4;return e}_getWorldCoords(){const t=[va.set(-1,1,0),ba.set(1,1,0),_a.set(1,-1,0),Da.set(-1,-1,0)];let e=[],i=[];for(let s=0;s<t.length;s++){const n=t[s].applyMat4(this._matrices.modelViewProjection.matrix);e.push(n),Math.abs(n.z)>1&&i.push(s)}i.length&&(e=this._getNearPlaneIntersections(t,e,i));let s=1/0,n=-1/0,r=1/0,a=-1/0;for(let t=0;t<e.length;t++){const i=e[t];i.x<s&&(s=i.x),i.x>n&&(n=i.x),i.y<r&&(r=i.y),i.y>a&&(a=i.y)}return{top:a,right:n,bottom:r,left:s}}_computeWebGLBoundingRect(){const t=this._getWorldCoords();let e={top:1-(t.top+1)/2,right:(t.right+1)/2,bottom:1-(t.bottom+1)/2,left:(t.left+1)/2};e.width=e.right-e.left,e.height=e.bottom-e.top,this._boundingRect.worldToDocument={width:e.width*this.renderer._boundingRect.width,height:e.height*this.renderer._boundingRect.height,top:e.top*this.renderer._boundingRect.height+this.renderer._boundingRect.top,left:e.left*this.renderer._boundingRect.width+this.renderer._boundingRect.left,right:e.left*this.renderer._boundingRect.width+this.renderer._boundingRect.left+e.width*this.renderer._boundingRect.width,bottom:e.top*this.renderer._boundingRect.height+this.renderer._boundingRect.top+e.height*this.renderer._boundingRect.height}}getWebGLBoundingRect(){return this._matrices.modelViewProjection?(this._boundingRect.worldToDocument&&!this.alwaysDraw||this._computeWebGLBoundingRect(),this._boundingRect.worldToDocument):this._boundingRect.document}_getWebGLDrawRect(){return this._computeWebGLBoundingRect(),{top:this._boundingRect.worldToDocument.top-this.drawCheckMargins.top,right:this._boundingRect.worldToDocument.right+this.drawCheckMargins.right,bottom:this._boundingRect.worldToDocument.bottom+this.drawCheckMargins.bottom,left:this._boundingRect.worldToDocument.left-this.drawCheckMargins.left}}_shouldDrawCheck(){const t=this._getWebGLDrawRect();Math.round(t.right)<=this.renderer._boundingRect.left||Math.round(t.left)>=this.renderer._boundingRect.left+this.renderer._boundingRect.width||Math.round(t.bottom)<=this.renderer._boundingRect.top||Math.round(t.top)>=this.renderer._boundingRect.top+this.renderer._boundingRect.height?this._shouldDraw&&(this._shouldDraw=!1,this.renderer.nextRender.add((()=>this._onLeaveViewCallback&&this._onLeaveViewCallback()))):(this._shouldDraw||this.renderer.nextRender.add((()=>this._onReEnterViewCallback&&this._onReEnterViewCallback())),this._shouldDraw=!0)}isDrawn(){return this._canDraw&&this.visible&&(this._shouldDraw||this.alwaysDraw)}enableDepthTest(t){this._depthTest=t}_initSources(){let t=0;if(this.autoloadSources){const e=this.htmlElement.getElementsByTagName("img"),i=this.htmlElement.getElementsByTagName("video"),s=this.htmlElement.getElementsByTagName("canvas");e.length&&this.loadImages(e),i.length&&this.loadVideos(i),s.length&&this.loadCanvases(s),t=e.length+i.length+s.length}this.loader._setLoaderSize(t),this._canDraw=!0}_startDrawing(){this._canDraw&&(this._onRenderCallback&&this._onRenderCallback(),this.target?this.renderer.bindFrameBuffer(this.target):null===this.renderer.state.scenePassIndex&&this.renderer.bindFrameBuffer(null),this._setPerspectiveMatrix(),this._setMVMatrix(),(this.alwaysDraw||this._shouldDraw)&&this.visible&&this._draw())}mouseToPlaneCoords(t){if(Ta.setAxisOrder(this.quaternion.axisOrder),Ta.equals(this.quaternion)&&Ca.equals(this.transformOrigin))return super.mouseToPlaneCoords(t);{const e={x:t.x/(this.renderer._boundingRect.width/this.renderer.pixelRatio)*2-1,y:2*(1-t.y/(this.renderer._boundingRect.height/this.renderer.pixelRatio))-1},i=this.camera.position.clone(),s=Ea.set(e.x,e.y,-.5);s.unproject(this.camera),s.sub(i).normalize();const n=Sa.set(0,0,-1);n.applyQuat(this.quaternion).normalize();const r=Aa.set(0,0,0),a=n.dot(s);if(Math.abs(a)>=1e-4){const t=this._matrices.world.matrix.getInverse().multiply(this.camera.viewMatrix),e=this._boundingRect.world.transformOrigin.clone().add(this._translation),o=ka.set(this._translation.x-e.x,this._translation.y-e.y,this._translation.z-e.z);o.applyQuat(this.quaternion),e.add(o);const l=n.dot(e.clone().sub(i))/a;r.copy(i.add(s.multiplyScalar(l))),r.applyMat4(t)}else r.set(1/0,1/0,1/0);return Pa.set(r.x,r.y)}}onReEnterView(t){return t&&(this._onReEnterViewCallback=t),this}onLeaveView(t){return t&&(this._onLeaveViewCallback=t),this}}function Ma(t,e){return Ma=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ma(t,e)}function Oa(t){return Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oa(t)}function Ra(t,e){if(e&&("object"===Oa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function La(t){return La=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},La(t)}var Ia={width:window.innerWidth,height:window.innerHeight};var Ba=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ma(t,e)}(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=La(i);if(n){var s=La(this).constructor;t=Reflect.construct(e,arguments,s)}else t=e.apply(this,arguments);return Ra(this,t)});function a(e,i,s,n){var o;return t(this,a),(o=r.call(this,e,i,s)).index=n,o.setBounds(),o}return s(a,[{key:"setBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.htmlElement.getBoundingClientRect();this.bounds={left:e.left,top:e.top+t,width:e.width,height:e.height},this.setThresholds()}},{key:"setThresholds",value:function(){this.minY=this.bounds.top+.5*this.bounds.height-Ia.height,this.maxY=this.bounds.top+.5*this.bounds.height,this.range=this.maxY-this.minY}},{key:"getScrollProgress",value:function(t){return(t-this.minY)/this.range}}]),a}(Fa),Na=Ba,za=function(){function e(i){var s=i.scrollInstance,n=i.container,r=i.slideElements,a=i.angle,o=void 0===a?10:a,l=i.maxSpeed,h=void 0===l?15:l,u=i.scaleFactor,c=void 0===u?.15:u,d=i.displacementStrength,p=void 0===d?1:d,m=i.bendStrength,f=void 0===m?.05:m,g=i.squeezeStrength,y=void 0===g?.015:g;t(this,e),this.config={angle:o,maxSpeed:h,scaleFactor:c,displacementStrength:p,bendStrength:f,squeezeStrength:y},this.container=n,this.setupScroll(s),this.initCurtains(),this.bindEvents(),this.addSlides(r),this.calculateMaxHorizontalDisplacement(),this.rotateSlides(),this.updateSlidesTransforms()}return s(e,[{key:"setupScroll",value:function(t){this.smoothScroll=t,this.scroll={currentY:0,lerpedY:0,speed:0},this.getSpeed=this.smoothScroll.getSpeed;var e=this.smoothScroll.scroll.isMobile,i=this.smoothScroll.scroll.isTablet,s=this.smoothScroll.scroll.smartphone.smooth,n=this.smoothScroll.scroll.tablet.smooth,r=this.smoothScroll.scroll.smooth;this.isSmooth=e?s:i?n:r}},{key:"initCurtains",value:function(){var t=this;this.curtains=new qr({container:this.container,antialias:!1,watchScroll:!this.isSmooth,autoResize:!1}),this.isSmooth&&this.curtains.disableDrawing(),this.curtains.onRender((function(){t.isSmooth||(t.updateScrollSpeed(),t.updateSlidesTransforms())})).onScroll((function(){t.isSmooth||(t.scroll.currentY=t.curtains.getScrollValues().y)})).onContextLost((function(){t.curtains.restoreContext()}))}},{key:"updateScrollSpeed",value:function(){var t,e,i;this.scroll.lerpedY+=.2*(this.scroll.currentY-this.scroll.lerpedY),this.scroll.speed=this.scroll.currentY-this.scroll.lerpedY,this.scroll.speed*=.1,this.scroll.speed=(t=this.scroll.speed,e=-this.config.maxSpeed,i=this.config.maxSpeed,Math.min(Math.max(t,e),i))}},{key:"bindEvents",value:function(){var t=this;window.addEventListener("resize",(function(){t.onResize()}))}},{key:"onResize",value:function(){if(Ia.width=window.innerWidth,Ia.height=window.innerHeight,this.isSmooth){var t=new WheelEvent("mousewheel",{deltaY:1});this.smoothScroll.el.dispatchEvent(t)}else this.scroll.currentY=window.scrollY;this.resizeSlides()}},{key:"resizeSlides",value:function(){var t=this;this.slides.forEach((function(e){sn.set(e.htmlElement,{rotation:0,scale:1,x:0}),e.setBounds(t.scroll.currentY),e.setThresholds();var i=t.calculateDrawMargins(e),s=i.bottomMargin,n=i.topMargin;e.drawCheckMargins.bottom=s,e.drawCheckMargins.top=n})),this.curtains.resize(),this.rotateSlides(),this.calculateMaxHorizontalDisplacement(),this.updateSlidesTransforms()}},{key:"addSlides",value:function(t){var e=this;this.slides=[],this.displacementTextures=[];var i={widthSegments:16,heightSegments:8,vertexShader:"\n      precision mediump float;\n      attribute vec3 aVertexPosition;\n      attribute vec2 aTextureCoord;\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n      uniform mat4 uTextureMatrix;\n      uniform mat4 uDisplacementMatrix;\n\n      uniform float uSpeed;\n      uniform float uBendStrength;\n      uniform float uSqueezeStrength;\n\n      varying vec3 vVertexPosition;\n      varying vec2 vTextureCoord;\n      varying vec2 vDisplacementCoord;\n      void main() {\n        vec3 position = aVertexPosition;\n\n        vec2 uv = position.xy * 0.5 + 0.5;\n\n        float uvDown =  (1.0 - uv.y);\n        float uvUp = uv.y;\n\n        uv.y = mix(uvUp, uvDown, step(0.0, uSpeed));\n\n        float x = (-pow(uv.y - 1.0, 2.0) + 1.0) * position.x * abs(uSpeed);\n\n        position.x -= x * uSqueezeStrength;\n\n        float y = cos(position.x * 0.5 * 3.141592) * uSpeed * uBendStrength;\n        position.y += y;\n\n        gl_Position = uPMatrix * uMVMatrix * vec4(position, 1.0);\n\n        vTextureCoord = (uTextureMatrix * vec4(aTextureCoord, 0.0, 1.0)).xy;\n        vDisplacementCoord = (uDisplacementMatrix * vec4(aTextureCoord, 0.0, 1.0)).xy;\n        vVertexPosition = position;\n      }\n    ",fragmentShader:"\n      precision mediump float;\n      varying vec3 vVertexPosition;\n      varying vec2 vTextureCoord;\n      varying vec2 vDisplacementCoord;\n\n      uniform float uSpeed;\n      uniform float uDisplacementStrength;\n\n      uniform sampler2D uTexture;\n      uniform sampler2D uDisplacement;\n      void main() {\n        float disp = texture2D(uDisplacement, vDisplacementCoord).r;\n        disp *= uDisplacementStrength;\n\n        float trans = abs(uSpeed) * 0.05;\n        trans = clamp(trans, 0.0, 1.0);\n\n        float tran0 = trans * disp;\n        float tran1 = (1.0 - trans) * disp;\n\n        vec2 distortedPosition0 = vec2(vTextureCoord.x, vTextureCoord.y + (tran0 * sign(uSpeed)));\n        vec2 distortedPosition1 = vec2(vTextureCoord.x, vTextureCoord.y - (tran1 * sign(uSpeed)));\n\n        vec4 color0 = texture2D(uTexture, distortedPosition0);\n        vec4 color1 = texture2D(uTexture, distortedPosition1);\n\n        gl_FragColor = mix(color0, color1, trans);\n      }\n    ",uniforms:{speed:{name:"uSpeed",type:"1f",value:0},displacementStrength:{name:"uDisplacementStrength",type:"1f",value:1},bendStrength:{name:"uBendStrength",type:"1f",value:.05},squeezeStrength:{name:"uSqueezeStrength",type:"1f",value:.015}}},s=new ha(this.curtains);t.forEach((function(t,n){var r=new Na(e.curtains,t,i,n),a=t.dataset.displacementSrc,o=e.displacementTextures.filter((function(t){return t.src===a}))[0];if(o)r.addTexture(o.texture);else{var l=new Image;l.crossOrigin="anonymous",l.src=a,s.loadImage(l,{sampler:"uDisplacement"},(function(t){e.displacementTextures.push({src:a,texture:t}),r.addTexture(t)}))}var h=e.calculateDrawMargins(r),u=h.bottomMargin,c=h.topMargin;r.drawCheckMargins.bottom=u,r.drawCheckMargins.top=c,e.slides.push(r)}))}},{key:"calculateDrawMargins",value:function(t){return{bottom:Math.cos(this.angle*Math.PI/180)*(1+this.config.maxSpeed*this.config.bendStrength)*t.bounds.height*.5,top:Math.cos(this.angle*Math.PI/180)*(1+this.config.maxSpeed*this.config.bendStrength)*t.bounds.height*.5}}},{key:"calculateMaxHorizontalDisplacement",value:function(){this.maxHorizontalDisplacement=.5*Ia.height*Math.tan(this.config.angle*Math.PI/180)}},{key:"rotateSlides",value:function(){var t=this,e=this.config.angle*Math.PI/180;this.slides.forEach((function(i){i.rotation.z=e,sn.set(i.htmlElement,{rotate:-t.config.angle})}))}},{key:"updateSlidesTransforms",value:function(){var t=this;this.slides.forEach((function(e,i){e.uniforms.speed.value=t.scroll.speed;var s=e.getScrollProgress(t.scroll.currentY),n=1+t.config.scaleFactor*(2*s-1),r=(.5-s)*t.maxHorizontalDisplacement*2;e.relativeTranslation.x=r,e.scale.x=n,e.scale.y=n,sn.set(e.htmlElement,{x:r,scale:n})}))}},{key:"onScroll",value:function(t){!this.isSmooth||this.getSpeed&&0===t.speed||(this.scroll.currentY=t.scroll.y,this.curtains.updateScrollValues(0,this.scroll.currentY),this.updateScrollSpeed(),this.updateSlidesTransforms())}},{key:"scrollToSlide",value:function(t){var e=this.slides[t],i=e.bounds.top+.5*e.bounds.height-.5*Ia.height;this.smoothScroll?this.smoothScroll.scrollTo(i):window.scrollTo(0,i)}},{key:"updateParameter",value:function(t,e){switch(t){case"displacementStrength":case"squeezeStrength":case"bendStrength":this.slides.forEach((function(i){i.uniforms[t].value=e}));break;default:this.config[t]=e,this.resizeSlides()}}}]),e}(),ja=za,Va=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function Ua(t){var e=t.nodeType,i="";if(1===e||9===e||11===e){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=Ua(t)}else if(3===e||4===e)return t.nodeValue;return i}var Wa,qa,Ha,Ya=/(?:\r|\n|\t\t)/g,Xa=/(?:\s\s+)/g,$a=function(t){return qa.getComputedStyle(t)},Ga=Array.isArray,Qa=[].slice,Ka=function(t,e){var i;return Ga(t)?t:"string"==(i=typeof t)&&!e&&t?Qa.call(Wa.querySelectorAll(t),0):t&&"object"===i&&"length"in t?Qa.call(t,0):t?[t]:[]},Za=function(t){return"absolute"===t.position||!0===t.absolute},Ja=function(t,e){for(var i,s=e.length;--s>-1;)if(i=e[s],t.substr(0,i.length)===i)return i.length},to=function(t,e){void 0===t&&(t="");var i=~t.indexOf("++"),s=1;return i&&(t=t.split("++").join("")),function(){return"<"+e+" style='position:relative;display:inline-block;'"+(t?" class='"+t+(i?s++:"")+"'>":">")}},eo=function t(e,i,s){var n=e.nodeType;if(1===n||9===n||11===n)for(e=e.firstChild;e;e=e.nextSibling)t(e,i,s);else 3!==n&&4!==n||(e.nodeValue=e.nodeValue.split(i).join(s))},io=function(t,e){for(var i=e.length;--i>-1;)t.push(e[i])},so=function(t,e,i){for(var s;t&&t!==e;){if(s=t._next||t.nextSibling)return s.textContent.charAt(0)===i;t=t.parentNode||t._parent}},no=function t(e){var i,s,n=Ka(e.childNodes),r=n.length;for(i=0;i<r;i++)(s=n[i])._isSplit?t(s):i&&s.previousSibling&&3===s.previousSibling.nodeType?(s.previousSibling.nodeValue+=3===s.nodeType?s.nodeValue:s.firstChild.nodeValue,e.removeChild(s)):3!==s.nodeType&&(e.insertBefore(s.firstChild,s),e.removeChild(s))},ro=function(t,e){return parseFloat(e[t])||0},ao=function(t,e,i,s,n,r,a){var o,l,h,u,c,d,p,m,f,g,y,v,b=$a(t),_=ro("paddingLeft",b),D=-999,w=ro("borderBottomWidth",b)+ro("borderTopWidth",b),x=ro("borderLeftWidth",b)+ro("borderRightWidth",b),T=ro("paddingTop",b)+ro("paddingBottom",b),C=ro("paddingLeft",b)+ro("paddingRight",b),E=ro("fontSize",b)*(e.lineThreshold||.2),S=b.textAlign,k=[],A=[],P=[],F=e.wordDelimiter||" ",M=e.tag?e.tag:e.span?"span":"div",O=e.type||e.split||"chars,words,lines",R=n&&~O.indexOf("lines")?[]:null,L=~O.indexOf("words"),I=~O.indexOf("chars"),B=Za(e),N=e.linesClass,z=~(N||"").indexOf("++"),j=[],V="flex"===b.display,U=t.style.display;for(z&&(N=N.split("++").join("")),V&&(t.style.display="block"),h=(l=t.getElementsByTagName("*")).length,c=[],o=0;o<h;o++)c[o]=l[o];if(R||B)for(o=0;o<h;o++)((d=(u=c[o]).parentNode===t)||B||I&&!L)&&(v=u.offsetTop,R&&d&&Math.abs(v-D)>E&&("BR"!==u.nodeName||0===o)&&(p=[],R.push(p),D=v),B&&(u._x=u.offsetLeft,u._y=v,u._w=u.offsetWidth,u._h=u.offsetHeight),R&&((u._isSplit&&d||!I&&d||L&&d||!L&&u.parentNode.parentNode===t&&!u.parentNode._isSplit)&&(p.push(u),u._x-=_,so(u,t,F)&&(u._wordEnd=!0)),"BR"===u.nodeName&&(u.nextSibling&&"BR"===u.nextSibling.nodeName||0===o)&&R.push([])));for(o=0;o<h;o++)if(d=(u=c[o]).parentNode===t,"BR"!==u.nodeName)if(B&&(f=u.style,L||d||(u._x+=u.parentNode._x,u._y+=u.parentNode._y),f.left=u._x+"px",f.top=u._y+"px",f.position="absolute",f.display="block",f.width=u._w+1+"px",f.height=u._h+"px"),!L&&I)if(u._isSplit)for(u._next=l=u.nextSibling,u.parentNode.appendChild(u);l&&3===l.nodeType&&" "===l.textContent;)u._next=l.nextSibling,u.parentNode.appendChild(l),l=l.nextSibling;else u.parentNode._isSplit?(u._parent=u.parentNode,!u.previousSibling&&u.firstChild&&(u.firstChild._isFirst=!0),u.nextSibling&&" "===u.nextSibling.textContent&&!u.nextSibling.nextSibling&&j.push(u.nextSibling),u._next=u.nextSibling&&u.nextSibling._isFirst?null:u.nextSibling,u.parentNode.removeChild(u),c.splice(o--,1),h--):d||(v=!u.nextSibling&&so(u.parentNode,t,F),u.parentNode._parent&&u.parentNode._parent.appendChild(u),v&&u.parentNode.appendChild(Wa.createTextNode(" ")),"span"===M&&(u.style.display="inline"),k.push(u));else u.parentNode._isSplit&&!u._isSplit&&""!==u.innerHTML?A.push(u):I&&!u._isSplit&&("span"===M&&(u.style.display="inline"),k.push(u));else R||B?(u.parentNode&&u.parentNode.removeChild(u),c.splice(o--,1),h--):L||t.appendChild(u);for(o=j.length;--o>-1;)j[o].parentNode.removeChild(j[o]);if(R){for(B&&(g=Wa.createElement(M),t.appendChild(g),y=g.offsetWidth+"px",v=g.offsetParent===t?0:t.offsetLeft,t.removeChild(g)),f=t.style.cssText,t.style.cssText="display:none;";t.firstChild;)t.removeChild(t.firstChild);for(m=" "===F&&(!B||!L&&!I),o=0;o<R.length;o++){for(p=R[o],(g=Wa.createElement(M)).style.cssText="display:block;text-align:"+S+";position:"+(B?"absolute;":"relative;"),N&&(g.className=N+(z?o+1:"")),P.push(g),h=p.length,l=0;l<h;l++)"BR"!==p[l].nodeName&&(u=p[l],g.appendChild(u),m&&u._wordEnd&&g.appendChild(Wa.createTextNode(" ")),B&&(0===l&&(g.style.top=u._y+"px",g.style.left=_+v+"px"),u.style.top="0px",v&&(u.style.left=u._x-v+"px")));0===h?g.innerHTML="&nbsp;":L||I||(no(g),eo(g,String.fromCharCode(160)," ")),B&&(g.style.width=y,g.style.height=u._h+"px"),t.appendChild(g)}t.style.cssText=f}B&&(a>t.clientHeight&&(t.style.height=a-T+"px",t.clientHeight<a&&(t.style.height=a+w+"px")),r>t.clientWidth&&(t.style.width=r-C+"px",t.clientWidth<r&&(t.style.width=r+x+"px"))),V&&(U?t.style.display=U:t.style.removeProperty("display")),io(i,k),L&&io(s,A),io(n,P)},oo=function(t,e,i,s){var n,r,a,o,l,h,u,c,d=e.tag?e.tag:e.span?"span":"div",p=~(e.type||e.split||"chars,words,lines").indexOf("chars"),m=Za(e),f=e.wordDelimiter||" ",g=" "!==f?"":m?"&#173; ":" ",y="</"+d+">",v=1,b=e.specialChars?"function"==typeof e.specialChars?e.specialChars:Ja:null,_=Wa.createElement("div"),D=t.parentNode;for(D.insertBefore(_,t),_.textContent=t.nodeValue,D.removeChild(t),u=-1!==(n=Ua(t=_)).indexOf("<"),!1!==e.reduceWhiteSpace&&(n=n.replace(Xa," ").replace(Ya,"")),u&&(n=n.split("<").join("{{LT}}")),l=n.length,r=(" "===n.charAt(0)?g:"")+i(),a=0;a<l;a++)if(h=n.charAt(a),b&&(c=b(n.substr(a),e.specialChars)))h=n.substr(a,c||1),r+=p&&" "!==h?s()+h+"</"+d+">":h,a+=c-1;else if(h===f&&n.charAt(a-1)!==f&&a){for(r+=v?y:"",v=0;n.charAt(a+1)===f;)r+=g,a++;a===l-1?r+=g:")"!==n.charAt(a+1)&&(r+=g+i(),v=1)}else"{"===h&&"{{LT}}"===n.substr(a,6)?(r+=p?s()+"{{LT}}</"+d+">":"{{LT}}",a+=5):h.charCodeAt(0)>=55296&&h.charCodeAt(0)<=56319||n.charCodeAt(a+1)>=65024&&n.charCodeAt(a+1)<=65039?(o=((n.substr(a,12).split(Va)||[])[1]||"").length||2,r+=p&&" "!==h?s()+n.substr(a,o)+"</"+d+">":n.substr(a,o),a+=o-1):r+=p&&" "!==h?s()+h+"</"+d+">":h;t.outerHTML=r+(v?y:""),u&&eo(D,"{{LT}}","<")},lo=function t(e,i,s,n){var r,a,o=Ka(e.childNodes),l=o.length,h=Za(i);if(3!==e.nodeType||l>1){for(i.absolute=!1,r=0;r<l;r++)(a=o[r])._next=a._isFirst=a._parent=a._wordEnd=null,(3!==a.nodeType||/\S+/.test(a.nodeValue))&&(h&&3!==a.nodeType&&"inline"===$a(a).display&&(a.style.display="inline-block",a.style.position="relative"),a._isSplit=!0,t(a,i,s,n));return i.absolute=h,void(e._isSplit=!0)}oo(e,i,s,n)},ho=function(){function t(t,e){Ha||(Wa=document,qa=window,Ha=1),this.elements=Ka(t),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=e||{},this.split(e)}var e=t.prototype;return e.split=function(t){this.isSplit&&this.revert(),this.vars=t=t||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var e,i,s,n=this.elements.length,r=t.tag?t.tag:t.span?"span":"div",a=to(t.wordsClass,r),o=to(t.charsClass,r);--n>-1;)s=this.elements[n],this._originals[n]=s.innerHTML,e=s.clientHeight,i=s.clientWidth,lo(s,t,a,o),ao(s,t,this.chars,this.words,this.lines,i,e);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},e.revert=function(){var t=this._originals;if(!t)throw"revert() call wasn't scoped properly.";return this.elements.forEach((function(e,i){return e.innerHTML=t[i]})),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},t.create=function(e,i){return new t(e,i)},t}();function uo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function co(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function po(t,e,i){return e&&co(t.prototype,e),i&&co(t,i),t}function mo(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function fo(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function go(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?fo(Object(i),!0).forEach((function(e){mo(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):fo(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function yo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bo(t,e)}function vo(t){return vo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},vo(t)}function bo(t,e){return bo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},bo(t,e)}function _o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Do(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_o(t):e}function wo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=vo(t);if(e){var n=vo(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return Do(this,i)}}function xo(t,e,i){return xo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vo(t)););return t}(t,e);if(s){var n=Object.getOwnPropertyDescriptor(s,e);return n.get?n.get.call(i):n.value}},xo(t,e,i||t)}function To(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],s=!0,n=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(s=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);s=!0);}catch(t){n=!0,r=t}finally{try{s||null==o.return||o.return()}finally{if(n)throw r}}return i}}(t,e)||Eo(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Co(t){return function(t){if(Array.isArray(t))return So(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Eo(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eo(t,e){if(t){if("string"==typeof t)return So(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?So(t,e):void 0}}function So(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}ho.version="3.9.1";var ko={el:document,name:"scroll",offset:[0,0],repeat:!1,smooth:!1,initPosition:{x:0,y:0},direction:"vertical",gestureDirection:"vertical",reloadOnContextChange:!1,lerp:.1,class:"is-inview",scrollbarContainer:!1,scrollbarClass:"c-scrollbar",scrollingClass:"has-scroll-scrolling",draggingClass:"has-scroll-dragging",smoothClass:"has-scroll-smooth",initClass:"has-scroll-init",getSpeed:!1,getDirection:!1,scrollFromAnywhere:!1,multiplier:1,firefoxMultiplier:50,touchMultiplier:2,resetNativeScroll:!0,tablet:{smooth:!1,direction:"vertical",gestureDirection:"vertical",breakpoint:1024},smartphone:{smooth:!1,direction:"vertical",gestureDirection:"vertical"}},Ao=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};uo(this,t),Object.assign(this,ko,e),this.smartphone=ko.smartphone,e.smartphone&&Object.assign(this.smartphone,e.smartphone),this.tablet=ko.tablet,e.tablet&&Object.assign(this.tablet,e.tablet),this.namespace="locomotive",this.html=document.documentElement,this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.windowMiddle={x:this.windowWidth/2,y:this.windowHeight/2},this.els={},this.currentElements={},this.listeners={},this.hasScrollTicking=!1,this.hasCallEventSet=!1,this.checkScroll=this.checkScroll.bind(this),this.checkResize=this.checkResize.bind(this),this.checkEvent=this.checkEvent.bind(this),this.instance={scroll:{x:0,y:0},limit:{x:this.html.offsetWidth,y:this.html.offsetHeight},currentElements:this.currentElements},this.isMobile?this.isTablet?this.context="tablet":this.context="smartphone":this.context="desktop",this.isMobile&&(this.direction=this[this.context].direction),"horizontal"===this.direction?this.directionAxis="x":this.directionAxis="y",this.getDirection&&(this.instance.direction=null),this.getDirection&&(this.instance.speed=0),this.html.classList.add(this.initClass),window.addEventListener("resize",this.checkResize,!1)}return po(t,[{key:"init",value:function(){this.initEvents()}},{key:"checkScroll",value:function(){this.dispatchScroll()}},{key:"checkResize",value:function(){var t=this;this.resizeTick||(this.resizeTick=!0,requestAnimationFrame((function(){t.resize(),t.resizeTick=!1})))}},{key:"resize",value:function(){}},{key:"checkContext",value:function(){if(this.reloadOnContextChange){this.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||this.windowWidth<this.tablet.breakpoint,this.isTablet=this.isMobile&&this.windowWidth>=this.tablet.breakpoint;var t=this.context;this.isMobile?this.isTablet?this.context="tablet":this.context="smartphone":this.context="desktop",t!=this.context&&("desktop"==t?this.smooth:this[t].smooth)!=("desktop"==this.context?this.smooth:this[this.context].smooth)&&window.location.reload()}}},{key:"initEvents",value:function(){var t=this;this.scrollToEls=this.el.querySelectorAll("[data-".concat(this.name,"-to]")),this.setScrollTo=this.setScrollTo.bind(this),this.scrollToEls.forEach((function(e){e.addEventListener("click",t.setScrollTo,!1)}))}},{key:"setScrollTo",value:function(t){t.preventDefault(),this.scrollTo(t.currentTarget.getAttribute("data-".concat(this.name,"-href"))||t.currentTarget.getAttribute("href"),{offset:t.currentTarget.getAttribute("data-".concat(this.name,"-offset"))})}},{key:"addElements",value:function(){}},{key:"detectElements",value:function(t){var e=this,i=this.instance.scroll.y,s=i+this.windowHeight,n=this.instance.scroll.x,r=n+this.windowWidth;Object.entries(this.els).forEach((function(a){var o=To(a,2),l=o[0],h=o[1];if(!h||h.inView&&!t||("horizontal"===e.direction?r>=h.left&&n<h.right&&e.setInView(h,l):s>=h.top&&i<h.bottom&&e.setInView(h,l)),h&&h.inView)if("horizontal"===e.direction){var u=h.right-h.left;h.progress=(e.instance.scroll.x-(h.left-e.windowWidth))/(u+e.windowWidth),(r<h.left||n>h.right)&&e.setOutOfView(h,l)}else{var c=h.bottom-h.top;h.progress=(e.instance.scroll.y-(h.top-e.windowHeight))/(c+e.windowHeight),(s<h.top||i>h.bottom)&&e.setOutOfView(h,l)}})),this.hasScrollTicking=!1}},{key:"setInView",value:function(t,e){this.els[e].inView=!0,t.el.classList.add(t.class),this.currentElements[e]=t,t.call&&this.hasCallEventSet&&(this.dispatchCall(t,"enter"),t.repeat||(this.els[e].call=!1))}},{key:"setOutOfView",value:function(t,e){var i=this;this.els[e].inView=!1,Object.keys(this.currentElements).forEach((function(t){t===e&&delete i.currentElements[t]})),t.call&&this.hasCallEventSet&&this.dispatchCall(t,"exit"),t.repeat&&t.el.classList.remove(t.class)}},{key:"dispatchCall",value:function(t,e){this.callWay=e,this.callValue=t.call.split(",").map((function(t){return t.trim()})),this.callObj=t,1==this.callValue.length&&(this.callValue=this.callValue[0]);var i=new Event(this.namespace+"call");this.el.dispatchEvent(i)}},{key:"dispatchScroll",value:function(){var t=new Event(this.namespace+"scroll");this.el.dispatchEvent(t)}},{key:"setEvents",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]);var i=this.listeners[t];i.push(e),1===i.length&&this.el.addEventListener(this.namespace+t,this.checkEvent,!1),"call"===t&&(this.hasCallEventSet=!0,this.detectElements(!0))}},{key:"unsetEvents",value:function(t,e){if(this.listeners[t]){var i=this.listeners[t],s=i.indexOf(e);s<0||(i.splice(s,1),0===i.index&&this.el.removeEventListener(this.namespace+t,this.checkEvent,!1))}}},{key:"checkEvent",value:function(t){var e=this,i=t.type.replace(this.namespace,""),s=this.listeners[i];s&&0!==s.length&&s.forEach((function(t){switch(i){case"scroll":return t(e.instance);case"call":return t(e.callValue,e.callWay,e.callObj);default:return t()}}))}},{key:"startScroll",value:function(){}},{key:"stopScroll",value:function(){}},{key:"setScroll",value:function(t,e){this.instance.scroll={x:0,y:0}}},{key:"destroy",value:function(){var t=this;window.removeEventListener("resize",this.checkResize,!1),Object.keys(this.listeners).forEach((function(e){t.el.removeEventListener(t.namespace+e,t.checkEvent,!1)})),this.listeners={},this.scrollToEls.forEach((function(e){e.removeEventListener("click",t.setScrollTo,!1)})),this.html.classList.remove(this.initClass)}}]),t}(),Po="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function Fo(t,e){return t(e={exports:{}},e.exports),e.exports}var Mo=Fo((function(t,e){t.exports={polyfill:function(){var t=window,e=document;if(!("scrollBehavior"in e.documentElement.style)||!0===t.__forceSmoothScrollPolyfill__){var i,s=t.HTMLElement||t.Element,n={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:s.prototype.scroll||o,scrollIntoView:s.prototype.scrollIntoView},r=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now,a=(i=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(i)?1:0);t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?m.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):n.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))},t.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?n.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):m.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},s.prototype.scroll=s.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==l(arguments[0])){var t=arguments[0].left,e=arguments[0].top;m.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");n.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},s.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):n.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},s.prototype.scrollIntoView=function(){if(!0!==l(arguments[0])){var i=d(this),s=i.getBoundingClientRect(),r=this.getBoundingClientRect();i!==e.body?(m.call(this,i,i.scrollLeft+r.left-s.left,i.scrollTop+r.top-s.top),"fixed"!==t.getComputedStyle(i).position&&t.scrollBy({left:s.left,top:s.top,behavior:"smooth"})):t.scrollBy({left:r.left,top:r.top,behavior:"smooth"})}else n.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function o(t,e){this.scrollLeft=t,this.scrollTop=e}function l(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function h(t,e){return"Y"===e?t.clientHeight+a<t.scrollHeight:"X"===e?t.clientWidth+a<t.scrollWidth:void 0}function u(e,i){var s=t.getComputedStyle(e,null)["overflow"+i];return"auto"===s||"scroll"===s}function c(t){var e=h(t,"Y")&&u(t,"Y"),i=h(t,"X")&&u(t,"X");return e||i}function d(t){for(;t!==e.body&&!1===c(t);)t=t.parentNode||t.host;return t}function p(e){var i,s,n,a,o=(r()-e.startTime)/468;a=o=o>1?1:o,i=.5*(1-Math.cos(Math.PI*a)),s=e.startX+(e.x-e.startX)*i,n=e.startY+(e.y-e.startY)*i,e.method.call(e.scrollable,s,n),s===e.x&&n===e.y||t.requestAnimationFrame(p.bind(t,e))}function m(i,s,a){var l,h,u,c,d=r();i===e.body?(l=t,h=t.scrollX||t.pageXOffset,u=t.scrollY||t.pageYOffset,c=n.scroll):(l=i,h=i.scrollLeft,u=i.scrollTop,c=o),p({scrollable:l,method:c,startTime:d,startX:h,startY:u,x:s,y:a})}}}})),Oo=(Mo.polyfill,function(t){yo(i,t);var e=wo(i);function i(){var t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return uo(this,i),(t=e.call(this,s)).resetNativeScroll&&(history.scrollRestoration&&(history.scrollRestoration="manual"),window.scrollTo(0,0)),window.addEventListener("scroll",t.checkScroll,!1),void 0===window.smoothscrollPolyfill&&(window.smoothscrollPolyfill=Mo,window.smoothscrollPolyfill.polyfill()),t}return po(i,[{key:"init",value:function(){this.instance.scroll.y=window.pageYOffset,this.addElements(),this.detectElements(),xo(vo(i.prototype),"init",this).call(this)}},{key:"checkScroll",value:function(){var t=this;xo(vo(i.prototype),"checkScroll",this).call(this),this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.speedTs=Date.now()),this.instance.scroll.y=window.pageYOffset,Object.entries(this.els).length&&(this.hasScrollTicking||(requestAnimationFrame((function(){t.detectElements()})),this.hasScrollTicking=!0))}},{key:"addDirection",value:function(){window.pageYOffset>this.instance.scroll.y?"down"!==this.instance.direction&&(this.instance.direction="down"):window.pageYOffset<this.instance.scroll.y&&"up"!==this.instance.direction&&(this.instance.direction="up")}},{key:"addSpeed",value:function(){window.pageYOffset!=this.instance.scroll.y?this.instance.speed=(window.pageYOffset-this.instance.scroll.y)/Math.max(1,Date.now()-this.speedTs):this.instance.speed=0}},{key:"resize",value:function(){Object.entries(this.els).length&&(this.windowHeight=window.innerHeight,this.updateElements())}},{key:"addElements",value:function(){var t=this;this.els={},this.el.querySelectorAll("[data-"+this.name+"]").forEach((function(e,i){e.getBoundingClientRect();var s,n,r,a=e.dataset[t.name+"Class"]||t.class,o="string"==typeof e.dataset[t.name+"Id"]?e.dataset[t.name+"Id"]:i,l="string"==typeof e.dataset[t.name+"Offset"]?e.dataset[t.name+"Offset"].split(","):t.offset,h=e.dataset[t.name+"Repeat"],u=e.dataset[t.name+"Call"],c=e.dataset[t.name+"Target"],d=(r=void 0!==c?document.querySelector("".concat(c)):e).getBoundingClientRect();s=d.top+t.instance.scroll.y,n=d.left+t.instance.scroll.x;var p=s+r.offsetHeight,m=n+r.offsetWidth;h="false"!=h&&(null!=h||t.repeat);var f=t.getRelativeOffset(l),g={el:e,targetEl:r,id:o,class:a,top:s+=f[0],bottom:p-=f[1],left:n,right:m,offset:l,progress:0,repeat:h,inView:!1,call:u};t.els[o]=g,e.classList.contains(a)&&t.setInView(t.els[o],o)}))}},{key:"updateElements",value:function(){var t=this;Object.entries(this.els).forEach((function(e){var i=To(e,2),s=i[0],n=i[1],r=n.targetEl.getBoundingClientRect().top+t.instance.scroll.y,a=r+n.targetEl.offsetHeight,o=t.getRelativeOffset(n.offset);t.els[s].top=r+o[0],t.els[s].bottom=a-o[1]})),this.hasScrollTicking=!1}},{key:"getRelativeOffset",value:function(t){var e=[0,0];if(t)for(var i=0;i<t.length;i++)"string"==typeof t[i]?t[i].includes("%")?e[i]=parseInt(t[i].replace("%","")*this.windowHeight/100):e[i]=parseInt(t[i]):e[i]=t[i];return e}},{key:"scrollTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=parseInt(e.offset)||0,s=!!e.callback&&e.callback;if("string"==typeof t){if("top"===t)t=this.html;else if("bottom"===t)t=this.html.offsetHeight-window.innerHeight;else if(!(t=document.querySelector(t)))return}else if("number"==typeof t)t=parseInt(t);else if(!t||!t.tagName)return void console.warn("`target` parameter is not valid");i="number"!=typeof t?t.getBoundingClientRect().top+i+this.instance.scroll.y:t+i;var n=function(){return parseInt(window.pageYOffset)===parseInt(i)};if(s){if(n())return void s();var r=function t(){n()&&(window.removeEventListener("scroll",t),s())};window.addEventListener("scroll",r)}window.scrollTo({top:i,behavior:0===e.duration?"auto":"smooth"})}},{key:"update",value:function(){this.addElements(),this.detectElements()}},{key:"destroy",value:function(){xo(vo(i.prototype),"destroy",this).call(this),window.removeEventListener("scroll",this.checkScroll,!1)}}]),i}(Ao)),Ro=Object.getOwnPropertySymbols,Lo=Object.prototype.hasOwnProperty,Io=Object.prototype.propertyIsEnumerable;function Bo(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var No=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var s=Object.getOwnPropertyNames(e).map((function(t){return e[t]}));if("0123456789"!==s.join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,s,n=Bo(t),r=1;r<arguments.length;r++){for(var a in i=Object(arguments[r]))Lo.call(i,a)&&(n[a]=i[a]);if(Ro){s=Ro(i);for(var o=0;o<s.length;o++)Io.call(i,s[o])&&(n[s[o]]=i[s[o]])}}return n};function zo(){}zo.prototype={on:function(t,e,i){var s=this.e||(this.e={});return(s[t]||(s[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){var s=this;function n(){s.off(t,n),e.apply(i,arguments)}return n._=e,this.on(t,n,i)},emit:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),s=0,n=i.length;s<n;s++)i[s].fn.apply(i[s].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),s=i[t],n=[];if(s&&e)for(var r=0,a=s.length;r<a;r++)s[r].fn!==e&&s[r].fn._!==e&&n.push(s[r]);return n.length?i[t]=n:delete i[t],this}};var jo=zo,Vo=Fo((function(t,e){(function(){(null!==e?e:this).Lethargy=function(){function t(t,e,i,s){this.stability=null!=t?Math.abs(t):8,this.sensitivity=null!=e?1+Math.abs(e):100,this.tolerance=null!=i?1+Math.abs(i):1.1,this.delay=null!=s?s:150,this.lastUpDeltas=function(){var t,e,i;for(i=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this),this.lastDownDeltas=function(){var t,e,i;for(i=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this),this.deltasTimestamp=function(){var t,e,i;for(i=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this)}return t.prototype.check=function(t){var e;return null!=(t=t.originalEvent||t).wheelDelta?e=t.wheelDelta:null!=t.deltaY?e=-40*t.deltaY:null==t.detail&&0!==t.detail||(e=-40*t.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),e>0?(this.lastUpDeltas.push(e),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(e),this.lastDownDeltas.shift(),this.isInertia(-1))},t.prototype.isInertia=function(t){var e,i,s,n,r,a,o;return null===(e=-1===t?this.lastDownDeltas:this.lastUpDeltas)[0]?t:!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&e[0]===e[2*this.stability-1])&&(s=e.slice(0,this.stability),i=e.slice(this.stability,2*this.stability),o=s.reduce((function(t,e){return t+e})),r=i.reduce((function(t,e){return t+e})),a=o/s.length,n=r/i.length,Math.abs(a)<Math.abs(n*this.tolerance)&&this.sensitivity<Math.abs(n)&&t)},t.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},t.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},t}()}).call(Po)})),Uo="onwheel"in document,Wo="onmousewheel"in document,qo="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,Ho=navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>1,Yo=!!window.navigator.msPointerEnabled,Xo="onkeydown"in document,$o=navigator.userAgent.indexOf("Firefox")>-1,Go=Object.prototype.toString,Qo=Object.prototype.hasOwnProperty;function Ko(t,e){return function(){return t.apply(e,arguments)}}var Zo=Vo.Lethargy,Jo="virtualscroll",tl=el;function el(t){!function(t){if(!t)return console.warn("bindAll requires at least one argument.");var e=Array.prototype.slice.call(arguments,1);if(0===e.length)for(var i in t)Qo.call(t,i)&&"function"==typeof t[i]&&"[object Function]"==Go.call(t[i])&&e.push(i);for(var s=0;s<e.length;s++){var n=e[s];t[n]=Ko(t[n],t)}}(this,"_onWheel","_onMouseWheel","_onTouchStart","_onTouchMove","_onKeyDown"),this.el=window,t&&t.el&&(this.el=t.el,delete t.el),this.options=No({mouseMultiplier:1,touchMultiplier:2,firefoxMultiplier:15,keyStep:120,preventTouch:!1,unpreventTouchClass:"vs-touchmove-allowed",limitInertia:!1,useKeyboard:!0,useTouch:!0},t),this.options.limitInertia&&(this._lethargy=new Zo),this._emitter=new jo,this._event={y:0,x:0,deltaX:0,deltaY:0},this.touchStartX=null,this.touchStartY=null,this.bodyTouchAction=null,void 0!==this.options.passive&&(this.listenerOptions={passive:this.options.passive})}function il(t,e,i){return(1-i)*t+i*e}function sl(t){var e={};if(window.getComputedStyle){var i=getComputedStyle(t),s=i.transform||i.webkitTransform||i.mozTransform,n=s.match(/^matrix3d\((.+)\)$/);return n?(e.x=n?parseFloat(n[1].split(", ")[12]):0,e.y=n?parseFloat(n[1].split(", ")[13]):0):(n=s.match(/^matrix\((.+)\)$/),e.x=n?parseFloat(n[1].split(", ")[4]):0,e.y=n?parseFloat(n[1].split(", ")[5]):0),e}}function nl(t){for(var e=[];t&&t!==document;t=t.parentNode)e.push(t);return e}el.prototype._notify=function(t){var e=this._event;e.x+=e.deltaX,e.y+=e.deltaY,this._emitter.emit(Jo,{x:e.x,y:e.y,deltaX:e.deltaX,deltaY:e.deltaY,originalEvent:t})},el.prototype._onWheel=function(t){var e=this.options;if(!this._lethargy||!1!==this._lethargy.check(t)){var i=this._event;i.deltaX=t.wheelDeltaX||-1*t.deltaX,i.deltaY=t.wheelDeltaY||-1*t.deltaY,$o&&1==t.deltaMode&&(i.deltaX*=e.firefoxMultiplier,i.deltaY*=e.firefoxMultiplier),i.deltaX*=e.mouseMultiplier,i.deltaY*=e.mouseMultiplier,this._notify(t)}},el.prototype._onMouseWheel=function(t){if(!this.options.limitInertia||!1!==this._lethargy.check(t)){var e=this._event;e.deltaX=t.wheelDeltaX?t.wheelDeltaX:0,e.deltaY=t.wheelDeltaY?t.wheelDeltaY:t.wheelDelta,this._notify(t)}},el.prototype._onTouchStart=function(t){var e=t.targetTouches?t.targetTouches[0]:t;this.touchStartX=e.pageX,this.touchStartY=e.pageY},el.prototype._onTouchMove=function(t){var e=this.options;e.preventTouch&&!t.target.classList.contains(e.unpreventTouchClass)&&t.preventDefault();var i=this._event,s=t.targetTouches?t.targetTouches[0]:t;i.deltaX=(s.pageX-this.touchStartX)*e.touchMultiplier,i.deltaY=(s.pageY-this.touchStartY)*e.touchMultiplier,this.touchStartX=s.pageX,this.touchStartY=s.pageY,this._notify(t)},el.prototype._onKeyDown=function(t){var e=this._event;e.deltaX=e.deltaY=0;var i=window.innerHeight-40;switch(t.keyCode){case 37:case 38:e.deltaY=this.options.keyStep;break;case 39:case 40:e.deltaY=-this.options.keyStep;break;case t.shiftKey:e.deltaY=i;break;case 32:e.deltaY=-i;break;default:return}this._notify(t)},el.prototype._bind=function(){Uo&&this.el.addEventListener("wheel",this._onWheel,this.listenerOptions),Wo&&this.el.addEventListener("mousewheel",this._onMouseWheel,this.listenerOptions),qo&&this.options.useTouch&&(this.el.addEventListener("touchstart",this._onTouchStart,this.listenerOptions),this.el.addEventListener("touchmove",this._onTouchMove,this.listenerOptions)),Yo&&Ho&&(this.bodyTouchAction=document.body.style.msTouchAction,document.body.style.msTouchAction="none",this.el.addEventListener("MSPointerDown",this._onTouchStart,!0),this.el.addEventListener("MSPointerMove",this._onTouchMove,!0)),Xo&&this.options.useKeyboard&&document.addEventListener("keydown",this._onKeyDown)},el.prototype._unbind=function(){Uo&&this.el.removeEventListener("wheel",this._onWheel),Wo&&this.el.removeEventListener("mousewheel",this._onMouseWheel),qo&&(this.el.removeEventListener("touchstart",this._onTouchStart),this.el.removeEventListener("touchmove",this._onTouchMove)),Yo&&Ho&&(document.body.style.msTouchAction=this.bodyTouchAction,this.el.removeEventListener("MSPointerDown",this._onTouchStart,!0),this.el.removeEventListener("MSPointerMove",this._onTouchMove,!0)),Xo&&this.options.useKeyboard&&document.removeEventListener("keydown",this._onKeyDown)},el.prototype.on=function(t,e){this._emitter.on(Jo,t,e);var i=this._emitter.e;i&&i[Jo]&&1===i[Jo].length&&this._bind()},el.prototype.off=function(t,e){this._emitter.off(Jo,t,e);var i=this._emitter.e;(!i[Jo]||i[Jo].length<=0)&&this._unbind()},el.prototype.reset=function(){var t=this._event;t.x=0,t.y=0},el.prototype.destroy=function(){this._emitter.off(),this._unbind()};var rl=.1,al="function"==typeof Float32Array;function ol(t,e){return 1-3*e+3*t}function ll(t,e){return 3*e-6*t}function hl(t){return 3*t}function ul(t,e,i){return((ol(e,i)*t+ll(e,i))*t+hl(e))*t}function cl(t,e,i){return 3*ol(e,i)*t*t+2*ll(e,i)*t+hl(e)}function dl(t){return t}var pl=function(t,e,i,s){if(!(0<=t&&t<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&i===s)return dl;for(var n=al?new Float32Array(11):new Array(11),r=0;r<11;++r)n[r]=ul(r*rl,t,i);return function(r){return 0===r?0:1===r?1:ul(function(e){for(var s=0,r=1;10!==r&&n[r]<=e;++r)s+=rl;--r;var a=s+(e-n[r])/(n[r+1]-n[r])*rl,o=cl(a,t,i);return o>=.001?function(t,e,i,s){for(var n=0;n<4;++n){var r=cl(e,i,s);if(0===r)return e;e-=(ul(e,i,s)-t)/r}return e}(e,a,t,i):0===o?a:function(t,e,i,s,n){var r,a,o=0;do{(r=ul(a=e+(i-e)/2,s,n)-t)>0?i=a:e=a}while(Math.abs(r)>1e-7&&++o<10);return a}(e,s,s+rl,t,i)}(r),e,s)}},ml=function(t){yo(i,t);var e=wo(i);function i(){var t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return uo(this,i),history.scrollRestoration&&(history.scrollRestoration="manual"),window.scrollTo(0,0),(t=e.call(this,s)).inertia&&(t.lerp=.1*t.inertia),t.isScrolling=!1,t.isDraggingScrollbar=!1,t.isTicking=!1,t.hasScrollTicking=!1,t.parallaxElements={},t.stop=!1,t.scrollbarContainer=s.scrollbarContainer,t.checkKey=t.checkKey.bind(_o(t)),window.addEventListener("keydown",t.checkKey,!1),t}return po(i,[{key:"init",value:function(){var t=this;this.html.classList.add(this.smoothClass),this.html.setAttribute("data-".concat(this.name,"-direction"),this.direction),this.instance=go({delta:{x:this.initPosition.x,y:this.initPosition.y},scroll:{x:this.initPosition.x,y:this.initPosition.y}},this.instance),this.vs=new tl({el:this.scrollFromAnywhere?document:this.el,mouseMultiplier:navigator.platform.indexOf("Win")>-1?1:.4,firefoxMultiplier:this.firefoxMultiplier,touchMultiplier:this.touchMultiplier,useKeyboard:!1,passive:!0}),this.vs.on((function(e){t.stop||t.isDraggingScrollbar||requestAnimationFrame((function(){t.updateDelta(e),t.isScrolling||t.startScrolling()}))})),this.setScrollLimit(),this.initScrollBar(),this.addSections(),this.addElements(),this.checkScroll(!0),this.transformElements(!0,!0),xo(vo(i.prototype),"init",this).call(this)}},{key:"setScrollLimit",value:function(){if(this.instance.limit.y=this.el.offsetHeight-this.windowHeight,"horizontal"===this.direction){for(var t=0,e=this.el.children,i=0;i<e.length;i++)t+=e[i].offsetWidth;this.instance.limit.x=t-this.windowWidth}}},{key:"startScrolling",value:function(){this.startScrollTs=Date.now(),this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}},{key:"stopScrolling",value:function(){cancelAnimationFrame(this.checkScrollRaf),this.startScrollTs=void 0,this.scrollToRaf&&(cancelAnimationFrame(this.scrollToRaf),this.scrollToRaf=null),this.isScrolling=!1,this.instance.scroll.y=Math.round(this.instance.scroll.y),this.html.classList.remove(this.scrollingClass)}},{key:"checkKey",value:function(t){var e=this;if(this.stop)9==t.keyCode&&requestAnimationFrame((function(){e.html.scrollTop=0,document.body.scrollTop=0,e.html.scrollLeft=0,document.body.scrollLeft=0}));else{switch(t.keyCode){case 9:requestAnimationFrame((function(){e.html.scrollTop=0,document.body.scrollTop=0,e.html.scrollLeft=0,document.body.scrollLeft=0,e.scrollTo(document.activeElement,{offset:-window.innerHeight/2})}));break;case 38:this.instance.delta[this.directionAxis]-=240;break;case 40:this.instance.delta[this.directionAxis]+=240;break;case 33:this.instance.delta[this.directionAxis]-=window.innerHeight;break;case 34:this.instance.delta[this.directionAxis]+=window.innerHeight;break;case 36:this.instance.delta[this.directionAxis]-=this.instance.limit[this.directionAxis];break;case 35:this.instance.delta[this.directionAxis]+=this.instance.limit[this.directionAxis];break;case 32:document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||(t.shiftKey?this.instance.delta[this.directionAxis]-=window.innerHeight:this.instance.delta[this.directionAxis]+=window.innerHeight);break;default:return}this.instance.delta[this.directionAxis]<0&&(this.instance.delta[this.directionAxis]=0),this.instance.delta[this.directionAxis]>this.instance.limit[this.directionAxis]&&(this.instance.delta[this.directionAxis]=this.instance.limit[this.directionAxis]),this.stopScrolling(),this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}}},{key:"checkScroll",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||this.isScrolling||this.isDraggingScrollbar){this.hasScrollTicking||(this.checkScrollRaf=requestAnimationFrame((function(){return t.checkScroll()})),this.hasScrollTicking=!0),this.updateScroll();var s=Math.abs(this.instance.delta[this.directionAxis]-this.instance.scroll[this.directionAxis]),n=Date.now()-this.startScrollTs;if(!this.animatingScroll&&n>100&&(s<.5&&0!=this.instance.delta[this.directionAxis]||s<.5&&0==this.instance.delta[this.directionAxis])&&this.stopScrolling(),Object.entries(this.sections).forEach((function(i){var s=To(i,2),n=(s[0],s[1]);n.persistent||t.instance.scroll[t.directionAxis]>n.offset[t.directionAxis]&&t.instance.scroll[t.directionAxis]<n.limit[t.directionAxis]?("horizontal"===t.direction?t.transform(n.el,-t.instance.scroll[t.directionAxis],0):t.transform(n.el,0,-t.instance.scroll[t.directionAxis]),n.inView||(n.inView=!0,n.el.style.opacity=1,n.el.style.pointerEvents="all",n.el.setAttribute("data-".concat(t.name,"-section-inview"),""))):((n.inView||e)&&(n.inView=!1,n.el.style.opacity=0,n.el.style.pointerEvents="none",n.el.removeAttribute("data-".concat(t.name,"-section-inview"))),t.transform(n.el,0,0))})),this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.speedTs=Date.now()),this.detectElements(),this.transformElements(),this.hasScrollbar){var r=this.instance.scroll[this.directionAxis]/this.instance.limit[this.directionAxis]*this.scrollBarLimit[this.directionAxis];"horizontal"===this.direction?this.transform(this.scrollbarThumb,r,0):this.transform(this.scrollbarThumb,0,r)}xo(vo(i.prototype),"checkScroll",this).call(this),this.hasScrollTicking=!1}}},{key:"resize",value:function(){this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.checkContext(),this.windowMiddle={x:this.windowWidth/2,y:this.windowHeight/2},this.update()}},{key:"updateDelta",value:function(t){var e,i=this[this.context]&&this[this.context].gestureDirection?this[this.context].gestureDirection:this.gestureDirection;e="both"===i?t.deltaX+t.deltaY:"vertical"===i?t.deltaY:"horizontal"===i?t.deltaX:t.deltaY,this.instance.delta[this.directionAxis]-=e*this.multiplier,this.instance.delta[this.directionAxis]<0&&(this.instance.delta[this.directionAxis]=0),this.instance.delta[this.directionAxis]>this.instance.limit[this.directionAxis]&&(this.instance.delta[this.directionAxis]=this.instance.limit[this.directionAxis])}},{key:"updateScroll",value:function(t){this.isScrolling||this.isDraggingScrollbar?this.instance.scroll[this.directionAxis]=il(this.instance.scroll[this.directionAxis],this.instance.delta[this.directionAxis],this.lerp):this.instance.scroll[this.directionAxis]>this.instance.limit[this.directionAxis]?this.setScroll(this.instance.scroll[this.directionAxis],this.instance.limit[this.directionAxis]):this.instance.scroll.y<0?this.setScroll(this.instance.scroll[this.directionAxis],0):this.setScroll(this.instance.scroll[this.directionAxis],this.instance.delta[this.directionAxis])}},{key:"addDirection",value:function(){this.instance.delta.y>this.instance.scroll.y?"down"!==this.instance.direction&&(this.instance.direction="down"):this.instance.delta.y<this.instance.scroll.y&&"up"!==this.instance.direction&&(this.instance.direction="up"),this.instance.delta.x>this.instance.scroll.x?"right"!==this.instance.direction&&(this.instance.direction="right"):this.instance.delta.x<this.instance.scroll.x&&"left"!==this.instance.direction&&(this.instance.direction="left")}},{key:"addSpeed",value:function(){this.instance.delta[this.directionAxis]!=this.instance.scroll[this.directionAxis]?this.instance.speed=(this.instance.delta[this.directionAxis]-this.instance.scroll[this.directionAxis])/Math.max(1,Date.now()-this.speedTs):this.instance.speed=0}},{key:"initScrollBar",value:function(){if(this.scrollbar=document.createElement("span"),this.scrollbarThumb=document.createElement("span"),this.scrollbar.classList.add("".concat(this.scrollbarClass)),this.scrollbarThumb.classList.add("".concat(this.scrollbarClass,"_thumb")),this.scrollbar.append(this.scrollbarThumb),this.scrollbarContainer?this.scrollbarContainer.append(this.scrollbar):document.body.append(this.scrollbar),this.getScrollBar=this.getScrollBar.bind(this),this.releaseScrollBar=this.releaseScrollBar.bind(this),this.moveScrollBar=this.moveScrollBar.bind(this),this.scrollbarThumb.addEventListener("mousedown",this.getScrollBar),window.addEventListener("mouseup",this.releaseScrollBar),window.addEventListener("mousemove",this.moveScrollBar),this.hasScrollbar=!1,"horizontal"==this.direction){if(this.instance.limit.x+this.windowWidth<=this.windowWidth)return}else if(this.instance.limit.y+this.windowHeight<=this.windowHeight)return;this.hasScrollbar=!0,this.scrollbarBCR=this.scrollbar.getBoundingClientRect(),this.scrollbarHeight=this.scrollbarBCR.height,this.scrollbarWidth=this.scrollbarBCR.width,"horizontal"===this.direction?this.scrollbarThumb.style.width="".concat(this.scrollbarWidth*this.scrollbarWidth/(this.instance.limit.x+this.scrollbarWidth),"px"):this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit.y+this.scrollbarHeight),"px"),this.scrollbarThumbBCR=this.scrollbarThumb.getBoundingClientRect(),this.scrollBarLimit={x:this.scrollbarWidth-this.scrollbarThumbBCR.width,y:this.scrollbarHeight-this.scrollbarThumbBCR.height}}},{key:"reinitScrollBar",value:function(){if(this.hasScrollbar=!1,"horizontal"==this.direction){if(this.instance.limit.x+this.windowWidth<=this.windowWidth)return}else if(this.instance.limit.y+this.windowHeight<=this.windowHeight)return;this.hasScrollbar=!0,this.scrollbarBCR=this.scrollbar.getBoundingClientRect(),this.scrollbarHeight=this.scrollbarBCR.height,this.scrollbarWidth=this.scrollbarBCR.width,"horizontal"===this.direction?this.scrollbarThumb.style.width="".concat(this.scrollbarWidth*this.scrollbarWidth/(this.instance.limit.x+this.scrollbarWidth),"px"):this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit.y+this.scrollbarHeight),"px"),this.scrollbarThumbBCR=this.scrollbarThumb.getBoundingClientRect(),this.scrollBarLimit={x:this.scrollbarWidth-this.scrollbarThumbBCR.width,y:this.scrollbarHeight-this.scrollbarThumbBCR.height}}},{key:"destroyScrollBar",value:function(){this.scrollbarThumb.removeEventListener("mousedown",this.getScrollBar),window.removeEventListener("mouseup",this.releaseScrollBar),window.removeEventListener("mousemove",this.moveScrollBar),this.scrollbar.remove()}},{key:"getScrollBar",value:function(t){this.isDraggingScrollbar=!0,this.checkScroll(),this.html.classList.remove(this.scrollingClass),this.html.classList.add(this.draggingClass)}},{key:"releaseScrollBar",value:function(t){this.isDraggingScrollbar=!1,this.isScrolling&&this.html.classList.add(this.scrollingClass),this.html.classList.remove(this.draggingClass)}},{key:"moveScrollBar",value:function(t){var e=this;this.isDraggingScrollbar&&requestAnimationFrame((function(){var i=100*(t.clientX-e.scrollbarBCR.left)/e.scrollbarWidth*e.instance.limit.x/100,s=100*(t.clientY-e.scrollbarBCR.top)/e.scrollbarHeight*e.instance.limit.y/100;s>0&&s<e.instance.limit.y&&(e.instance.delta.y=s),i>0&&i<e.instance.limit.x&&(e.instance.delta.x=i)}))}},{key:"addElements",value:function(){var t=this;this.els={},this.parallaxElements={},this.el.querySelectorAll("[data-".concat(this.name,"]")).forEach((function(e,i){var s,n,r,a=nl(e),o=Object.entries(t.sections).map((function(t){var e=To(t,2);return e[0],e[1]})).find((function(t){return a.includes(t.el)})),l=e.dataset[t.name+"Class"]||t.class,h="string"==typeof e.dataset[t.name+"Id"]?e.dataset[t.name+"Id"]:"el"+i,u=e.dataset[t.name+"Repeat"],c=e.dataset[t.name+"Call"],d=e.dataset[t.name+"Position"],p=e.dataset[t.name+"Delay"],m=e.dataset[t.name+"Direction"],f="string"==typeof e.dataset[t.name+"Sticky"],g=!!e.dataset[t.name+"Speed"]&&parseFloat(e.dataset[t.name+"Speed"])/10,y="string"==typeof e.dataset[t.name+"Offset"]?e.dataset[t.name+"Offset"].split(","):t.offset,v=e.dataset[t.name+"Target"],b=(r=void 0!==v?document.querySelector("".concat(v)):e).getBoundingClientRect();null===o||o.inView?(s=b.top+t.instance.scroll.y-sl(r).y,n=b.left+t.instance.scroll.x-sl(r).x):(s=b.top-sl(o.el).y-sl(r).y,n=b.left-sl(o.el).x-sl(r).x);var _=s+r.offsetHeight,D=n+r.offsetWidth,w={x:(D-n)/2+n,y:(_-s)/2+s};if(f){var x=e.getBoundingClientRect(),T=x.top,C=x.left,E={x:C-n,y:T-s};s+=window.innerHeight,n+=window.innerWidth,_=T+r.offsetHeight-e.offsetHeight-E[t.directionAxis],w={x:((D=C+r.offsetWidth-e.offsetWidth-E[t.directionAxis])-n)/2+n,y:(_-s)/2+s}}u="false"!=u&&(null!=u||t.repeat);var S=[0,0];if(y)if("horizontal"===t.direction){for(var k=0;k<y.length;k++)"string"==typeof y[k]?y[k].includes("%")?S[k]=parseInt(y[k].replace("%","")*t.windowWidth/100):S[k]=parseInt(y[k]):S[k]=y[k];n+=S[0],D-=S[1]}else{for(k=0;k<y.length;k++)"string"==typeof y[k]?y[k].includes("%")?S[k]=parseInt(y[k].replace("%","")*t.windowHeight/100):S[k]=parseInt(y[k]):S[k]=y[k];s+=S[0],_-=S[1]}var A={el:e,id:h,class:l,section:o,top:s,middle:w,bottom:_,left:n,right:D,offset:y,progress:0,repeat:u,inView:!1,call:c,speed:g,delay:p,position:d,target:r,direction:m,sticky:f};t.els[h]=A,e.classList.contains(l)&&t.setInView(t.els[h],h),(!1!==g||f)&&(t.parallaxElements[h]=A)}))}},{key:"addSections",value:function(){var t=this;this.sections={};var e=this.el.querySelectorAll("[data-".concat(this.name,"-section]"));0===e.length&&(e=[this.el]),e.forEach((function(e,i){var s="string"==typeof e.dataset[t.name+"Id"]?e.dataset[t.name+"Id"]:"section"+i,n=e.getBoundingClientRect(),r={x:n.left-1.5*window.innerWidth-sl(e).x,y:n.top-1.5*window.innerHeight-sl(e).y},a={x:r.x+n.width+2*window.innerWidth,y:r.y+n.height+2*window.innerHeight},o="string"==typeof e.dataset[t.name+"Persistent"];e.setAttribute("data-scroll-section-id",s);var l={el:e,offset:r,limit:a,inView:!1,persistent:o,id:s};t.sections[s]=l}))}},{key:"transform",value:function(t,e,i,s){var n;if(s){var r=sl(t),a=il(r.x,e,s),o=il(r.y,i,s);n="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(a,",").concat(o,",0,1)")}else n="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(e,",").concat(i,",0,1)");t.style.webkitTransform=n,t.style.msTransform=n,t.style.transform=n}},{key:"transformElements",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.instance.scroll.x+this.windowWidth,n=this.instance.scroll.y+this.windowHeight,r={x:this.instance.scroll.x+this.windowMiddle.x,y:this.instance.scroll.y+this.windowMiddle.y};Object.entries(this.parallaxElements).forEach((function(a){var o=To(a,2),l=(o[0],o[1]),h=!1;if(t&&(h=0),l.inView||i)switch(l.position){case"top":case"left":h=e.instance.scroll[e.directionAxis]*-l.speed;break;case"elementTop":h=(n-l.top)*-l.speed;break;case"bottom":h=(e.instance.limit[e.directionAxis]-n+e.windowHeight)*l.speed;break;case"elementLeft":h=(s-l.left)*-l.speed;break;case"right":h=(e.instance.limit[e.directionAxis]-s+e.windowHeight)*l.speed;break;default:h=(r[e.directionAxis]-l.middle[e.directionAxis])*-l.speed}l.sticky&&(h=l.inView?"horizontal"===e.direction?e.instance.scroll.x-l.left+window.innerWidth:e.instance.scroll.y-l.top+window.innerHeight:"horizontal"===e.direction?e.instance.scroll.x<l.left-window.innerWidth&&e.instance.scroll.x<l.left-window.innerWidth/2?0:e.instance.scroll.x>l.right&&e.instance.scroll.x>l.right+100&&l.right-l.left+window.innerWidth:e.instance.scroll.y<l.top-window.innerHeight&&e.instance.scroll.y<l.top-window.innerHeight/2?0:e.instance.scroll.y>l.bottom&&e.instance.scroll.y>l.bottom+100&&l.bottom-l.top+window.innerHeight),!1!==h&&("horizontal"===l.direction||"horizontal"===e.direction&&"vertical"!==l.direction?e.transform(l.el,h,0,!t&&l.delay):e.transform(l.el,0,h,!t&&l.delay))}))}},{key:"scrollTo",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=parseInt(i.offset)||0,n=isNaN(parseInt(i.duration))?1e3:parseInt(i.duration),r=i.easing||[.25,0,.35,1],a=!!i.disableLerp,o=!!i.callback&&i.callback;if(r=pl.apply(void 0,Co(r)),"string"==typeof t){if("top"===t)t=0;else if("bottom"===t)t=this.instance.limit.y;else if("left"===t)t=0;else if("right"===t)t=this.instance.limit.x;else if(!(t=document.querySelector(t)))return}else if("number"==typeof t)t=parseInt(t);else if(!t||!t.tagName)return void console.warn("`target` parameter is not valid");if("number"!=typeof t){var l=nl(t).includes(this.el);if(!l)return;var h=t.getBoundingClientRect(),u=h.top,c=h.left,d=nl(t),p=d.find((function(t){return Object.entries(e.sections).map((function(t){var e=To(t,2);return e[0],e[1]})).find((function(e){return e.el==t}))})),m=0;m=p?sl(p)[this.directionAxis]:-this.instance.scroll[this.directionAxis],s="horizontal"===this.direction?c+s-m:u+s-m}else s=t+s;var f=parseFloat(this.instance.delta[this.directionAxis]),g=Math.max(0,Math.min(s,this.instance.limit[this.directionAxis])),y=g-f,v=function(t){a?"horizontal"===e.direction?e.setScroll(f+y*t,e.instance.delta.y):e.setScroll(e.instance.delta.x,f+y*t):e.instance.delta[e.directionAxis]=f+y*t};this.animatingScroll=!0,this.stopScrolling(),this.startScrolling();var b=Date.now(),_=function t(){var i=(Date.now()-b)/n;i>1?(v(1),e.animatingScroll=!1,0==n&&e.update(),o&&o()):(e.scrollToRaf=requestAnimationFrame(t),v(r(i)))};_()}},{key:"update",value:function(){this.setScrollLimit(),this.addSections(),this.addElements(),this.detectElements(),this.updateScroll(),this.transformElements(!0),this.reinitScrollBar(),this.checkScroll(!0)}},{key:"startScroll",value:function(){this.stop=!1}},{key:"stopScroll",value:function(){this.stop=!0}},{key:"setScroll",value:function(t,e){this.instance=go(go({},this.instance),{},{scroll:{x:t,y:e},delta:{x:t,y:e},speed:0})}},{key:"destroy",value:function(){xo(vo(i.prototype),"destroy",this).call(this),this.stopScrolling(),this.html.classList.remove(this.smoothClass),this.vs.destroy(),this.destroyScrollBar(),window.removeEventListener("keydown",this.checkKey,!1)}}]),i}(Ao),fl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};uo(this,t),this.options=e,Object.assign(this,ko,e),this.smartphone=ko.smartphone,e.smartphone&&Object.assign(this.smartphone,e.smartphone),this.tablet=ko.tablet,e.tablet&&Object.assign(this.tablet,e.tablet),this.smooth||"horizontal"!=this.direction||console.warn("🚨 `smooth:false` & `horizontal` direction are not yet compatible"),this.tablet.smooth||"horizontal"!=this.tablet.direction||console.warn("🚨 `smooth:false` & `horizontal` direction are not yet compatible (tablet)"),this.smartphone.smooth||"horizontal"!=this.smartphone.direction||console.warn("🚨 `smooth:false` & `horizontal` direction are not yet compatible (smartphone)"),this.init()}return po(t,[{key:"init",value:function(){if(this.options.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||window.innerWidth<this.tablet.breakpoint,this.options.isTablet=this.options.isMobile&&window.innerWidth>=this.tablet.breakpoint,this.smooth&&!this.options.isMobile||this.tablet.smooth&&this.options.isTablet||this.smartphone.smooth&&this.options.isMobile&&!this.options.isTablet?this.scroll=new ml(this.options):this.scroll=new Oo(this.options),this.scroll.init(),window.location.hash){var t=window.location.hash.slice(1,window.location.hash.length),e=document.getElementById(t);e&&this.scroll.scrollTo(e)}}},{key:"update",value:function(){this.scroll.update()}},{key:"start",value:function(){this.scroll.startScroll()}},{key:"stop",value:function(){this.scroll.stopScroll()}},{key:"scrollTo",value:function(t,e){this.scroll.scrollTo(t,e)}},{key:"setScroll",value:function(t,e){this.scroll.setScroll(t,e)}},{key:"on",value:function(t,e){this.scroll.setEvents(t,e)}},{key:"off",value:function(t,e){this.scroll.unsetEvents(t,e)}},{key:"destroy",value:function(){this.scroll.destroy()}}]),t}(),gl=fl;function yl(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)t[s]=i[s]}return t}function vl(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function bl(t){return function(t){if(Array.isArray(t))return vl(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return vl(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?vl(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function t(e,i){function s(t,s,n){if("undefined"!=typeof document){"number"==typeof(n=yl({},i,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var a in n)n[a]&&(r+="; "+a,!0!==n[a]&&(r+="="+n[a].split(";")[0]));return document.cookie=t+"="+e.write(s,t)+r}}return Object.create({set:s,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var i=document.cookie?document.cookie.split("; "):[],s={},n=0;n<i.length;n++){var r=i[n].split("="),a=r.slice(1).join("=");try{var o=decodeURIComponent(r[0]);if(s[o]=e.read(a,o),t===o)break}catch(t){}}return t?s[t]:s}},remove:function(t,e){s(t,"",yl({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,yl({},this.attributes,e))},withConverter:function(e){return t(yl({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(e)}})})({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),i(425),o((function(){var t=window.atob("bWFpbHRvOmltb3Rpb25AaW1vdGlvbi1mYWN0b3J5LmNvbQ=="),e=document.querySelectorAll("[data-gen-em]"),i=t.replace("mailto:",""),s=!1;window.onmouseover=window.ontouchstart=window.onfocus=function(n){!s&&n.isTrusted&&(e.forEach((function(e){e.setAttribute("href",t),e.hasAttribute("data-href-only")||(e.innerHTML=i)})),s=!0)}}));var _l=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|playbook|silk|BlackBerry|BB10|Windows Phone|Tizen|Bada|webOS|IEMobile|Opera Mini)/),Dl="ontouchstart"in window||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints,wl=_l||Dl;function xl(t,e,i){localStorage.setItem(t,e),null!=i&&localStorage.setItem(t+"-expires",i.expires)}o((function(){if(!wl){document.querySelector(".js-canvas");var t,e,i=document.querySelector(".js-cursor-canvas"),s=i.getContext("2d"),n=i.width=window.innerWidth,r=i.height=window.innerHeight,a=n/2,o=r/2,l={radius:10,lastX:a,lastY:o},h={fillStyle:"rgba(0,0,0,0)",lastX:a,lastY:o};!function(){t=bl(document.querySelectorAll(".bait")),e=bl(document.querySelectorAll(".bait-play")),requestAnimationFrame(c),window.addEventListener("mousemove",(function(t){a=t.pageX,o=t.pageY})),window.addEventListener("resize",u,!1);var i=sn.to(l,{radius:3*l.radius,ease:"Power1.easeInOut",duration:.25,paused:!0}),s=sn.to(h,{fillStyle:"rgba(255,255,255,1)",ease:"Power1.easeInOut",duration:.25,paused:!0});t.forEach((function(t){t.addEventListener("mouseenter",(function(){i.play()}),!1),t.addEventListener("mouseleave",(function(){i.reverse()}),!1)})),e.forEach((function(t){t.addEventListener("mouseenter",(function(){i.play(),s.play()}),!1),t.addEventListener("mouseleave",(function(){s.reverse(),i.reverse()}),!1)}))}()}function u(){n=i.width=window.innerWidth,r=i.height=window.innerHeight}function c(){l.lastX=d(l.lastX,a,.25),l.lastY=d(l.lastY,o,.25),h.lastX=d(h.lastX,a,.15),h.lastY=d(h.lastY,o,.15),s.clearRect(0,0,n,r),s.beginPath(),s.arc(l.lastX,l.lastY,l.radius,0,2*Math.PI,!1),s.fillStyle="rgba(255, 255, 255, 1)",s.fill(),s.closePath(),s.font="bold 12px Arial",s.textAlign="left",s.fillStyle=h.fillStyle,s.fillText("PLAY",h.lastX+45,h.lastY+6),requestAnimationFrame(c)}function d(t,e,i){return(1-i)*t+i*e}}));var Tl=localStorage.getItem("theme");function Cl(t,{max:e,delay:i,callback:s,count:n}={}){function r(){s(t),u++,p={time:0,interactions:0},h=!0,null!==e&&u>=e&&a("remove")}function a(e){for(let i in m)t[`${e}EventListener`](i,m[i])}let o=i,l=n,h=!1,u=0,c=0,d=null,p={time:0,interactions:0};const m={mouseover:function(){return h=!1,c=Date.now(),p.interactions++,null!==l&&p.interactions>=l&&(r(),!0)||null!==o&&(d=setTimeout((()=>{r()}),o-p.time),d)}.bind(this),mouseleave:function(){return clearTimeout(d),h||void(p.time=p.time+(Date.now()-c))}.bind(this)};return a("add"),{remove:()=>a("remove")}}"light"!=Tl&&(Tl="dark",xl("theme","dark")),"dark"==Tl?document.querySelector("html").classList.add("dark-mode"):document.querySelector("html").classList.remove("dark-mode"),document.querySelectorAll(".theme-toggle").forEach((function(t){t.addEventListener("click",(function(t){document.querySelector("html").classList.toggle("dark-mode"),document.querySelector("html").classList.contains("dark-mode")?xl("theme","dark"):xl("theme","light")}))}));var El=function(t,{max:e=null,delay:i=500,count:s=null,callback:n=(()=>{})}={}){let r=(a=t,"string"==typeof a?a=document.querySelectorAll(a):a instanceof NodeList||(a=[a]),[].slice.call(a)).map((t=>new Cl(t,{delay:i,callback:n,max:e,count:s})));var a;return{remove:()=>{r.forEach((t=>t.remove()))}}},Sl=function(){function e(i){t(this,e),this.app=i,this.menuItems=sn.utils.toArray(".nav-primary-item a"),this.menuItems.push(".contact-time-container"),this.menuItems.push(".legal-container"),this.menuItems.push(".copyright-text"),this.isMenuOpen=!1,this.tlOpen=null,this.tlClose=null,this.setActiveMenuItem(),this.initMenu(),this.addListeners(),this.initPreFetch()}return s(e,[{key:"setActiveMenuItem",value:function(){for(var t=0,e=0;e<this.menuItems.length;e++)this.menuItems[e].href===window.location.href&&(t=e,this.menuItems[t].classList.add("is-active"))}},{key:"initMenu",value:function(){sn.set(".nav-bar",{autoAlpha:1,duration:.3,ease:"Power4.easeIn"}),sn.set(".imf-dot",{autoAlpha:1,duration:.3,ease:"Power4.easeIn"}),sn.set(".nav-container",{autoAlpha:0,pointerEvents:"none"}),sn.to(this.menuItems,{duration:0,opacity:0,yPercent:-50,stagger:0}),sn.set(".burger-line__top",{left:0,yPercent:0,top:0,rotation:0}),sn.set(".burger-line__bottom",{right:0,yPercent:0,bottom:0,rotation:0})}},{key:"toggle",value:function(){this.isMenuOpen?this.close():this.open()}},{key:"open",value:function(){null!=this.tlClose&&this.tlClose.isActive()&&this.tlClose.kill(),this.tlOpen=sn.timeline().to(".nav-top",{autoAlpha:0,duration:.3}).to(".menu-panel-path",{duration:.6,attr:{d:"M 0 0 V 50 Q 50 100 100 50 V 0 z"},ease:"Expo.easeIn"}).to(".menu-panel-path",{duration:.3,attr:{d:"M 0 0 V 100 Q 50 100 100 100 V 0 z"},ease:"Expo.easeOut"}).to(".burger-line__top",{duration:.5,left:0,yPercent:-50,top:"50%",ease:"Back.easeOut.config(0.5)"},0).to(".burger-line__bottom",{duration:.5,right:0,yPercent:50,bottom:"50%",ease:"Back.easeOut.config(0.5)"},"<").to(".burger-line__top",{duration:.2,rotation:45},">").to(".burger-line__bottom",{duration:.2,rotation:-45},"<").to(".contact-text",{autoAlpha:0,duration:.3},"<").to(".nav-container",{autoAlpha:1,pointerEvents:"all"},"0.9").to(this.menuItems,{duration:.8,opacity:1,yPercent:0,stagger:.15,ease:"Power1.easeOut"},"<"),this.isMenuOpen=!0}},{key:"close",value:function(){this.isMenuOpen&&(null!=this.tlOpen&&this.tlOpen.isActive()&&this.tlOpen.kill(),this.tlClose=sn.timeline().to(".burger-line__top",{duration:.2,rotation:0}).to(".burger-line__bottom",{duration:.2,rotation:0},"<").to(".burger-line__top",{duration:.5,left:0,yPercent:0,top:0,ease:"Back.easeOut.config(0.5)"},">+=0.2").to(".burger-line__bottom",{right:0,yPercent:0,bottom:0,ease:"Back.easeOut.config(0.5)"},"<").to(this.menuItems,{duration:.4,opacity:0,yPercent:-50,stagger:-.05,ease:"Power1.easeOut"},0).to(".menu-panel-path",{duration:.6,attr:{d:"M 0 0 V 50 Q 50 0 100 50 V 0 z"},ease:"Expo.easeIn"},"<").to(".menu-panel-path",{duration:.3,attr:{d:"M 0 0 V 0 Q 50 0 100 0 V 0 z"},ease:"Power2.easeOut"},">").set(".nav-container",{autoAlpha:0,pointerEvents:"none"},"<").to(".contact-text",{autoAlpha:1,duration:.3}).to(".nav-top",{autoAlpha:0,duration:.3,ease:"Power4.easeOut"}),this.isMenuOpen=!1)}},{key:"fadeClose",value:function(){var t=this;return new Promise((function(e,i){sn.to(".nav-bar",{autoAlpha:0,duration:.3,ease:"Power4.easeIn"}),sn.to(".imf-dot",{autoAlpha:0,duration:.3,ease:"Power4.easeIn"}),sn.to(t.menuItems,{duration:.3,opacity:0,stagger:0,ease:"Power4.easeIn",onComplete:function(){e()}})}))}},{key:"addListeners",value:function(){var t=this;document.querySelectorAll(".menu").forEach((function(e){e.addEventListener("click",(function(e){e.stopPropagation(),t.toggle()}))})),document.querySelectorAll(".nav-link").forEach((function(e){e.addEventListener("click",(function(i){i.preventDefault(),e.classList.contains("no-menu")?t.app.transition.onLeavePage().then((function(){window.location=e.href})):t.fadeClose().then((function(){t.close(),window.location=e.href}))}))}))}},{key:"initPreFetch",value:function(){var t={prefetch:[],prerender:[]},e=function(t,e){var i=document.createElement("link");return i.setAttribute("rel",e),i.setAttribute("href",t),document.head.appendChild(i),t},i=function(t){return!t.match(/^\//)&&!t.includes(window.location.host)},s=function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=s.link,r=s.type,a=s.max,o=void 0===a?null:a,l=n.getAttribute("href");i(l)||t[r].includes(l)||null!==o&&t[r].length>=o||t[r].push(e(l,r))};El(document.querySelectorAll(".nav-link"),{callback:function(t){s({link:t,type:"prefetch"})}}),El(document.querySelectorAll(".nav-link"),{delay:1e3,count:3,callback:function(t){s({link:t,type:"prerender",max:1})}})}}]),e}(),kl=s((function e(){t(this,e),sn.to(".footer-overlay",{scrollTrigger:{trigger:".footer-container",start:"top-=100px bottom",toggleActions:"play reverse play reverse"},opacity:0,ease:"Power2.easeOut",duration:.5})}));o((function(){var t=document.getElementById("hour-berlin"),e=document.getElementById("hour-la"),i=document.getElementById("minute-berlin"),s=document.getElementById("minute-la"),n=document.getElementById("tz-berlin"),r=document.getElementById("tz-la");function a(){var a=new Date;e.innerHTML=Intl.DateTimeFormat("en-US",{hour:"2-digit",hour12:"true",timeZone:"America/Los_Angeles"}).format(a).substring(0,2).padStart(2,"0"),t.innerHTML=Intl.DateTimeFormat("de-DE",{hour:"2-digit",timeZone:"Europe/Berlin"}).format(a).substring(0,2).padStart(2,"0"),s.innerHTML=Intl.DateTimeFormat("en-US",{minute:"2-digit",hour12:"true",timeZone:"America/Los_Angeles"}).format(a).padStart(2,"0")+" "+Intl.DateTimeFormat("en-US",{hour:"2-digit",hour12:"true",timeZone:"America/Los_Angeles"}).format(a).slice(-2),i.innerHTML=Intl.DateTimeFormat("de-DE",{minute:"2-digit",timeZone:"Europe/Berlin"}).format(a).substring(0,2).padStart(2,"0"),n.innerHTML=Intl.DateTimeFormat("en-US",{timeZone:"Europe/Berlin",timeZoneName:"short"}).format(a).split(" ").pop(),r.innerHTML=Intl.DateTimeFormat("de-DE",{timeZone:"America/Los_Angeles",timeZoneName:"short"}).format(a).split(" ").pop()}a(),setInterval(a,6e4);var o="&#169; "+(new Date).getFullYear()+" - imotion factory";document.querySelector(".copyright-text").innerHTML=o}));var Al=function(){function e(){t(this,e),this.panel=document.querySelector(".transition-panel-path"),this.panelTl=sn.timeline(),this.loader=document.querySelector(".loading"),this.isEntered=!1}return s(e,[{key:"onLeavePage",value:function(){var t=this;return new Promise((function(e,i){t.panelTl.to(t.panel,{duration:.5,attr:{d:"M 0 0 V 50 Q 50 100 100 50 V 0 z"},ease:"Expo.easeIn"}),t.panelTl.to(t.panel,{duration:.25,attr:{d:"M 0 0 V 100 Q 50 100 100 100 V 0 z"},ease:"Power2.easeOut",onComplete:function(){e()}}),t.isEntered=!1}))}},{key:"onEnterPage",value:function(){this.isEntered||(this.panelTl.to(this.loader,{opacity:0,autoAlpha:0,duration:.8,ease:"Power2.easeInOut"}),this.panelTl.to(this.panel,{duration:.5,attr:{d:"M 0 0 V 50 Q 50 0 100 50 V 0 z"},ease:"Expo.easeIn"}),this.panelTl.to(this.panel,{duration:.25,attr:{d:"M 0 0 V 0 Q 50 0 100 0 V 0 z"},ease:"Power2.easeOut"}),this.isEntered=!0)}}]),e}(),Pl=function(){function e(){var i,s,n;t(this,e),s=new Date,n=new Date,i=localStorage.getItem("cookies-expires"),n.setDate(n.getDate()+i),i>0&&s>n&&(localStorage.removeItem("cookies"),localStorage.removeItem("cookies-expires")),this.locoScroll}return s(e,[{key:"init",value:function(t,e){var i=this;o((function(){var s,n;document.querySelector("body").style.display="block",document.querySelector("body").style.opacity="1",(s=document.querySelectorAll("img"),n=new a(document.querySelector(".loading-counter"),s.length),new Promise((function(t,e){var i=r()(s,{background:!0},t);s.length,i.on("progress",(function(t,e){n.onIncrease()}))}))).then((function(){i.cleanup=e,i.transition=new Al,i.transition.onEnterPage(),sn.registerPlugin(Or,ho),i.isSmooth=!0,i.theScroller=".smooth-scroll",i.touchSmooth=!0;var s=new gl({el:document.querySelector(".smooth-scroll"),smooth:i.isSmooth,tablet:{smooth:!0},smartphone:{smooth:i.touchSmooth},getSpeed:!0,multiplier:1.5,touchMultiplier:3.5,firefoxMultiplier:100,scrollFromAnywhere:!0,lerp:.05});i.locoScroll=s,s.on("scroll",Or.update),Or.scrollerProxy(i.theScroller,{scrollTop:function(t){return arguments.length?s.scrollTo(t,0,0):s.scroll.instance.scroll.y},getBoundingClientRect:function(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight}},pinType:document.querySelector(".smooth-scroll").style.transform?"transform":"fixed"}),Or.defaults({scroller:i.theScroller}),Or.addEventListener("refresh",(function(){return s.update()})),Or.refresh(!0),i.nav=new Sl(i),i.footer=new kl,i.handleCookies(),function(){var t=document.querySelector(".js-progress-circle");sn.to(t,{scrollTrigger:{trigger:".smooth-scroll",scrub:.3,start:"top top",end:"bottom 100%"},strokeDashoffset:"0",ease:"none"});var e=document.querySelector(".nav-progress-bar");sn.to(e,{scrollTrigger:{trigger:".smooth-scroll",scrub:.3,start:"top top",end:"bottom 100%"},scaleX:1,ease:"none"})}(),sn.utils.toArray(".anim-header").forEach((function(t){var e=new ho(t,{type:"lines",linesClass:"split-h2-lines"}),i=new ho(t,{type:"words",wordsClass:"split-h2-words"});sn.from(i.words,{yPercent:200,opacity:0,scaleY:0,ease:"Power.easeOut",duration:1.5,stagger:.01,transformOrigin:"bottom",scrollTrigger:{trigger:t,start:"top bottom",end:"bottom bottom"},onComplete:function(){i.revert(),e.revert()}})})),sn.utils.toArray(".anim-elem").forEach((function(t){sn.set(t,{yPercent:50,opacity:0,scaleY:.9}),sn.to(t,{yPercent:0,opacity:1,scaleY:1,ease:"Power.easeOut",duration:1.5,scrollTrigger:{trigger:t,start:"top bottom",end:"bottom bottom"}})})),Or.sort(),Or.refresh(),i.addListeners(),t.bind(i)()}))}))}},{key:"stopScroll",value:function(){this.locoScroll.stop()}},{key:"startScroll",value:function(){this.locoScroll.start()}},{key:"setCookie",value:function(t){"cookies"===t&&xl("cookies","allow",{expires:1e5})}},{key:"getCookie",value:function(t){return e=t,localStorage.getItem(e);var e}},{key:"deleteCookies",value:function(){localStorage.clear()}},{key:"handleCookies",value:function(){var t=this;"allow"!=this.getCookie("cookies")&&document.querySelector(".cookies-container").classList.remove("hide"),document.querySelector(".imf-btn-cookies-ok").addEventListener("click",(function(){t.setCookie("cookies","allow"),document.querySelector(".cookies-container").classList.add("hide")}))}},{key:"addListeners",value:function(){var t=this;window.addEventListener("contextmenu",(function(t){return t.preventDefault()})),document.querySelectorAll("img").forEach((function(t){t.addEventListener("dragstart",(function(t){return t.preventDefault(),!1}))})),this.docTitles=document.querySelectorAll("img, a, video"),this.currentTitle="",this.docTitles.forEach((function(e){e.addEventListener("mouseover",(function(){t.curTitle=e.getAttribute("title"),e.setAttribute("title","")})),e.addEventListener("mouseout",(function(){e.setAttribute("title",t.curTitle),t.curTitle=""}))})),document.addEventListener("touchmove",(function(t){1!==t.scale&&t.preventDefault()}),{passive:!1}),window.addEventListener("pageshow",(function(){t.cleanup?t.cleanup().then((function(){t.transition.onEnterPage()})):t.transition.onEnterPage(),t.nav.initMenu()}))}}]),e}(),Fl=i(73),Ml=i.n(Fl);var Ol=i(187);i.n(Ol)();var Rl,Ll=i(443),Il=i.n(Ll),Bl=function(){function e(i){t(this,e),this.panel=document.querySelector(".lb-panel-path"),this.videoLinks=i,this.sources=[],this.videoLightbox=document.querySelector(".video-lightbox"),this.vlClose=document.querySelector(".vl-close"),this.spinner=document.querySelector(".spinner"),this.thePlayer=document.querySelector(".player-container"),this.orentation=document.querySelector(".rotate-device"),this.isOpen=!1,this.pathPrefix="",this.pathPrefix=document.documentElement.getAttribute("data-path-prefix"),this.svgPath=this.pathPrefix+"/assets/images/shared/plyr.svg",this.loadSources(),this.initPlayer(),this.addListeners(),this.initAnimations()}return s(e,[{key:"onOpen",value:function(t){var e=this;this.tlOut.isActive()||(this.orientationCheck(!1),this.tlIn.restart(),this.player.source={type:"video",sources:[this.sources[t]]},this.player.on("ready",(function(){e.player.play()})),this.player.on("playing",(function(){e.showPlayer()})),this.isOpen=!0)}},{key:"onClose",value:function(){this.orientationCheck(!0),!this.tlIn.isActive()&&this.isOpen&&(this.tlOut.timeScale(1).restart(),this.isOpen=!1)}},{key:"onReset",value:function(){var t=this;return new Promise((function(e,i){t.orientationCheck(!0),t.isOpen?t.tlOut.timeScale(100).restart(!1,!1).then((function(){e()})):e()}))}},{key:"addListeners",value:function(){var t=this;this.videoLightbox.addEventListener("click",(function(e){e.target===t.videoLightbox&&t.onClose()})),this.vlClose.addEventListener("click",(function(e){t.onClose()}))}},{key:"initPlayer",value:function(){var t=this;this.player=new(Il())("#player",{debug:!1,title:"imotion factory presents",iconUrl:this.svgPath,controls:["play-large"],autoplay:!0,settings:["captions","quality"],hideControls:!0,blankVideo:this.pathPrefix+"/assets/images/shared/blank.mp4",resetOnEnd:!0,keyboard:{global:!0},tooltips:{controls:!1,seek:!1},fullScreen:{enabled:!0,fallback:!0,iosNative:!0,container:"html"},vimeo:{referrerPolicy:"no-referrer",speed:!1,playsinline:!0,texttrack:"de"}}),this.player.on("ended",(function(){t.onClose()}))}},{key:"loadSources",value:function(){var t=this;this.videoLinks.forEach((function(e){var i="vimeo";e.includes(i)||(i="html5"),t.sources.push({src:e,provider:i})}))}},{key:"hidePlayer",value:function(){sn.to(this.thePlayer,{autoAlpha:0})}},{key:"showPlayer",value:function(){sn.to(this.spinner,{autoAlpha:0,duration:1}),sn.to(this.thePlayer,{autoAlpha:1,duration:1,delay:1,ease:"Expo.easeOut"})}},{key:"initAnimations",value:function(){var t=this;this.tlIn=sn.timeline().pause(),this.tlIn.to(this.panel,{duration:.6,attr:{d:"M 0 0 V 50 Q 50 100 100 50 V 0 z"},ease:"Expo.easeIn"}).to(this.panel,{duration:.3,attr:{d:"M 0 0 V 100 Q 50 100 100 100 V 0 z"},ease:"Power2.easeOut"}).to(this.videoLightbox,{autoAlpha:1,pointerEvents:"all"},0).to(this.vlClose,{autoAlpha:1,duration:1},">").to(this.spinner,{autoAlpha:1,duration:1},">"),this.tlOut=sn.timeline().pause(),this.tlOut.to(this.thePlayer,{autoAlpha:0,duration:1}).to(this.vlClose,{autoAlpha:0,duration:1},"<").call((function(){t.player.stop()})).to(this.videoLightbox,{autoAlpha:0,pointerEvents:"all"},">+=0.5").to(this.panel,{duration:.6,attr:{d:"M 0 0 V 50 Q 50 0 100 50 V 0 z"},ease:"Expo.easeIn"},">").to(this.panel,{duration:.3,attr:{d:"M 0 0 V 0 Q 50 0 100 0 V 0 z"},ease:"Power2.easeOut"})}},{key:"orientationCheck",value:function(t){t?this.orentation.classList.remove("disabled"):this.orentation.classList.add("disabled")}},{key:"handleFullScreen",value:function(){if(console.log("handle full screen"),!this.player.embed.element.requestFullscreen)return this.player.embed.element.contentWindow&&this.player.embed.element.contentWindow.postMessage&&this.player.embed.element.contentWindow.postMessage('{"method":"requestFullscreen"}',"*"),void console.log("fs-toggle");console.log("fs-toggle fallback"),this.player.fullscreen.toggle()}}]),e}(),Nl=new Pl;Nl.init((function(){!function(){var t=new ja({scrollInstance:Nl.locoScroll,container:document.querySelector(".curtains-container"),slideElements:document.querySelectorAll(".slide")});Nl.locoScroll.on("scroll",(function(e){t.onScroll(e)}));var e=sn.utils.toArray(".slide"),i=sn.utils.toArray(".slide-tags"),s=sn.utils.toArray(".slide-text-wrapper .video-caption-type"),n=sn.utils.toArray(".slide-text-wrapper .video-caption-title");Or.addEventListener("refreshInit",(function(){e.forEach((function(t,e){sn.set(t,{rotation:0,scale:0,x:0})}))})),Or.addEventListener("refresh",(function(){t.updateParameter("angle",t.config.angle)}));var r=document.querySelector(".slider-counter"),a=document.querySelector(".slides-container");function o(t,e,i){var s=e<10?"0":"",n=i<10?"0":"";t.innerHTML=s+e+"/"+n+i}sn.set(r,{xPercent:-100}),sn.to(r,{scrollTrigger:{trigger:a,scroller:Nl.theScroller,start:"top top",end:"bottom center",toggleActions:"play reverse play reverse"},opacity:1,xPercent:100,ease:"Expo.easeOut"}),o(r,1,e.length);var l=document.querySelector(".slider-caption");function h(t,e,i,s,n){var r=s?0:1,a=s?1:0,o=s?2:1,l=n?"all":"none";sn.fromTo(t,{autoAlpha:r,letterSpacing:e,overwrite:!0},{autoAlpha:a,letterSpacing:i,duration:o,ease:"Expo.easeOut",overwrite:!0,pointerEvents:l})}sn.set(l,{xPercent:100}),sn.to(l,{scrollTrigger:{trigger:a,scroller:Nl.theScroller,start:"top top",end:"bottom center",toggleActions:"play reverse play reverse"},opacity:1,xPercent:-100,ease:"Expo.easeOut"}),e.forEach((function(t,a){Or.create({trigger:t,scroller:Nl.theScroller,invalidateOnRefresh:!0,fastScrollEnd:!0,preventOverlaps:!0,start:function(){return"top-=".concat(Ul(t)," center")},end:function(){return"bottom+=".concat(Ul(t)," center")},onEnter:function(){h(s[a],"0em","0em",!0,!1),h(n[a],"0.5em","0.5em",!0,!1),h(i[a],"0em","0em",!0,!0),o(r,a+1,e.length)},onLeave:function(){h(s[a],"0em","0.3em",!1,!1),h(n[a],"0.5em","1.5em",!1),h(i[a],"0em","0.3em",!1,!1),o(r,a+1,e.length)},onEnterBack:function(){h(s[a],"0em","0em",!0,!1),h(n[a],"0.5em","0.5em",!0,!1),h(i[a],"0em","0em",!0,!0),o(r,a+1,e.length)},onLeaveBack:function(){h(s[a],"0em","0.3em",!1,!1),h(n[a],"0.5em","1.5em",!1,!1),h(i[a],"0em","0.3em",!1,!1),o(r,a+1,e.length)}})})),Or.refresh(!0),t.onResize();var u=[];e.forEach((function(t){u.push(t.querySelector(".video-source").getAttribute("data-video-source"))})),Rl=new Bl(u),e.forEach((function(t,e){t.addEventListener("click",(function(t){Rl.onOpen(e)}))})),document.querySelectorAll(".btn-slider-play").forEach((function(t,e){t.addEventListener("click",(function(t){Rl.onOpen(e)}))}))}(),(new Wl).onStop(),Or.sort(),Or.refresh(!0)}),(function(){return new Promise((function(t,e){Rl?Rl.onReset().then((function(){t()})):t()}))}));var zl=window.matchMedia("(max-width: 900px)"),jl=document.querySelector(".agency-highlight-text");function Vl(t){t.matches?jl.setAttribute("data-scroll-speed","0"):jl.setAttribute("data-scroll-speed","1")}function Ul(t){var e=getComputedStyle(t);return parseInt(e.marginTop)+parseInt(e.marginBottom)}zl.addEventListener("change",(function(t){Vl(t)})),Vl(zl);var Wl=function(){function e(){var i=this;t(this,e),this.eq=sn.utils.toArray(".eq"),this.equalizer=document.querySelector(".equalizer-wrapper"),this.videoWrapper=document.querySelector(".video-wrapper"),this.btnText=document.querySelector(".imf-btn-play-reel .imf-btn-text"),this.ticker,this.videoWrapper.addEventListener("click",this.onToggle.bind(this)),this.player=new(Il())("#hero-player",{autoplay:!1,muted:!1,volume:0,loop:{active:!0},ratio:"2:1",controls:[],keyboard:{focused:!1,global:!1},clickToPlay:!1,storage:{enabled:!1},vimeo:{controls:!1}}),this.initialVolume=1,this.videoTl=sn.timeline(),Or.create({trigger:this.videoWrapper,scroller:Nl.theScroller,start:"bottom top",onEnter:function(t){return i.onStop()}})}return s(e,[{key:"onStart",value:function(){var t=this;this.player.play(),this.unMute(),this.ticker=setInterval((function(e){Ml()(t.eq,(function(t){sn.to(t,{duration:.2,height:l(0,100)+"%",ease:"Power0.easeNone",yoyo:!0})}))}),200),this.btnText.innerHTML="STOP REEL",this.RUNNING=!0}},{key:"onStop",value:function(){this.player.pause(),this.mute(),clearInterval(this.ticker),Ml()(this.eq,(function(t){sn.to(t,{duration:.8,height:"2px",ease:"Power0.easeNone",yoyo:!0})})),this.btnText.innerHTML="PLAY REEL",this.RUNNING=!1}},{key:"onToggle",value:function(){this.RUNNING?this.onStop():this.onStart()}},{key:"unMute",value:function(){this.player.currentTime=0,this.player.muted=!1,sn.to(this.player,{duration:1,volume:this.initialVolume})}},{key:"mute",value:function(){var t=this;sn.to(this.player,{duration:1,volume:0,onComplete:function(e){return t.player.muted=!0}})}}]),e}()}()}();